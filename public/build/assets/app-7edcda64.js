var be="top",$e="bottom",Pe="right",Te="left",bi="auto",zr=[be,$e,Pe,Te],tr="start",Lr="end",Cl="clippingParents",Qs="viewport",Tr="popper",Ll="reference",Is=zr.reduce(function(e,t){return e.concat([t+"-"+tr,t+"-"+Lr])},[]),Js=[].concat(zr,[bi]).reduce(function(e,t){return e.concat([t,t+"-"+tr,t+"-"+Lr])},[]),Ol="beforeRead",$l="read",Pl="afterRead",Rl="beforeMain",Nl="main",Il="afterMain",Dl="beforeWrite",zl="write",kl="afterWrite",Hl=[Ol,$l,Pl,Rl,Nl,Il,Dl,zl,kl];function nt(e){return e?(e.nodeName||"").toLowerCase():null}function Re(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function rr(e){var t=Re(e).Element;return e instanceof t||e instanceof Element}function Fe(e){var t=Re(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function eo(e){if(typeof ShadowRoot>"u")return!1;var t=Re(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Nu(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},s=t.elements[r];!Fe(s)||!nt(s)||(Object.assign(s.style,n),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function Iu(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],s=t.attributes[n]||{},o=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),a=o.reduce(function(l,c){return l[c]="",l},{});!Fe(i)||!nt(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const to={name:"applyStyles",enabled:!0,phase:"write",fn:Nu,effect:Iu,requires:["computeStyles"]};function tt(e){return e.split("-")[0]}var er=Math.max,fi=Math.min,Or=Math.round;function Ds(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Fl(){return!/^((?!chrome|android).)*safari/i.test(Ds())}function $r(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,s=1;t&&Fe(e)&&(i=e.offsetWidth>0&&Or(n.width)/e.offsetWidth||1,s=e.offsetHeight>0&&Or(n.height)/e.offsetHeight||1);var o=rr(e)?Re(e):window,a=o.visualViewport,l=!Fl()&&r,c=(n.left+(l&&a?a.offsetLeft:0))/i,h=(n.top+(l&&a?a.offsetTop:0))/s,f=n.width/i,u=n.height/s;return{width:f,height:u,top:h,right:c+f,bottom:h+u,left:c,x:c,y:h}}function ro(e){var t=$r(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function Vl(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&eo(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function _t(e){return Re(e).getComputedStyle(e)}function Du(e){return["table","td","th"].indexOf(nt(e))>=0}function kt(e){return((rr(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ti(e){return nt(e)==="html"?e:e.assignedSlot||e.parentNode||(eo(e)?e.host:null)||kt(e)}function na(e){return!Fe(e)||_t(e).position==="fixed"?null:e.offsetParent}function zu(e){var t=/firefox/i.test(Ds()),r=/Trident/i.test(Ds());if(r&&Fe(e)){var n=_t(e);if(n.position==="fixed")return null}var i=Ti(e);for(eo(i)&&(i=i.host);Fe(i)&&["html","body"].indexOf(nt(i))<0;){var s=_t(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function mn(e){for(var t=Re(e),r=na(e);r&&Du(r)&&_t(r).position==="static";)r=na(r);return r&&(nt(r)==="html"||nt(r)==="body"&&_t(r).position==="static")?t:r||zu(e)||t}function no(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function cn(e,t,r){return er(e,fi(t,r))}function ku(e,t,r){var n=cn(e,t,r);return n>r?r:n}function Bl(){return{top:0,right:0,bottom:0,left:0}}function Wl(e){return Object.assign({},Bl(),e)}function Ul(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var Hu=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Wl(typeof t!="number"?t:Ul(t,zr))};function Fu(e){var t,r=e.state,n=e.name,i=e.options,s=r.elements.arrow,o=r.modifiersData.popperOffsets,a=tt(r.placement),l=no(a),c=[Te,Pe].indexOf(a)>=0,h=c?"height":"width";if(!(!s||!o)){var f=Hu(i.padding,r),u=ro(s),v=l==="y"?be:Te,d=l==="y"?$e:Pe,y=r.rects.reference[h]+r.rects.reference[l]-o[l]-r.rects.popper[h],m=o[l]-r.rects.reference[l],E=mn(s),T=E?l==="y"?E.clientHeight||0:E.clientWidth||0:0,x=y/2-m/2,A=f[v],C=T-u[h]-f[d],S=T/2-u[h]/2+x,$=cn(A,S,C),z=l;r.modifiersData[n]=(t={},t[z]=$,t.centerOffset=$-S,t)}}function Vu(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||Vl(t.elements.popper,i)&&(t.elements.arrow=i))}const jl={name:"arrow",enabled:!0,phase:"main",fn:Fu,effect:Vu,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Pr(e){return e.split("-")[1]}var Bu={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Wu(e,t){var r=e.x,n=e.y,i=t.devicePixelRatio||1;return{x:Or(r*i)/i||0,y:Or(n*i)/i||0}}function ia(e){var t,r=e.popper,n=e.popperRect,i=e.placement,s=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,h=e.roundOffsets,f=e.isFixed,u=o.x,v=u===void 0?0:u,d=o.y,y=d===void 0?0:d,m=typeof h=="function"?h({x:v,y}):{x:v,y};v=m.x,y=m.y;var E=o.hasOwnProperty("x"),T=o.hasOwnProperty("y"),x=Te,A=be,C=window;if(c){var S=mn(r),$="clientHeight",z="clientWidth";if(S===Re(r)&&(S=kt(r),_t(S).position!=="static"&&a==="absolute"&&($="scrollHeight",z="scrollWidth")),S=S,i===be||(i===Te||i===Pe)&&s===Lr){A=$e;var I=f&&S===C&&C.visualViewport?C.visualViewport.height:S[$];y-=I-n.height,y*=l?1:-1}if(i===Te||(i===be||i===$e)&&s===Lr){x=Pe;var D=f&&S===C&&C.visualViewport?C.visualViewport.width:S[z];v-=D-n.width,v*=l?1:-1}}var P=Object.assign({position:a},c&&Bu),H=h===!0?Wu({x:v,y},Re(r)):{x:v,y};if(v=H.x,y=H.y,l){var F;return Object.assign({},P,(F={},F[A]=T?"0":"",F[x]=E?"0":"",F.transform=(C.devicePixelRatio||1)<=1?"translate("+v+"px, "+y+"px)":"translate3d("+v+"px, "+y+"px, 0)",F))}return Object.assign({},P,(t={},t[A]=T?y+"px":"",t[x]=E?v+"px":"",t.transform="",t))}function Uu(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,s=r.adaptive,o=s===void 0?!0:s,a=r.roundOffsets,l=a===void 0?!0:a,c={placement:tt(t.placement),variation:Pr(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,ia(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,ia(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const io={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Uu,data:{}};var jn={passive:!0};function ju(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,s=i===void 0?!0:i,o=n.resize,a=o===void 0?!0:o,l=Re(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&c.forEach(function(h){h.addEventListener("scroll",r.update,jn)}),a&&l.addEventListener("resize",r.update,jn),function(){s&&c.forEach(function(h){h.removeEventListener("scroll",r.update,jn)}),a&&l.removeEventListener("resize",r.update,jn)}}const so={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ju,data:{}};var qu={left:"right",right:"left",bottom:"top",top:"bottom"};function ri(e){return e.replace(/left|right|bottom|top/g,function(t){return qu[t]})}var Yu={start:"end",end:"start"};function sa(e){return e.replace(/start|end/g,function(t){return Yu[t]})}function oo(e){var t=Re(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function ao(e){return $r(kt(e)).left+oo(e).scrollLeft}function Xu(e,t){var r=Re(e),n=kt(e),i=r.visualViewport,s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=Fl();(c||!c&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+ao(e),y:l}}function Gu(e){var t,r=kt(e),n=oo(e),i=(t=e.ownerDocument)==null?void 0:t.body,s=er(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=er(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-n.scrollLeft+ao(e),l=-n.scrollTop;return _t(i||r).direction==="rtl"&&(a+=er(r.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function lo(e){var t=_t(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function ql(e){return["html","body","#document"].indexOf(nt(e))>=0?e.ownerDocument.body:Fe(e)&&lo(e)?e:ql(Ti(e))}function hn(e,t){var r;t===void 0&&(t=[]);var n=ql(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),s=Re(n),o=i?[s].concat(s.visualViewport||[],lo(n)?n:[]):n,a=t.concat(o);return i?a:a.concat(hn(Ti(o)))}function zs(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Ku(e,t){var r=$r(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function oa(e,t,r){return t===Qs?zs(Xu(e,r)):rr(t)?Ku(t,r):zs(Gu(kt(e)))}function Zu(e){var t=hn(Ti(e)),r=["absolute","fixed"].indexOf(_t(e).position)>=0,n=r&&Fe(e)?mn(e):e;return rr(n)?t.filter(function(i){return rr(i)&&Vl(i,n)&&nt(i)!=="body"}):[]}function Qu(e,t,r,n){var i=t==="clippingParents"?Zu(e):[].concat(t),s=[].concat(i,[r]),o=s[0],a=s.reduce(function(l,c){var h=oa(e,c,n);return l.top=er(h.top,l.top),l.right=fi(h.right,l.right),l.bottom=fi(h.bottom,l.bottom),l.left=er(h.left,l.left),l},oa(e,o,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Yl(e){var t=e.reference,r=e.element,n=e.placement,i=n?tt(n):null,s=n?Pr(n):null,o=t.x+t.width/2-r.width/2,a=t.y+t.height/2-r.height/2,l;switch(i){case be:l={x:o,y:t.y-r.height};break;case $e:l={x:o,y:t.y+t.height};break;case Pe:l={x:t.x+t.width,y:a};break;case Te:l={x:t.x-r.width,y:a};break;default:l={x:t.x,y:t.y}}var c=i?no(i):null;if(c!=null){var h=c==="y"?"height":"width";switch(s){case tr:l[c]=l[c]-(t[h]/2-r[h]/2);break;case Lr:l[c]=l[c]+(t[h]/2-r[h]/2);break}}return l}function Rr(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,s=r.strategy,o=s===void 0?e.strategy:s,a=r.boundary,l=a===void 0?Cl:a,c=r.rootBoundary,h=c===void 0?Qs:c,f=r.elementContext,u=f===void 0?Tr:f,v=r.altBoundary,d=v===void 0?!1:v,y=r.padding,m=y===void 0?0:y,E=Wl(typeof m!="number"?m:Ul(m,zr)),T=u===Tr?Ll:Tr,x=e.rects.popper,A=e.elements[d?T:u],C=Qu(rr(A)?A:A.contextElement||kt(e.elements.popper),l,h,o),S=$r(e.elements.reference),$=Yl({reference:S,element:x,strategy:"absolute",placement:i}),z=zs(Object.assign({},x,$)),I=u===Tr?z:S,D={top:C.top-I.top+E.top,bottom:I.bottom-C.bottom+E.bottom,left:C.left-I.left+E.left,right:I.right-C.right+E.right},P=e.modifiersData.offset;if(u===Tr&&P){var H=P[i];Object.keys(D).forEach(function(F){var R=[Pe,$e].indexOf(F)>=0?1:-1,w=[be,$e].indexOf(F)>=0?"y":"x";D[F]+=H[w]*R})}return D}function Ju(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,s=r.rootBoundary,o=r.padding,a=r.flipVariations,l=r.allowedAutoPlacements,c=l===void 0?Js:l,h=Pr(n),f=h?a?Is:Is.filter(function(d){return Pr(d)===h}):zr,u=f.filter(function(d){return c.indexOf(d)>=0});u.length===0&&(u=f);var v=u.reduce(function(d,y){return d[y]=Rr(e,{placement:y,boundary:i,rootBoundary:s,padding:o})[tt(y)],d},{});return Object.keys(v).sort(function(d,y){return v[d]-v[y]})}function ed(e){if(tt(e)===bi)return[];var t=ri(e);return[sa(e),t,sa(t)]}function td(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,s=i===void 0?!0:i,o=r.altAxis,a=o===void 0?!0:o,l=r.fallbackPlacements,c=r.padding,h=r.boundary,f=r.rootBoundary,u=r.altBoundary,v=r.flipVariations,d=v===void 0?!0:v,y=r.allowedAutoPlacements,m=t.options.placement,E=tt(m),T=E===m,x=l||(T||!d?[ri(m)]:ed(m)),A=[m].concat(x).reduce(function(Le,J){return Le.concat(tt(J)===bi?Ju(t,{placement:J,boundary:h,rootBoundary:f,padding:c,flipVariations:d,allowedAutoPlacements:y}):J)},[]),C=t.rects.reference,S=t.rects.popper,$=new Map,z=!0,I=A[0],D=0;D<A.length;D++){var P=A[D],H=tt(P),F=Pr(P)===tr,R=[be,$e].indexOf(H)>=0,w=R?"width":"height",Y=Rr(t,{placement:P,boundary:h,rootBoundary:f,altBoundary:u,padding:c}),U=R?F?Pe:Te:F?$e:be;C[w]>S[w]&&(U=ri(U));var se=ri(U),oe=[];if(s&&oe.push(Y[H]<=0),a&&oe.push(Y[U]<=0,Y[se]<=0),oe.every(function(Le){return Le})){I=P,z=!1;break}$.set(P,oe)}if(z)for(var ae=d?3:1,xe=function(J){var Oe=A.find(function(te){var ne=$.get(te);if(ne)return ne.slice(0,J).every(function(At){return At})});if(Oe)return I=Oe,"break"},_e=ae;_e>0;_e--){var Ke=xe(_e);if(Ke==="break")break}t.placement!==I&&(t.modifiersData[n]._skip=!0,t.placement=I,t.reset=!0)}}const Xl={name:"flip",enabled:!0,phase:"main",fn:td,requiresIfExists:["offset"],data:{_skip:!1}};function aa(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function la(e){return[be,Pe,$e,Te].some(function(t){return e[t]>=0})}function rd(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,s=t.modifiersData.preventOverflow,o=Rr(t,{elementContext:"reference"}),a=Rr(t,{altBoundary:!0}),l=aa(o,n),c=aa(a,i,s),h=la(l),f=la(c);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":f})}const Gl={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:rd};function nd(e,t,r){var n=tt(e),i=[Te,be].indexOf(n)>=0?-1:1,s=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Te,Pe].indexOf(n)>=0?{x:a,y:o}:{x:o,y:a}}function id(e){var t=e.state,r=e.options,n=e.name,i=r.offset,s=i===void 0?[0,0]:i,o=Js.reduce(function(h,f){return h[f]=nd(f,t.rects,s),h},{}),a=o[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=o}const Kl={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:id};function sd(e){var t=e.state,r=e.name;t.modifiersData[r]=Yl({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const co={name:"popperOffsets",enabled:!0,phase:"read",fn:sd,data:{}};function od(e){return e==="x"?"y":"x"}function ad(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,s=i===void 0?!0:i,o=r.altAxis,a=o===void 0?!1:o,l=r.boundary,c=r.rootBoundary,h=r.altBoundary,f=r.padding,u=r.tether,v=u===void 0?!0:u,d=r.tetherOffset,y=d===void 0?0:d,m=Rr(t,{boundary:l,rootBoundary:c,padding:f,altBoundary:h}),E=tt(t.placement),T=Pr(t.placement),x=!T,A=no(E),C=od(A),S=t.modifiersData.popperOffsets,$=t.rects.reference,z=t.rects.popper,I=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,D=typeof I=="number"?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),P=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,H={x:0,y:0};if(S){if(s){var F,R=A==="y"?be:Te,w=A==="y"?$e:Pe,Y=A==="y"?"height":"width",U=S[A],se=U+m[R],oe=U-m[w],ae=v?-z[Y]/2:0,xe=T===tr?$[Y]:z[Y],_e=T===tr?-z[Y]:-$[Y],Ke=t.elements.arrow,Le=v&&Ke?ro(Ke):{width:0,height:0},J=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Bl(),Oe=J[R],te=J[w],ne=cn(0,$[Y],Le[Y]),At=x?$[Y]/2-ae-ne-Oe-D.mainAxis:xe-ne-Oe-D.mainAxis,qt=x?-$[Y]/2+ae+ne+te+D.mainAxis:_e+ne+te+D.mainAxis,ct=t.elements.arrow&&mn(t.elements.arrow),Yt=ct?A==="y"?ct.clientTop||0:ct.clientLeft||0:0,St=(F=P==null?void 0:P[A])!=null?F:0,De=U+At-St-Yt,ht=U+qt-St,Xr=cn(v?fi(se,De):se,U,v?er(oe,ht):oe);S[A]=Xr,H[A]=Xr-U}if(a){var Gr,vr=A==="x"?be:Te,Me=A==="x"?$e:Pe,ft=S[C],mr=C==="y"?"height":"width",In=ft+m[vr],Dn=ft-m[Me],Kr=[be,Te].indexOf(E)!==-1,Zr=(Gr=P==null?void 0:P[C])!=null?Gr:0,Qr=Kr?In:ft-$[mr]-z[mr]-Zr+D.altAxis,zn=Kr?ft+$[mr]+z[mr]-Zr-D.altAxis:Dn,Jr=v&&Kr?ku(Qr,ft,zn):cn(v?Qr:In,ft,v?zn:Dn);S[C]=Jr,H[C]=Jr-ft}t.modifiersData[n]=H}}const Zl={name:"preventOverflow",enabled:!0,phase:"main",fn:ad,requiresIfExists:["offset"]};function ld(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function cd(e){return e===Re(e)||!Fe(e)?oo(e):ld(e)}function hd(e){var t=e.getBoundingClientRect(),r=Or(t.width)/e.offsetWidth||1,n=Or(t.height)/e.offsetHeight||1;return r!==1||n!==1}function fd(e,t,r){r===void 0&&(r=!1);var n=Fe(t),i=Fe(t)&&hd(t),s=kt(t),o=$r(e,i,r),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!r)&&((nt(t)!=="body"||lo(s))&&(a=cd(t)),Fe(t)?(l=$r(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=ao(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function ud(e){var t=new Map,r=new Set,n=[];e.forEach(function(s){t.set(s.name,s)});function i(s){r.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!r.has(a)){var l=t.get(a);l&&i(l)}}),n.push(s)}return e.forEach(function(s){r.has(s.name)||i(s)}),n}function dd(e){var t=ud(e);return Hl.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function pd(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function vd(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var ca={placement:"bottom",modifiers:[],strategy:"absolute"};function ha(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function xi(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,s=i===void 0?ca:i;return function(a,l,c){c===void 0&&(c=s);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},ca,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],u=!1,v={state:h,setOptions:function(E){var T=typeof E=="function"?E(h.options):E;y(),h.options=Object.assign({},s,h.options,T),h.scrollParents={reference:rr(a)?hn(a):a.contextElement?hn(a.contextElement):[],popper:hn(l)};var x=dd(vd([].concat(n,h.options.modifiers)));return h.orderedModifiers=x.filter(function(A){return A.enabled}),d(),v.update()},forceUpdate:function(){if(!u){var E=h.elements,T=E.reference,x=E.popper;if(ha(T,x)){h.rects={reference:fd(T,mn(x),h.options.strategy==="fixed"),popper:ro(x)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(D){return h.modifiersData[D.name]=Object.assign({},D.data)});for(var A=0;A<h.orderedModifiers.length;A++){if(h.reset===!0){h.reset=!1,A=-1;continue}var C=h.orderedModifiers[A],S=C.fn,$=C.options,z=$===void 0?{}:$,I=C.name;typeof S=="function"&&(h=S({state:h,options:z,name:I,instance:v})||h)}}}},update:pd(function(){return new Promise(function(m){v.forceUpdate(),m(h)})}),destroy:function(){y(),u=!0}};if(!ha(a,l))return v;v.setOptions(c).then(function(m){!u&&c.onFirstUpdate&&c.onFirstUpdate(m)});function d(){h.orderedModifiers.forEach(function(m){var E=m.name,T=m.options,x=T===void 0?{}:T,A=m.effect;if(typeof A=="function"){var C=A({state:h,name:E,instance:v,options:x}),S=function(){};f.push(C||S)}})}function y(){f.forEach(function(m){return m()}),f=[]}return v}}var md=xi(),_d=[so,co,io,to],yd=xi({defaultModifiers:_d}),gd=[so,co,io,to,Kl,Xl,Zl,jl,Gl],ho=xi({defaultModifiers:gd});const Ql=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Il,afterRead:Pl,afterWrite:kl,applyStyles:to,arrow:jl,auto:bi,basePlacements:zr,beforeMain:Rl,beforeRead:Ol,beforeWrite:Dl,bottom:$e,clippingParents:Cl,computeStyles:io,createPopper:ho,createPopperBase:md,createPopperLite:yd,detectOverflow:Rr,end:Lr,eventListeners:so,flip:Xl,hide:Gl,left:Te,main:Nl,modifierPhases:Hl,offset:Kl,placements:Js,popper:Tr,popperGenerator:xi,popperOffsets:co,preventOverflow:Zl,read:$l,reference:Ll,right:Pe,start:tr,top:be,variationPlacements:Is,viewport:Qs,write:zl},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Ot=new Map,rs={set(e,t,r){Ot.has(e)||Ot.set(e,new Map);const n=Ot.get(e);if(!n.has(t)&&n.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`);return}n.set(t,r)},get(e,t){return Ot.has(e)&&Ot.get(e).get(t)||null},remove(e,t){if(!Ot.has(e))return;const r=Ot.get(e);r.delete(t),r.size===0&&Ot.delete(e)}},Ed=1e6,wd=1e3,ks="transitionend",Jl=e=>(e&&window.CSS&&window.CSS.escape&&(e=e.replace(/#([^\s"#']+)/g,(t,r)=>`#${CSS.escape(r)}`)),e),bd=e=>e==null?`${e}`:Object.prototype.toString.call(e).match(/\s([a-z]+)/i)[1].toLowerCase(),Td=e=>{do e+=Math.floor(Math.random()*Ed);while(document.getElementById(e));return e},xd=e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:r}=window.getComputedStyle(e);const n=Number.parseFloat(t),i=Number.parseFloat(r);return!n&&!i?0:(t=t.split(",")[0],r=r.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(r))*wd)},ec=e=>{e.dispatchEvent(new Event(ks))},vt=e=>!e||typeof e!="object"?!1:(typeof e.jquery<"u"&&(e=e[0]),typeof e.nodeType<"u"),Nt=e=>vt(e)?e.jquery?e[0]:e:typeof e=="string"&&e.length>0?document.querySelector(Jl(e)):null,kr=e=>{if(!vt(e)||e.getClientRects().length===0)return!1;const t=getComputedStyle(e).getPropertyValue("visibility")==="visible",r=e.closest("details:not([open])");if(!r)return t;if(r!==e){const n=e.closest("summary");if(n&&n.parentNode!==r||n===null)return!1}return t},It=e=>!e||e.nodeType!==Node.ELEMENT_NODE||e.classList.contains("disabled")?!0:typeof e.disabled<"u"?e.disabled:e.hasAttribute("disabled")&&e.getAttribute("disabled")!=="false",tc=e=>{if(!document.documentElement.attachShadow)return null;if(typeof e.getRootNode=="function"){const t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?tc(e.parentNode):null},ui=()=>{},_n=e=>{e.offsetHeight},rc=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,ns=[],Md=e=>{document.readyState==="loading"?(ns.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of ns)t()}),ns.push(e)):e()},Ve=()=>document.documentElement.dir==="rtl",We=e=>{Md(()=>{const t=rc();if(t){const r=e.NAME,n=t.fn[r];t.fn[r]=e.jQueryInterface,t.fn[r].Constructor=e,t.fn[r].noConflict=()=>(t.fn[r]=n,e.jQueryInterface)}})},Ae=(e,t=[],r=e)=>typeof e=="function"?e(...t):r,nc=(e,t,r=!0)=>{if(!r){Ae(e);return}const n=5,i=xd(t)+n;let s=!1;const o=({target:a})=>{a===t&&(s=!0,t.removeEventListener(ks,o),Ae(e))};t.addEventListener(ks,o),setTimeout(()=>{s||ec(t)},i)},fo=(e,t,r,n)=>{const i=e.length;let s=e.indexOf(t);return s===-1?!r&&n?e[i-1]:e[0]:(s+=r?1:-1,n&&(s=(s+i)%i),e[Math.max(0,Math.min(s,i-1))])},Ad=/[^.]*(?=\..*)\.|.*/,Sd=/\..*/,Cd=/::\d+$/,is={};let fa=1;const ic={mouseenter:"mouseover",mouseleave:"mouseout"},Ld=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function sc(e,t){return t&&`${t}::${fa++}`||e.uidEvent||fa++}function oc(e){const t=sc(e);return e.uidEvent=t,is[t]=is[t]||{},is[t]}function Od(e,t){return function r(n){return uo(n,{delegateTarget:e}),r.oneOff&&L.off(e,n.type,t),t.apply(e,[n])}}function $d(e,t,r){return function n(i){const s=e.querySelectorAll(t);for(let{target:o}=i;o&&o!==this;o=o.parentNode)for(const a of s)if(a===o)return uo(i,{delegateTarget:o}),n.oneOff&&L.off(e,i.type,t,r),r.apply(o,[i])}}function ac(e,t,r=null){return Object.values(e).find(n=>n.callable===t&&n.delegationSelector===r)}function lc(e,t,r){const n=typeof t=="string",i=n?r:t||r;let s=cc(e);return Ld.has(s)||(s=e),[n,i,s]}function ua(e,t,r,n,i){if(typeof t!="string"||!e)return;let[s,o,a]=lc(t,r,n);t in ic&&(o=(d=>function(y){if(!y.relatedTarget||y.relatedTarget!==y.delegateTarget&&!y.delegateTarget.contains(y.relatedTarget))return d.call(this,y)})(o));const l=oc(e),c=l[a]||(l[a]={}),h=ac(c,o,s?r:null);if(h){h.oneOff=h.oneOff&&i;return}const f=sc(o,t.replace(Ad,"")),u=s?$d(e,r,o):Od(e,o);u.delegationSelector=s?r:null,u.callable=o,u.oneOff=i,u.uidEvent=f,c[f]=u,e.addEventListener(a,u,s)}function Hs(e,t,r,n,i){const s=ac(t[r],n,i);s&&(e.removeEventListener(r,s,!!i),delete t[r][s.uidEvent])}function Pd(e,t,r,n){const i=t[r]||{};for(const[s,o]of Object.entries(i))s.includes(n)&&Hs(e,t,r,o.callable,o.delegationSelector)}function cc(e){return e=e.replace(Sd,""),ic[e]||e}const L={on(e,t,r,n){ua(e,t,r,n,!1)},one(e,t,r,n){ua(e,t,r,n,!0)},off(e,t,r,n){if(typeof t!="string"||!e)return;const[i,s,o]=lc(t,r,n),a=o!==t,l=oc(e),c=l[o]||{},h=t.startsWith(".");if(typeof s<"u"){if(!Object.keys(c).length)return;Hs(e,l,o,s,i?r:null);return}if(h)for(const f of Object.keys(l))Pd(e,l,f,t.slice(1));for(const[f,u]of Object.entries(c)){const v=f.replace(Cd,"");(!a||t.includes(v))&&Hs(e,l,o,u.callable,u.delegationSelector)}},trigger(e,t,r){if(typeof t!="string"||!e)return null;const n=rc(),i=cc(t),s=t!==i;let o=null,a=!0,l=!0,c=!1;s&&n&&(o=n.Event(t,r),n(e).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),c=o.isDefaultPrevented());const h=uo(new Event(t,{bubbles:a,cancelable:!0}),r);return c&&h.preventDefault(),l&&e.dispatchEvent(h),h.defaultPrevented&&o&&o.preventDefault(),h}};function uo(e,t={}){for(const[r,n]of Object.entries(t))try{e[r]=n}catch{Object.defineProperty(e,r,{configurable:!0,get(){return n}})}return e}function da(e){if(e==="true")return!0;if(e==="false")return!1;if(e===Number(e).toString())return Number(e);if(e===""||e==="null")return null;if(typeof e!="string")return e;try{return JSON.parse(decodeURIComponent(e))}catch{return e}}function ss(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const mt={setDataAttribute(e,t,r){e.setAttribute(`data-bs-${ss(t)}`,r)},removeDataAttribute(e,t){e.removeAttribute(`data-bs-${ss(t)}`)},getDataAttributes(e){if(!e)return{};const t={},r=Object.keys(e.dataset).filter(n=>n.startsWith("bs")&&!n.startsWith("bsConfig"));for(const n of r){let i=n.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),t[i]=da(e.dataset[n])}return t},getDataAttribute(e,t){return da(e.getAttribute(`data-bs-${ss(t)}`))}};class yn{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,r){const n=vt(r)?mt.getDataAttribute(r,"config"):{};return{...this.constructor.Default,...typeof n=="object"?n:{},...vt(r)?mt.getDataAttributes(r):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,r=this.constructor.DefaultType){for(const[n,i]of Object.entries(r)){const s=t[n],o=vt(s)?"element":bd(s);if(!new RegExp(i).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${o}" but expected type "${i}".`)}}}const Rd="5.3.3";class Ye extends yn{constructor(t,r){super(),t=Nt(t),t&&(this._element=t,this._config=this._getConfig(r),rs.set(this._element,this.constructor.DATA_KEY,this))}dispose(){rs.remove(this._element,this.constructor.DATA_KEY),L.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,r,n=!0){nc(t,r,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return rs.get(Nt(t),this.DATA_KEY)}static getOrCreateInstance(t,r={}){return this.getInstance(t)||new this(t,typeof r=="object"?r:null)}static get VERSION(){return Rd}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const os=e=>{let t=e.getAttribute("data-bs-target");if(!t||t==="#"){let r=e.getAttribute("href");if(!r||!r.includes("#")&&!r.startsWith("."))return null;r.includes("#")&&!r.startsWith("#")&&(r=`#${r.split("#")[1]}`),t=r&&r!=="#"?r.trim():null}return t?t.split(",").map(r=>Jl(r)).join(","):null},k={find(e,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,e))},findOne(e,t=document.documentElement){return Element.prototype.querySelector.call(t,e)},children(e,t){return[].concat(...e.children).filter(r=>r.matches(t))},parents(e,t){const r=[];let n=e.parentNode.closest(t);for(;n;)r.push(n),n=n.parentNode.closest(t);return r},prev(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return[r];r=r.previousElementSibling}return[]},next(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return[r];r=r.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(r=>`${r}:not([tabindex^="-"])`).join(",");return this.find(t,e).filter(r=>!It(r)&&kr(r))},getSelectorFromElement(e){const t=os(e);return t&&k.findOne(t)?t:null},getElementFromSelector(e){const t=os(e);return t?k.findOne(t):null},getMultipleElementsFromSelector(e){const t=os(e);return t?k.find(t):[]}},Mi=(e,t="hide")=>{const r=`click.dismiss${e.EVENT_KEY}`,n=e.NAME;L.on(document,r,`[data-bs-dismiss="${n}"]`,function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),It(this))return;const s=k.getElementFromSelector(this)||this.closest(`.${n}`);e.getOrCreateInstance(s)[t]()})},Nd="alert",Id="bs.alert",hc=`.${Id}`,Dd=`close${hc}`,zd=`closed${hc}`,kd="fade",Hd="show";class Ai extends Ye{static get NAME(){return Nd}close(){if(L.trigger(this._element,Dd).defaultPrevented)return;this._element.classList.remove(Hd);const r=this._element.classList.contains(kd);this._queueCallback(()=>this._destroyElement(),this._element,r)}_destroyElement(){this._element.remove(),L.trigger(this._element,zd),this.dispose()}static jQueryInterface(t){return this.each(function(){const r=Ai.getOrCreateInstance(this);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t](this)}})}}Mi(Ai,"close");We(Ai);const Fd="button",Vd="bs.button",Bd=`.${Vd}`,Wd=".data-api",Ud="active",pa='[data-bs-toggle="button"]',jd=`click${Bd}${Wd}`;class Si extends Ye{static get NAME(){return Fd}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Ud))}static jQueryInterface(t){return this.each(function(){const r=Si.getOrCreateInstance(this);t==="toggle"&&r[t]()})}}L.on(document,jd,pa,e=>{e.preventDefault();const t=e.target.closest(pa);Si.getOrCreateInstance(t).toggle()});We(Si);const qd="swipe",Hr=".bs.swipe",Yd=`touchstart${Hr}`,Xd=`touchmove${Hr}`,Gd=`touchend${Hr}`,Kd=`pointerdown${Hr}`,Zd=`pointerup${Hr}`,Qd="touch",Jd="pen",ep="pointer-event",tp=40,rp={endCallback:null,leftCallback:null,rightCallback:null},np={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class di extends yn{constructor(t,r){super(),this._element=t,!(!t||!di.isSupported())&&(this._config=this._getConfig(r),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return rp}static get DefaultType(){return np}static get NAME(){return qd}dispose(){L.off(this._element,Hr)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Ae(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=tp)return;const r=t/this._deltaX;this._deltaX=0,r&&Ae(r>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(L.on(this._element,Kd,t=>this._start(t)),L.on(this._element,Zd,t=>this._end(t)),this._element.classList.add(ep)):(L.on(this._element,Yd,t=>this._start(t)),L.on(this._element,Xd,t=>this._move(t)),L.on(this._element,Gd,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===Jd||t.pointerType===Qd)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ip="carousel",sp="bs.carousel",Ht=`.${sp}`,fc=".data-api",op="ArrowLeft",ap="ArrowRight",lp=500,sn="next",gr="prev",xr="left",ni="right",cp=`slide${Ht}`,as=`slid${Ht}`,hp=`keydown${Ht}`,fp=`mouseenter${Ht}`,up=`mouseleave${Ht}`,dp=`dragstart${Ht}`,pp=`load${Ht}${fc}`,vp=`click${Ht}${fc}`,uc="carousel",qn="active",mp="slide",_p="carousel-item-end",yp="carousel-item-start",gp="carousel-item-next",Ep="carousel-item-prev",dc=".active",pc=".carousel-item",wp=dc+pc,bp=".carousel-item img",Tp=".carousel-indicators",xp="[data-bs-slide], [data-bs-slide-to]",Mp='[data-bs-ride="carousel"]',Ap={[op]:ni,[ap]:xr},Sp={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Cp={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class gn extends Ye{constructor(t,r){super(t,r),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=k.findOne(Tp,this._element),this._addEventListeners(),this._config.ride===uc&&this.cycle()}static get Default(){return Sp}static get DefaultType(){return Cp}static get NAME(){return ip}next(){this._slide(sn)}nextWhenVisible(){!document.hidden&&kr(this._element)&&this.next()}prev(){this._slide(gr)}pause(){this._isSliding&&ec(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){L.one(this._element,as,()=>this.cycle());return}this.cycle()}}to(t){const r=this._getItems();if(t>r.length-1||t<0)return;if(this._isSliding){L.one(this._element,as,()=>this.to(t));return}const n=this._getItemIndex(this._getActive());if(n===t)return;const i=t>n?sn:gr;this._slide(i,r[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&L.on(this._element,hp,t=>this._keydown(t)),this._config.pause==="hover"&&(L.on(this._element,fp,()=>this.pause()),L.on(this._element,up,()=>this._maybeEnableCycle())),this._config.touch&&di.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const n of k.find(bp,this._element))L.on(n,dp,i=>i.preventDefault());const r={leftCallback:()=>this._slide(this._directionToOrder(xr)),rightCallback:()=>this._slide(this._directionToOrder(ni)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),lp+this._config.interval))}};this._swipeHelper=new di(this._element,r)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const r=Ap[t.key];r&&(t.preventDefault(),this._slide(this._directionToOrder(r)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const r=k.findOne(dc,this._indicatorsElement);r.classList.remove(qn),r.removeAttribute("aria-current");const n=k.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(qn),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const r=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=r||this._config.defaultInterval}_slide(t,r=null){if(this._isSliding)return;const n=this._getActive(),i=t===sn,s=r||fo(this._getItems(),n,i,this._config.wrap);if(s===n)return;const o=this._getItemIndex(s),a=v=>L.trigger(this._element,v,{relatedTarget:s,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:o});if(a(cp).defaultPrevented||!n||!s)return;const c=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=s;const h=i?yp:_p,f=i?gp:Ep;s.classList.add(f),_n(s),n.classList.add(h),s.classList.add(h);const u=()=>{s.classList.remove(h,f),s.classList.add(qn),n.classList.remove(qn,f,h),this._isSliding=!1,a(as)};this._queueCallback(u,n,this._isAnimated()),c&&this.cycle()}_isAnimated(){return this._element.classList.contains(mp)}_getActive(){return k.findOne(wp,this._element)}_getItems(){return k.find(pc,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return Ve()?t===xr?gr:sn:t===xr?sn:gr}_orderToDirection(t){return Ve()?t===gr?xr:ni:t===gr?ni:xr}static jQueryInterface(t){return this.each(function(){const r=gn.getOrCreateInstance(this,t);if(typeof t=="number"){r.to(t);return}if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t]()}})}}L.on(document,vp,xp,function(e){const t=k.getElementFromSelector(this);if(!t||!t.classList.contains(uc))return;e.preventDefault();const r=gn.getOrCreateInstance(t),n=this.getAttribute("data-bs-slide-to");if(n){r.to(n),r._maybeEnableCycle();return}if(mt.getDataAttribute(this,"slide")==="next"){r.next(),r._maybeEnableCycle();return}r.prev(),r._maybeEnableCycle()});L.on(window,pp,()=>{const e=k.find(Mp);for(const t of e)gn.getOrCreateInstance(t)});We(gn);const Lp="collapse",Op="bs.collapse",En=`.${Op}`,$p=".data-api",Pp=`show${En}`,Rp=`shown${En}`,Np=`hide${En}`,Ip=`hidden${En}`,Dp=`click${En}${$p}`,ls="show",Ar="collapse",Yn="collapsing",zp="collapsed",kp=`:scope .${Ar} .${Ar}`,Hp="collapse-horizontal",Fp="width",Vp="height",Bp=".collapse.show, .collapse.collapsing",Fs='[data-bs-toggle="collapse"]',Wp={parent:null,toggle:!0},Up={parent:"(null|element)",toggle:"boolean"};class fn extends Ye{constructor(t,r){super(t,r),this._isTransitioning=!1,this._triggerArray=[];const n=k.find(Fs);for(const i of n){const s=k.getSelectorFromElement(i),o=k.find(s).filter(a=>a===this._element);s!==null&&o.length&&this._triggerArray.push(i)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Wp}static get DefaultType(){return Up}static get NAME(){return Lp}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(Bp).filter(a=>a!==this._element).map(a=>fn.getOrCreateInstance(a,{toggle:!1}))),t.length&&t[0]._isTransitioning||L.trigger(this._element,Pp).defaultPrevented)return;for(const a of t)a.hide();const n=this._getDimension();this._element.classList.remove(Ar),this._element.classList.add(Yn),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(Yn),this._element.classList.add(Ar,ls),this._element.style[n]="",L.trigger(this._element,Rp)},o=`scroll${n[0].toUpperCase()+n.slice(1)}`;this._queueCallback(i,this._element,!0),this._element.style[n]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||L.trigger(this._element,Np).defaultPrevented)return;const r=this._getDimension();this._element.style[r]=`${this._element.getBoundingClientRect()[r]}px`,_n(this._element),this._element.classList.add(Yn),this._element.classList.remove(Ar,ls);for(const i of this._triggerArray){const s=k.getElementFromSelector(i);s&&!this._isShown(s)&&this._addAriaAndCollapsedClass([i],!1)}this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(Yn),this._element.classList.add(Ar),L.trigger(this._element,Ip)};this._element.style[r]="",this._queueCallback(n,this._element,!0)}_isShown(t=this._element){return t.classList.contains(ls)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=Nt(t.parent),t}_getDimension(){return this._element.classList.contains(Hp)?Fp:Vp}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(Fs);for(const r of t){const n=k.getElementFromSelector(r);n&&this._addAriaAndCollapsedClass([r],this._isShown(n))}}_getFirstLevelChildren(t){const r=k.find(kp,this._config.parent);return k.find(t,this._config.parent).filter(n=>!r.includes(n))}_addAriaAndCollapsedClass(t,r){if(t.length)for(const n of t)n.classList.toggle(zp,!r),n.setAttribute("aria-expanded",r)}static jQueryInterface(t){const r={};return typeof t=="string"&&/show|hide/.test(t)&&(r.toggle=!1),this.each(function(){const n=fn.getOrCreateInstance(this,r);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}L.on(document,Dp,Fs,function(e){(e.target.tagName==="A"||e.delegateTarget&&e.delegateTarget.tagName==="A")&&e.preventDefault();for(const t of k.getMultipleElementsFromSelector(this))fn.getOrCreateInstance(t,{toggle:!1}).toggle()});We(fn);const va="dropdown",jp="bs.dropdown",or=`.${jp}`,po=".data-api",qp="Escape",ma="Tab",Yp="ArrowUp",_a="ArrowDown",Xp=2,Gp=`hide${or}`,Kp=`hidden${or}`,Zp=`show${or}`,Qp=`shown${or}`,vc=`click${or}${po}`,mc=`keydown${or}${po}`,Jp=`keyup${or}${po}`,Mr="show",ev="dropup",tv="dropend",rv="dropstart",nv="dropup-center",iv="dropdown-center",Zt='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',sv=`${Zt}.${Mr}`,ii=".dropdown-menu",ov=".navbar",av=".navbar-nav",lv=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",cv=Ve()?"top-end":"top-start",hv=Ve()?"top-start":"top-end",fv=Ve()?"bottom-end":"bottom-start",uv=Ve()?"bottom-start":"bottom-end",dv=Ve()?"left-start":"right-start",pv=Ve()?"right-start":"left-start",vv="top",mv="bottom",_v={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},yv={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class rt extends Ye{constructor(t,r){super(t,r),this._popper=null,this._parent=this._element.parentNode,this._menu=k.next(this._element,ii)[0]||k.prev(this._element,ii)[0]||k.findOne(ii,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return _v}static get DefaultType(){return yv}static get NAME(){return va}toggle(){return this._isShown()?this.hide():this.show()}show(){if(It(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!L.trigger(this._element,Zp,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(av))for(const n of[].concat(...document.body.children))L.on(n,"mouseover",ui);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Mr),this._element.classList.add(Mr),L.trigger(this._element,Qp,t)}}hide(){if(It(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!L.trigger(this._element,Gp,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const n of[].concat(...document.body.children))L.off(n,"mouseover",ui);this._popper&&this._popper.destroy(),this._menu.classList.remove(Mr),this._element.classList.remove(Mr),this._element.setAttribute("aria-expanded","false"),mt.removeDataAttribute(this._menu,"popper"),L.trigger(this._element,Kp,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!vt(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${va.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof Ql>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:vt(this._config.reference)?t=Nt(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const r=this._getPopperConfig();this._popper=ho(t,this._menu,r)}_isShown(){return this._menu.classList.contains(Mr)}_getPlacement(){const t=this._parent;if(t.classList.contains(tv))return dv;if(t.classList.contains(rv))return pv;if(t.classList.contains(nv))return vv;if(t.classList.contains(iv))return mv;const r=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(ev)?r?hv:cv:r?uv:fv}_detectNavbar(){return this._element.closest(ov)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(r=>Number.parseInt(r,10)):typeof t=="function"?r=>t(r,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(mt.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Ae(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:r}){const n=k.find(lv,this._menu).filter(i=>kr(i));n.length&&fo(n,r,t===_a,!n.includes(r)).focus()}static jQueryInterface(t){return this.each(function(){const r=rt.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}static clearMenus(t){if(t.button===Xp||t.type==="keyup"&&t.key!==ma)return;const r=k.find(sv);for(const n of r){const i=rt.getInstance(n);if(!i||i._config.autoClose===!1)continue;const s=t.composedPath(),o=s.includes(i._menu);if(s.includes(i._element)||i._config.autoClose==="inside"&&!o||i._config.autoClose==="outside"&&o||i._menu.contains(t.target)&&(t.type==="keyup"&&t.key===ma||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const a={relatedTarget:i._element};t.type==="click"&&(a.clickEvent=t),i._completeHide(a)}}static dataApiKeydownHandler(t){const r=/input|textarea/i.test(t.target.tagName),n=t.key===qp,i=[Yp,_a].includes(t.key);if(!i&&!n||r&&!n)return;t.preventDefault();const s=this.matches(Zt)?this:k.prev(this,Zt)[0]||k.next(this,Zt)[0]||k.findOne(Zt,t.delegateTarget.parentNode),o=rt.getOrCreateInstance(s);if(i){t.stopPropagation(),o.show(),o._selectMenuItem(t);return}o._isShown()&&(t.stopPropagation(),o.hide(),s.focus())}}L.on(document,mc,Zt,rt.dataApiKeydownHandler);L.on(document,mc,ii,rt.dataApiKeydownHandler);L.on(document,vc,rt.clearMenus);L.on(document,Jp,rt.clearMenus);L.on(document,vc,Zt,function(e){e.preventDefault(),rt.getOrCreateInstance(this).toggle()});We(rt);const _c="backdrop",gv="fade",ya="show",ga=`mousedown.bs.${_c}`,Ev={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},wv={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class yc extends yn{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Ev}static get DefaultType(){return wv}static get NAME(){return _c}show(t){if(!this._config.isVisible){Ae(t);return}this._append();const r=this._getElement();this._config.isAnimated&&_n(r),r.classList.add(ya),this._emulateAnimation(()=>{Ae(t)})}hide(t){if(!this._config.isVisible){Ae(t);return}this._getElement().classList.remove(ya),this._emulateAnimation(()=>{this.dispose(),Ae(t)})}dispose(){this._isAppended&&(L.off(this._element,ga),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(gv),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=Nt(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),L.on(t,ga,()=>{Ae(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){nc(t,this._getElement(),this._config.isAnimated)}}const bv="focustrap",Tv="bs.focustrap",pi=`.${Tv}`,xv=`focusin${pi}`,Mv=`keydown.tab${pi}`,Av="Tab",Sv="forward",Ea="backward",Cv={autofocus:!0,trapElement:null},Lv={autofocus:"boolean",trapElement:"element"};class gc extends yn{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Cv}static get DefaultType(){return Lv}static get NAME(){return bv}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),L.off(document,pi),L.on(document,xv,t=>this._handleFocusin(t)),L.on(document,Mv,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,L.off(document,pi))}_handleFocusin(t){const{trapElement:r}=this._config;if(t.target===document||t.target===r||r.contains(t.target))return;const n=k.focusableChildren(r);n.length===0?r.focus():this._lastTabNavDirection===Ea?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){t.key===Av&&(this._lastTabNavDirection=t.shiftKey?Ea:Sv)}}const wa=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ba=".sticky-top",Xn="padding-right",Ta="margin-right";class Vs{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Xn,r=>r+t),this._setElementAttributes(wa,Xn,r=>r+t),this._setElementAttributes(ba,Ta,r=>r-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Xn),this._resetElementAttributes(wa,Xn),this._resetElementAttributes(ba,Ta)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,r,n){const i=this.getWidth(),s=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+i)return;this._saveInitialAttribute(o,r);const a=window.getComputedStyle(o).getPropertyValue(r);o.style.setProperty(r,`${n(Number.parseFloat(a))}px`)};this._applyManipulationCallback(t,s)}_saveInitialAttribute(t,r){const n=t.style.getPropertyValue(r);n&&mt.setDataAttribute(t,r,n)}_resetElementAttributes(t,r){const n=i=>{const s=mt.getDataAttribute(i,r);if(s===null){i.style.removeProperty(r);return}mt.removeDataAttribute(i,r),i.style.setProperty(r,s)};this._applyManipulationCallback(t,n)}_applyManipulationCallback(t,r){if(vt(t)){r(t);return}for(const n of k.find(t,this._element))r(n)}}const Ov="modal",$v="bs.modal",Be=`.${$v}`,Pv=".data-api",Rv="Escape",Nv=`hide${Be}`,Iv=`hidePrevented${Be}`,Ec=`hidden${Be}`,wc=`show${Be}`,Dv=`shown${Be}`,zv=`resize${Be}`,kv=`click.dismiss${Be}`,Hv=`mousedown.dismiss${Be}`,Fv=`keydown.dismiss${Be}`,Vv=`click${Be}${Pv}`,xa="modal-open",Bv="fade",Ma="show",cs="modal-static",Wv=".modal.show",Uv=".modal-dialog",jv=".modal-body",qv='[data-bs-toggle="modal"]',Yv={backdrop:!0,focus:!0,keyboard:!0},Xv={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Nr extends Ye{constructor(t,r){super(t,r),this._dialog=k.findOne(Uv,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Vs,this._addEventListeners()}static get Default(){return Yv}static get DefaultType(){return Xv}static get NAME(){return Ov}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||L.trigger(this._element,wc,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(xa),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||L.trigger(this._element,Nv).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Ma),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){L.off(window,Be),L.off(this._dialog,Be),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new yc({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new gc({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const r=k.findOne(jv,this._dialog);r&&(r.scrollTop=0),_n(this._element),this._element.classList.add(Ma);const n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,L.trigger(this._element,Dv,{relatedTarget:t})};this._queueCallback(n,this._dialog,this._isAnimated())}_addEventListeners(){L.on(this._element,Fv,t=>{if(t.key===Rv){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),L.on(window,zv,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),L.on(this._element,Hv,t=>{L.one(this._element,kv,r=>{if(!(this._element!==t.target||this._element!==r.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(xa),this._resetAdjustments(),this._scrollBar.reset(),L.trigger(this._element,Ec)})}_isAnimated(){return this._element.classList.contains(Bv)}_triggerBackdropTransition(){if(L.trigger(this._element,Iv).defaultPrevented)return;const r=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;n==="hidden"||this._element.classList.contains(cs)||(r||(this._element.style.overflowY="hidden"),this._element.classList.add(cs),this._queueCallback(()=>{this._element.classList.remove(cs),this._queueCallback(()=>{this._element.style.overflowY=n},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,r=this._scrollBar.getWidth(),n=r>0;if(n&&!t){const i=Ve()?"paddingLeft":"paddingRight";this._element.style[i]=`${r}px`}if(!n&&t){const i=Ve()?"paddingRight":"paddingLeft";this._element.style[i]=`${r}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,r){return this.each(function(){const n=Nr.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](r)}})}}L.on(document,Vv,qv,function(e){const t=k.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&e.preventDefault(),L.one(t,wc,i=>{i.defaultPrevented||L.one(t,Ec,()=>{kr(this)&&this.focus()})});const r=k.findOne(Wv);r&&Nr.getInstance(r).hide(),Nr.getOrCreateInstance(t).toggle(this)});Mi(Nr);We(Nr);const Gv="offcanvas",Kv="bs.offcanvas",wt=`.${Kv}`,bc=".data-api",Zv=`load${wt}${bc}`,Qv="Escape",Aa="show",Sa="showing",Ca="hiding",Jv="offcanvas-backdrop",Tc=".offcanvas.show",em=`show${wt}`,tm=`shown${wt}`,rm=`hide${wt}`,La=`hidePrevented${wt}`,xc=`hidden${wt}`,nm=`resize${wt}`,im=`click${wt}${bc}`,sm=`keydown.dismiss${wt}`,om='[data-bs-toggle="offcanvas"]',am={backdrop:!0,keyboard:!0,scroll:!1},lm={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Dt extends Ye{constructor(t,r){super(t,r),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return am}static get DefaultType(){return lm}static get NAME(){return Gv}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||L.trigger(this._element,em,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Vs().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Sa);const n=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Aa),this._element.classList.remove(Sa),L.trigger(this._element,tm,{relatedTarget:t})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown||L.trigger(this._element,rm).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Ca),this._backdrop.hide();const r=()=>{this._element.classList.remove(Aa,Ca),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Vs().reset(),L.trigger(this._element,xc)};this._queueCallback(r,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){L.trigger(this._element,La);return}this.hide()},r=!!this._config.backdrop;return new yc({className:Jv,isVisible:r,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:r?t:null})}_initializeFocusTrap(){return new gc({trapElement:this._element})}_addEventListeners(){L.on(this._element,sm,t=>{if(t.key===Qv){if(this._config.keyboard){this.hide();return}L.trigger(this._element,La)}})}static jQueryInterface(t){return this.each(function(){const r=Dt.getOrCreateInstance(this,t);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t](this)}})}}L.on(document,im,om,function(e){const t=k.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),It(this))return;L.one(t,xc,()=>{kr(this)&&this.focus()});const r=k.findOne(Tc);r&&r!==t&&Dt.getInstance(r).hide(),Dt.getOrCreateInstance(t).toggle(this)});L.on(window,Zv,()=>{for(const e of k.find(Tc))Dt.getOrCreateInstance(e).show()});L.on(window,nm,()=>{for(const e of k.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(e).position!=="fixed"&&Dt.getOrCreateInstance(e).hide()});Mi(Dt);We(Dt);const cm=/^aria-[\w-]*$/i,Mc={"*":["class","dir","id","lang","role",cm],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},hm=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),fm=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,um=(e,t)=>{const r=e.nodeName.toLowerCase();return t.includes(r)?hm.has(r)?!!fm.test(e.nodeValue):!0:t.filter(n=>n instanceof RegExp).some(n=>n.test(r))};function dm(e,t,r){if(!e.length)return e;if(r&&typeof r=="function")return r(e);const i=new window.DOMParser().parseFromString(e,"text/html"),s=[].concat(...i.body.querySelectorAll("*"));for(const o of s){const a=o.nodeName.toLowerCase();if(!Object.keys(t).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),c=[].concat(t["*"]||[],t[a]||[]);for(const h of l)um(h,c)||o.removeAttribute(h.nodeName)}return i.body.innerHTML}const pm="TemplateFactory",vm={allowList:Mc,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},mm={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},_m={entry:"(string|element|function|null)",selector:"(string|element)"};class ym extends yn{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return vm}static get DefaultType(){return mm}static get NAME(){return pm}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[i,s]of Object.entries(this._config.content))this._setContent(t,s,i);const r=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&r.classList.add(...n.split(" ")),r}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[r,n]of Object.entries(t))super._typeCheckConfig({selector:r,entry:n},_m)}_setContent(t,r,n){const i=k.findOne(n,t);if(i){if(r=this._resolvePossibleFunction(r),!r){i.remove();return}if(vt(r)){this._putElementInTemplate(Nt(r),i);return}if(this._config.html){i.innerHTML=this._maybeSanitize(r);return}i.textContent=r}}_maybeSanitize(t){return this._config.sanitize?dm(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Ae(t,[this])}_putElementInTemplate(t,r){if(this._config.html){r.innerHTML="",r.append(t);return}r.textContent=t.textContent}}const gm="tooltip",Em=new Set(["sanitize","allowList","sanitizeFn"]),hs="fade",wm="modal",Gn="show",bm=".tooltip-inner",Oa=`.${wm}`,$a="hide.bs.modal",on="hover",fs="focus",Tm="click",xm="manual",Mm="hide",Am="hidden",Sm="show",Cm="shown",Lm="inserted",Om="click",$m="focusin",Pm="focusout",Rm="mouseenter",Nm="mouseleave",Im={AUTO:"auto",TOP:"top",RIGHT:Ve()?"left":"right",BOTTOM:"bottom",LEFT:Ve()?"right":"left"},Dm={allowList:Mc,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},zm={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Fr extends Ye{constructor(t,r){if(typeof Ql>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,r),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Dm}static get DefaultType(){return zm}static get NAME(){return gm}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),L.off(this._element.closest(Oa),$a,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=L.trigger(this._element,this.constructor.eventName(Sm)),n=(tc(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!n)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:s}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(s.append(i),L.trigger(this._element,this.constructor.eventName(Lm))),this._popper=this._createPopper(i),i.classList.add(Gn),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))L.on(a,"mouseover",ui);const o=()=>{L.trigger(this._element,this.constructor.eventName(Cm)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||L.trigger(this._element,this.constructor.eventName(Mm)).defaultPrevented)return;if(this._getTipElement().classList.remove(Gn),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))L.off(i,"mouseover",ui);this._activeTrigger[Tm]=!1,this._activeTrigger[fs]=!1,this._activeTrigger[on]=!1,this._isHovered=null;const n=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),L.trigger(this._element,this.constructor.eventName(Am)))};this._queueCallback(n,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const r=this._getTemplateFactory(t).toHtml();if(!r)return null;r.classList.remove(hs,Gn),r.classList.add(`bs-${this.constructor.NAME}-auto`);const n=Td(this.constructor.NAME).toString();return r.setAttribute("id",n),this._isAnimated()&&r.classList.add(hs),r}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new ym({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[bm]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(hs)}_isShown(){return this.tip&&this.tip.classList.contains(Gn)}_createPopper(t){const r=Ae(this._config.placement,[this,t,this._element]),n=Im[r.toUpperCase()];return ho(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(r=>Number.parseInt(r,10)):typeof t=="function"?r=>t(r,this._element):t}_resolvePossibleFunction(t){return Ae(t,[this._element])}_getPopperConfig(t){const r={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:n=>{this._getTipElement().setAttribute("data-popper-placement",n.state.placement)}}]};return{...r,...Ae(this._config.popperConfig,[r])}}_setListeners(){const t=this._config.trigger.split(" ");for(const r of t)if(r==="click")L.on(this._element,this.constructor.eventName(Om),this._config.selector,n=>{this._initializeOnDelegatedTarget(n).toggle()});else if(r!==xm){const n=r===on?this.constructor.eventName(Rm):this.constructor.eventName($m),i=r===on?this.constructor.eventName(Nm):this.constructor.eventName(Pm);L.on(this._element,n,this._config.selector,s=>{const o=this._initializeOnDelegatedTarget(s);o._activeTrigger[s.type==="focusin"?fs:on]=!0,o._enter()}),L.on(this._element,i,this._config.selector,s=>{const o=this._initializeOnDelegatedTarget(s);o._activeTrigger[s.type==="focusout"?fs:on]=o._element.contains(s.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},L.on(this._element.closest(Oa),$a,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,r){clearTimeout(this._timeout),this._timeout=setTimeout(t,r)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const r=mt.getDataAttributes(this._element);for(const n of Object.keys(r))Em.has(n)&&delete r[n];return t={...r,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:Nt(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[r,n]of Object.entries(this._config))this.constructor.Default[r]!==n&&(t[r]=n);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const r=Fr.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}}We(Fr);const km="popover",Hm=".popover-header",Fm=".popover-body",Vm={...Fr.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Bm={...Fr.DefaultType,content:"(null|string|element|function)"};class vo extends Fr{static get Default(){return Vm}static get DefaultType(){return Bm}static get NAME(){return km}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Hm]:this._getTitle(),[Fm]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const r=vo.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t]()}})}}We(vo);const Wm="scrollspy",Um="bs.scrollspy",mo=`.${Um}`,jm=".data-api",qm=`activate${mo}`,Pa=`click${mo}`,Ym=`load${mo}${jm}`,Xm="dropdown-item",Er="active",Gm='[data-bs-spy="scroll"]',us="[href]",Km=".nav, .list-group",Ra=".nav-link",Zm=".nav-item",Qm=".list-group-item",Jm=`${Ra}, ${Zm} > ${Ra}, ${Qm}`,e_=".dropdown",t_=".dropdown-toggle",r_={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},n_={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Ci extends Ye{constructor(t,r){super(t,r),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return r_}static get DefaultType(){return n_}static get NAME(){return Wm}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=Nt(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(r=>Number.parseFloat(r))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(L.off(this._config.target,Pa),L.on(this._config.target,Pa,us,t=>{const r=this._observableSections.get(t.target.hash);if(r){t.preventDefault();const n=this._rootElement||window,i=r.offsetTop-this._element.offsetTop;if(n.scrollTo){n.scrollTo({top:i,behavior:"smooth"});return}n.scrollTop=i}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(r=>this._observerCallback(r),t)}_observerCallback(t){const r=o=>this._targetLinks.get(`#${o.target.id}`),n=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(r(o))},i=(this._rootElement||document.documentElement).scrollTop,s=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(r(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(s&&a){if(n(o),!i)return;continue}!s&&!a&&n(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=k.find(us,this._config.target);for(const r of t){if(!r.hash||It(r))continue;const n=k.findOne(decodeURI(r.hash),this._element);kr(n)&&(this._targetLinks.set(decodeURI(r.hash),r),this._observableSections.set(r.hash,n))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Er),this._activateParents(t),L.trigger(this._element,qm,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(Xm)){k.findOne(t_,t.closest(e_)).classList.add(Er);return}for(const r of k.parents(t,Km))for(const n of k.prev(r,Jm))n.classList.add(Er)}_clearActiveClass(t){t.classList.remove(Er);const r=k.find(`${us}.${Er}`,t);for(const n of r)n.classList.remove(Er)}static jQueryInterface(t){return this.each(function(){const r=Ci.getOrCreateInstance(this,t);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t]()}})}}L.on(window,Ym,()=>{for(const e of k.find(Gm))Ci.getOrCreateInstance(e)});We(Ci);const i_="tab",s_="bs.tab",ar=`.${s_}`,o_=`hide${ar}`,a_=`hidden${ar}`,l_=`show${ar}`,c_=`shown${ar}`,h_=`click${ar}`,f_=`keydown${ar}`,u_=`load${ar}`,d_="ArrowLeft",Na="ArrowRight",p_="ArrowUp",Ia="ArrowDown",ds="Home",Da="End",Qt="active",za="fade",ps="show",v_="dropdown",Ac=".dropdown-toggle",m_=".dropdown-menu",vs=`:not(${Ac})`,__='.list-group, .nav, [role="tablist"]',y_=".nav-item, .list-group-item",g_=`.nav-link${vs}, .list-group-item${vs}, [role="tab"]${vs}`,Sc='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ms=`${g_}, ${Sc}`,E_=`.${Qt}[data-bs-toggle="tab"], .${Qt}[data-bs-toggle="pill"], .${Qt}[data-bs-toggle="list"]`;class Ir extends Ye{constructor(t){super(t),this._parent=this._element.closest(__),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),L.on(this._element,f_,r=>this._keydown(r)))}static get NAME(){return i_}show(){const t=this._element;if(this._elemIsActive(t))return;const r=this._getActiveElem(),n=r?L.trigger(r,o_,{relatedTarget:t}):null;L.trigger(t,l_,{relatedTarget:r}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(r,t),this._activate(t,r))}_activate(t,r){if(!t)return;t.classList.add(Qt),this._activate(k.getElementFromSelector(t));const n=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(ps);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),L.trigger(t,c_,{relatedTarget:r})};this._queueCallback(n,t,t.classList.contains(za))}_deactivate(t,r){if(!t)return;t.classList.remove(Qt),t.blur(),this._deactivate(k.getElementFromSelector(t));const n=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(ps);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),L.trigger(t,a_,{relatedTarget:r})};this._queueCallback(n,t,t.classList.contains(za))}_keydown(t){if(![d_,Na,p_,Ia,ds,Da].includes(t.key))return;t.stopPropagation(),t.preventDefault();const r=this._getChildren().filter(i=>!It(i));let n;if([ds,Da].includes(t.key))n=r[t.key===ds?0:r.length-1];else{const i=[Na,Ia].includes(t.key);n=fo(r,t.target,i,!0)}n&&(n.focus({preventScroll:!0}),Ir.getOrCreateInstance(n).show())}_getChildren(){return k.find(ms,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,r){this._setAttributeIfNotExists(t,"role","tablist");for(const n of r)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const r=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",r),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),r||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const r=k.getElementFromSelector(t);r&&(this._setAttributeIfNotExists(r,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(r,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,r){const n=this._getOuterElement(t);if(!n.classList.contains(v_))return;const i=(s,o)=>{const a=k.findOne(s,n);a&&a.classList.toggle(o,r)};i(Ac,Qt),i(m_,ps),n.setAttribute("aria-expanded",r)}_setAttributeIfNotExists(t,r,n){t.hasAttribute(r)||t.setAttribute(r,n)}_elemIsActive(t){return t.classList.contains(Qt)}_getInnerElement(t){return t.matches(ms)?t:k.findOne(ms,t)}_getOuterElement(t){return t.closest(y_)||t}static jQueryInterface(t){return this.each(function(){const r=Ir.getOrCreateInstance(this);if(typeof t=="string"){if(r[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);r[t]()}})}}L.on(document,h_,Sc,function(e){["A","AREA"].includes(this.tagName)&&e.preventDefault(),!It(this)&&Ir.getOrCreateInstance(this).show()});L.on(window,u_,()=>{for(const e of k.find(E_))Ir.getOrCreateInstance(e)});We(Ir);const w_="toast",b_="bs.toast",Ft=`.${b_}`,T_=`mouseover${Ft}`,x_=`mouseout${Ft}`,M_=`focusin${Ft}`,A_=`focusout${Ft}`,S_=`hide${Ft}`,C_=`hidden${Ft}`,L_=`show${Ft}`,O_=`shown${Ft}`,$_="fade",ka="hide",Kn="show",Zn="showing",P_={animation:"boolean",autohide:"boolean",delay:"number"},R_={animation:!0,autohide:!0,delay:5e3};class Li extends Ye{constructor(t,r){super(t,r),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return R_}static get DefaultType(){return P_}static get NAME(){return w_}show(){if(L.trigger(this._element,L_).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add($_);const r=()=>{this._element.classList.remove(Zn),L.trigger(this._element,O_),this._maybeScheduleHide()};this._element.classList.remove(ka),_n(this._element),this._element.classList.add(Kn,Zn),this._queueCallback(r,this._element,this._config.animation)}hide(){if(!this.isShown()||L.trigger(this._element,S_).defaultPrevented)return;const r=()=>{this._element.classList.add(ka),this._element.classList.remove(Zn,Kn),L.trigger(this._element,C_)};this._element.classList.add(Zn),this._queueCallback(r,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Kn),super.dispose()}isShown(){return this._element.classList.contains(Kn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,r){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=r;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=r;break}}if(r){this._clearTimeout();return}const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){L.on(this._element,T_,t=>this._onInteraction(t,!0)),L.on(this._element,x_,t=>this._onInteraction(t,!1)),L.on(this._element,M_,t=>this._onInteraction(t,!0)),L.on(this._element,A_,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const r=Li.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof r[t]>"u")throw new TypeError(`No method named "${t}"`);r[t](this)}})}}Mi(Li);We(Li);function Cc(e,t){return function(){return e.apply(t,arguments)}}const{toString:N_}=Object.prototype,{getPrototypeOf:_o}=Object,{iterator:Oi,toStringTag:Lc}=Symbol,$i=(e=>t=>{const r=N_.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Xe=e=>(e=e.toLowerCase(),t=>$i(t)===e),Pi=e=>t=>typeof t===e,{isArray:Vr}=Array,Dr=Pi("undefined");function wn(e){return e!==null&&!Dr(e)&&e.constructor!==null&&!Dr(e.constructor)&&Se(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Oc=Xe("ArrayBuffer");function I_(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Oc(e.buffer),t}const D_=Pi("string"),Se=Pi("function"),$c=Pi("number"),bn=e=>e!==null&&typeof e=="object",z_=e=>e===!0||e===!1,si=e=>{if($i(e)!=="object")return!1;const t=_o(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Lc in e)&&!(Oi in e)},k_=e=>{if(!bn(e)||wn(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},H_=Xe("Date"),F_=Xe("File"),V_=Xe("Blob"),B_=Xe("FileList"),W_=e=>bn(e)&&Se(e.pipe),U_=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Se(e.append)&&((t=$i(e))==="formdata"||t==="object"&&Se(e.toString)&&e.toString()==="[object FormData]"))},j_=Xe("URLSearchParams"),[q_,Y_,X_,G_]=["ReadableStream","Request","Response","Headers"].map(Xe),K_=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Tn(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),Vr(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{if(wn(e))return;const s=r?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let a;for(n=0;n<o;n++)a=s[n],t.call(null,e[a],a,e)}}function Pc(e,t){if(wn(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const Jt=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Rc=e=>!Dr(e)&&e!==Jt;function Bs(){const{caseless:e,skipUndefined:t}=Rc(this)&&this||{},r={},n=(i,s)=>{const o=e&&Pc(r,s)||s;si(r[o])&&si(i)?r[o]=Bs(r[o],i):si(i)?r[o]=Bs({},i):Vr(i)?r[o]=i.slice():(!t||!Dr(i))&&(r[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Tn(arguments[i],n);return r}const Z_=(e,t,r,{allOwnKeys:n}={})=>(Tn(t,(i,s)=>{r&&Se(i)?e[s]=Cc(i,r):e[s]=i},{allOwnKeys:n}),e),Q_=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),J_=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},ey=(e,t,r,n)=>{let i,s,o;const a={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],(!n||n(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=r!==!1&&_o(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},ty=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},ry=e=>{if(!e)return null;if(Vr(e))return e;let t=e.length;if(!$c(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},ny=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&_o(Uint8Array)),iy=(e,t)=>{const n=(e&&e[Oi]).call(e);let i;for(;(i=n.next())&&!i.done;){const s=i.value;t.call(e,s[0],s[1])}},sy=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},oy=Xe("HTMLFormElement"),ay=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),Ha=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),ly=Xe("RegExp"),Nc=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Tn(r,(i,s)=>{let o;(o=t(i,s,e))!==!1&&(n[s]=o||i)}),Object.defineProperties(e,n)},cy=e=>{Nc(e,(t,r)=>{if(Se(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Se(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},hy=(e,t)=>{const r={},n=i=>{i.forEach(s=>{r[s]=!0})};return Vr(e)?n(e):n(String(e).split(t)),r},fy=()=>{},uy=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function dy(e){return!!(e&&Se(e.append)&&e[Lc]==="FormData"&&e[Oi])}const py=e=>{const t=new Array(10),r=(n,i)=>{if(bn(n)){if(t.indexOf(n)>=0)return;if(wn(n))return n;if(!("toJSON"in n)){t[i]=n;const s=Vr(n)?[]:{};return Tn(n,(o,a)=>{const l=r(o,i+1);!Dr(l)&&(s[a]=l)}),t[i]=void 0,s}}return n};return r(e,0)},vy=Xe("AsyncFunction"),my=e=>e&&(bn(e)||Se(e))&&Se(e.then)&&Se(e.catch),Ic=((e,t)=>e?setImmediate:t?((r,n)=>(Jt.addEventListener("message",({source:i,data:s})=>{i===Jt&&s===r&&n.length&&n.shift()()},!1),i=>{n.push(i),Jt.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Se(Jt.postMessage)),_y=typeof queueMicrotask<"u"?queueMicrotask.bind(Jt):typeof process<"u"&&process.nextTick||Ic,yy=e=>e!=null&&Se(e[Oi]),b={isArray:Vr,isArrayBuffer:Oc,isBuffer:wn,isFormData:U_,isArrayBufferView:I_,isString:D_,isNumber:$c,isBoolean:z_,isObject:bn,isPlainObject:si,isEmptyObject:k_,isReadableStream:q_,isRequest:Y_,isResponse:X_,isHeaders:G_,isUndefined:Dr,isDate:H_,isFile:F_,isBlob:V_,isRegExp:ly,isFunction:Se,isStream:W_,isURLSearchParams:j_,isTypedArray:ny,isFileList:B_,forEach:Tn,merge:Bs,extend:Z_,trim:K_,stripBOM:Q_,inherits:J_,toFlatObject:ey,kindOf:$i,kindOfTest:Xe,endsWith:ty,toArray:ry,forEachEntry:iy,matchAll:sy,isHTMLForm:oy,hasOwnProperty:Ha,hasOwnProp:Ha,reduceDescriptors:Nc,freezeMethods:cy,toObjectSet:hy,toCamelCase:ay,noop:fy,toFiniteNumber:uy,findKey:Pc,global:Jt,isContextDefined:Rc,isSpecCompliantForm:dy,toJSONObject:py,isAsyncFn:vy,isThenable:my,setImmediate:Ic,asap:_y,isIterable:yy};function W(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}b.inherits(W,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:b.toJSONObject(this.config),code:this.code,status:this.status}}});const Dc=W.prototype,zc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{zc[e]={value:e}});Object.defineProperties(W,zc);Object.defineProperty(Dc,"isAxiosError",{value:!0});W.from=(e,t,r,n,i,s)=>{const o=Object.create(Dc);b.toFlatObject(e,o,function(h){return h!==Error.prototype},c=>c!=="isAxiosError");const a=e&&e.message?e.message:"Error",l=t==null&&e?e.code:t;return W.call(o,a,l,r,n,i),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",s&&Object.assign(o,s),o};const gy=null;function Ws(e){return b.isPlainObject(e)||b.isArray(e)}function kc(e){return b.endsWith(e,"[]")?e.slice(0,-2):e}function Fa(e,t,r){return e?e.concat(t).map(function(i,s){return i=kc(i),!r&&s?"["+i+"]":i}).join(r?".":""):t}function Ey(e){return b.isArray(e)&&!e.some(Ws)}const wy=b.toFlatObject(b,{},null,function(t){return/^is[A-Z]/.test(t)});function Ri(e,t,r){if(!b.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=b.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,m){return!b.isUndefined(m[y])});const n=r.metaTokens,i=r.visitor||h,s=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&b.isSpecCompliantForm(t);if(!b.isFunction(i))throw new TypeError("visitor must be a function");function c(d){if(d===null)return"";if(b.isDate(d))return d.toISOString();if(b.isBoolean(d))return d.toString();if(!l&&b.isBlob(d))throw new W("Blob is not supported. Use a Buffer instead.");return b.isArrayBuffer(d)||b.isTypedArray(d)?l&&typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function h(d,y,m){let E=d;if(d&&!m&&typeof d=="object"){if(b.endsWith(y,"{}"))y=n?y:y.slice(0,-2),d=JSON.stringify(d);else if(b.isArray(d)&&Ey(d)||(b.isFileList(d)||b.endsWith(y,"[]"))&&(E=b.toArray(d)))return y=kc(y),E.forEach(function(x,A){!(b.isUndefined(x)||x===null)&&t.append(o===!0?Fa([y],A,s):o===null?y:y+"[]",c(x))}),!1}return Ws(d)?!0:(t.append(Fa(m,y,s),c(d)),!1)}const f=[],u=Object.assign(wy,{defaultVisitor:h,convertValue:c,isVisitable:Ws});function v(d,y){if(!b.isUndefined(d)){if(f.indexOf(d)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(d),b.forEach(d,function(E,T){(!(b.isUndefined(E)||E===null)&&i.call(t,E,b.isString(T)?T.trim():T,y,u))===!0&&v(E,y?y.concat(T):[T])}),f.pop()}}if(!b.isObject(e))throw new TypeError("data must be an object");return v(e),t}function Va(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function yo(e,t){this._pairs=[],e&&Ri(e,this,t)}const Hc=yo.prototype;Hc.append=function(t,r){this._pairs.push([t,r])};Hc.toString=function(t){const r=t?function(n){return t.call(this,n,Va)}:Va;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function by(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Fc(e,t,r){if(!t)return e;const n=r&&r.encode||by;b.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let s;if(i?s=i(t,r):s=b.isURLSearchParams(t)?t.toString():new yo(t,r).toString(n),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class Ty{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){b.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Ba=Ty,Vc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},xy=typeof URLSearchParams<"u"?URLSearchParams:yo,My=typeof FormData<"u"?FormData:null,Ay=typeof Blob<"u"?Blob:null,Sy={isBrowser:!0,classes:{URLSearchParams:xy,FormData:My,Blob:Ay},protocols:["http","https","file","blob","url","data"]},go=typeof window<"u"&&typeof document<"u",Us=typeof navigator=="object"&&navigator||void 0,Cy=go&&(!Us||["ReactNative","NativeScript","NS"].indexOf(Us.product)<0),Ly=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Oy=go&&window.location.href||"http://localhost",$y=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:go,hasStandardBrowserEnv:Cy,hasStandardBrowserWebWorkerEnv:Ly,navigator:Us,origin:Oy},Symbol.toStringTag,{value:"Module"})),ge={...$y,...Sy};function Py(e,t){return Ri(e,new ge.classes.URLSearchParams,{visitor:function(r,n,i,s){return ge.isNode&&b.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...t})}function Ry(e){return b.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Ny(e){const t={},r=Object.keys(e);let n;const i=r.length;let s;for(n=0;n<i;n++)s=r[n],t[s]=e[s];return t}function Bc(e){function t(r,n,i,s){let o=r[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=r.length;return o=!o&&b.isArray(i)?i.length:o,l?(b.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!b.isObject(i[o]))&&(i[o]=[]),t(r,n,i[o],s)&&b.isArray(i[o])&&(i[o]=Ny(i[o])),!a)}if(b.isFormData(e)&&b.isFunction(e.entries)){const r={};return b.forEachEntry(e,(n,i)=>{t(Ry(n),i,r,0)}),r}return null}function Iy(e,t,r){if(b.isString(e))try{return(t||JSON.parse)(e),b.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Eo={transitional:Vc,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,s=b.isObject(t);if(s&&b.isHTMLForm(t)&&(t=new FormData(t)),b.isFormData(t))return i?JSON.stringify(Bc(t)):t;if(b.isArrayBuffer(t)||b.isBuffer(t)||b.isStream(t)||b.isFile(t)||b.isBlob(t)||b.isReadableStream(t))return t;if(b.isArrayBufferView(t))return t.buffer;if(b.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Py(t,this.formSerializer).toString();if((a=b.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ri(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||i?(r.setContentType("application/json",!1),Iy(t)):t}],transformResponse:[function(t){const r=this.transitional||Eo.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(b.isResponse(t)||b.isReadableStream(t))return t;if(t&&b.isString(t)&&(n&&!this.responseType||i)){const o=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?W.from(a,W.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ge.classes.FormData,Blob:ge.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};b.forEach(["delete","get","head","post","put","patch"],e=>{Eo.headers[e]={}});const wo=Eo,Dy=b.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),zy=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),r=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!r||t[r]&&Dy[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Wa=Symbol("internals");function an(e){return e&&String(e).trim().toLowerCase()}function oi(e){return e===!1||e==null?e:b.isArray(e)?e.map(oi):String(e)}function ky(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const Hy=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function _s(e,t,r,n,i){if(b.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!b.isString(t)){if(b.isString(n))return t.indexOf(n)!==-1;if(b.isRegExp(n))return n.test(t)}}function Fy(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function Vy(e,t){const r=b.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,s,o){return this[n].call(this,t,i,s,o)},configurable:!0})})}class Ni{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function s(a,l,c){const h=an(l);if(!h)throw new Error("header name must be a non-empty string");const f=b.findKey(i,h);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||l]=oi(a))}const o=(a,l)=>b.forEach(a,(c,h)=>s(c,h,l));if(b.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(b.isString(t)&&(t=t.trim())&&!Hy(t))o(zy(t),r);else if(b.isObject(t)&&b.isIterable(t)){let a={},l,c;for(const h of t){if(!b.isArray(h))throw TypeError("Object iterator must return a key-value pair");a[c=h[0]]=(l=a[c])?b.isArray(l)?[...l,h[1]]:[l,h[1]]:h[1]}o(a,r)}else t!=null&&s(r,t,n);return this}get(t,r){if(t=an(t),t){const n=b.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return ky(i);if(b.isFunction(r))return r.call(this,i,n);if(b.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=an(t),t){const n=b.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||_s(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function s(o){if(o=an(o),o){const a=b.findKey(n,o);a&&(!r||_s(n,n[a],a,r))&&(delete n[a],i=!0)}}return b.isArray(t)?t.forEach(s):s(t),i}clear(t){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const s=r[n];(!t||_s(this,this[s],s,t,!0))&&(delete this[s],i=!0)}return i}normalize(t){const r=this,n={};return b.forEach(this,(i,s)=>{const o=b.findKey(n,s);if(o){r[o]=oi(i),delete r[s];return}const a=t?Fy(s):String(s).trim();a!==s&&delete r[s],r[a]=oi(i),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return b.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&b.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[Wa]=this[Wa]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=an(o);n[a]||(Vy(i,o),n[a]=!0)}return b.isArray(t)?t.forEach(s):s(t),this}}Ni.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);b.reduceDescriptors(Ni.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});b.freezeMethods(Ni);const qe=Ni;function ys(e,t){const r=this||wo,n=t||r,i=qe.from(n.headers);let s=n.data;return b.forEach(e,function(a){s=a.call(r,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function Wc(e){return!!(e&&e.__CANCEL__)}function Br(e,t,r){W.call(this,e??"canceled",W.ERR_CANCELED,t,r),this.name="CanceledError"}b.inherits(Br,W,{__CANCEL__:!0});function Uc(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new W("Request failed with status code "+r.status,[W.ERR_BAD_REQUEST,W.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function By(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Wy(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,s=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),h=n[s];o||(o=c),r[i]=l,n[i]=c;let f=s,u=0;for(;f!==i;)u+=r[f++],f=f%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),c-o<t)return;const v=h&&c-h;return v?Math.round(u*1e3/v):void 0}}function Uy(e,t){let r=0,n=1e3/t,i,s;const o=(c,h=Date.now())=>{r=h,i=null,s&&(clearTimeout(s),s=null),e(...c)};return[(...c)=>{const h=Date.now(),f=h-r;f>=n?o(c,h):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},n-f)))},()=>i&&o(i)]}const vi=(e,t,r=3)=>{let n=0;const i=Wy(50,250);return Uy(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-n,c=i(l),h=o<=a;n=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&h?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(f)},r)},Ua=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},ja=e=>(...t)=>b.asap(()=>e(...t)),jy=ge.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,ge.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(ge.origin),ge.navigator&&/(msie|trident)/i.test(ge.navigator.userAgent)):()=>!0,qy=ge.hasStandardBrowserEnv?{write(e,t,r,n,i,s){const o=[e+"="+encodeURIComponent(t)];b.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),b.isString(n)&&o.push("path="+n),b.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Yy(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Xy(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function jc(e,t,r){let n=!Yy(t);return e&&(n||r==!1)?Xy(e,t):t}const qa=e=>e instanceof qe?{...e}:e;function nr(e,t){t=t||{};const r={};function n(c,h,f,u){return b.isPlainObject(c)&&b.isPlainObject(h)?b.merge.call({caseless:u},c,h):b.isPlainObject(h)?b.merge({},h):b.isArray(h)?h.slice():h}function i(c,h,f,u){if(b.isUndefined(h)){if(!b.isUndefined(c))return n(void 0,c,f,u)}else return n(c,h,f,u)}function s(c,h){if(!b.isUndefined(h))return n(void 0,h)}function o(c,h){if(b.isUndefined(h)){if(!b.isUndefined(c))return n(void 0,c)}else return n(void 0,h)}function a(c,h,f){if(f in t)return n(c,h);if(f in e)return n(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,h,f)=>i(qa(c),qa(h),f,!0)};return b.forEach(Object.keys({...e,...t}),function(h){const f=l[h]||i,u=f(e[h],t[h],h);b.isUndefined(u)&&f!==a||(r[h]=u)}),r}const qc=e=>{const t=nr({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=t;if(t.headers=o=qe.from(o),t.url=Fc(jc(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),b.isFormData(r)){if(ge.hasStandardBrowserEnv||ge.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(b.isFunction(r.getHeaders)){const l=r.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([h,f])=>{c.includes(h.toLowerCase())&&o.set(h,f)})}}if(ge.hasStandardBrowserEnv&&(n&&b.isFunction(n)&&(n=n(t)),n||n!==!1&&jy(t.url))){const l=i&&s&&qy.read(s);l&&o.set(i,l)}return t},Gy=typeof XMLHttpRequest<"u",Ky=Gy&&function(e){return new Promise(function(r,n){const i=qc(e);let s=i.data;const o=qe.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,h,f,u,v,d;function y(){v&&v(),d&&d(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let m=new XMLHttpRequest;m.open(i.method.toUpperCase(),i.url,!0),m.timeout=i.timeout;function E(){if(!m)return;const x=qe.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),C={data:!a||a==="text"||a==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:x,config:e,request:m};Uc(function($){r($),y()},function($){n($),y()},C),m=null}"onloadend"in m?m.onloadend=E:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(E)},m.onabort=function(){m&&(n(new W("Request aborted",W.ECONNABORTED,e,m)),m=null)},m.onerror=function(A){const C=A&&A.message?A.message:"Network Error",S=new W(C,W.ERR_NETWORK,e,m);S.event=A||null,n(S),m=null},m.ontimeout=function(){let A=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const C=i.transitional||Vc;i.timeoutErrorMessage&&(A=i.timeoutErrorMessage),n(new W(A,C.clarifyTimeoutError?W.ETIMEDOUT:W.ECONNABORTED,e,m)),m=null},s===void 0&&o.setContentType(null),"setRequestHeader"in m&&b.forEach(o.toJSON(),function(A,C){m.setRequestHeader(C,A)}),b.isUndefined(i.withCredentials)||(m.withCredentials=!!i.withCredentials),a&&a!=="json"&&(m.responseType=i.responseType),c&&([u,d]=vi(c,!0),m.addEventListener("progress",u)),l&&m.upload&&([f,v]=vi(l),m.upload.addEventListener("progress",f),m.upload.addEventListener("loadend",v)),(i.cancelToken||i.signal)&&(h=x=>{m&&(n(!x||x.type?new Br(null,e,m):x),m.abort(),m=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const T=By(i.url);if(T&&ge.protocols.indexOf(T)===-1){n(new W("Unsupported protocol "+T+":",W.ERR_BAD_REQUEST,e));return}m.send(s||null)})},Zy=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,i;const s=function(c){if(!i){i=!0,a();const h=c instanceof Error?c:this.reason;n.abort(h instanceof W?h:new Br(h instanceof Error?h.message:h))}};let o=t&&setTimeout(()=>{o=null,s(new W(`timeout ${t} of ms exceeded`,W.ETIMEDOUT))},t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),e=null)};e.forEach(c=>c.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>b.asap(a),l}},Qy=Zy,Jy=function*(e,t){let r=e.byteLength;if(!t||r<t){yield e;return}let n=0,i;for(;n<r;)i=n+t,yield e.slice(n,i),n=i},eg=async function*(e,t){for await(const r of tg(e))yield*Jy(r,t)},tg=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},Ya=(e,t,r,n)=>{const i=eg(e,t);let s=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:h}=await i.next();if(c){a(),l.close();return}let f=h.byteLength;if(r){let u=s+=f;r(u)}l.enqueue(new Uint8Array(h))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},Xa=64*1024,{isFunction:Qn}=b,rg=(({Request:e,Response:t})=>({Request:e,Response:t}))(b.global),{ReadableStream:Ga,TextEncoder:Ka}=b.global,Za=(e,...t)=>{try{return!!e(...t)}catch{return!1}},ng=e=>{e=b.merge.call({skipUndefined:!0},rg,e);const{fetch:t,Request:r,Response:n}=e,i=t?Qn(t):typeof fetch=="function",s=Qn(r),o=Qn(n);if(!i)return!1;const a=i&&Qn(Ga),l=i&&(typeof Ka=="function"?(d=>y=>d.encode(y))(new Ka):async d=>new Uint8Array(await new r(d).arrayBuffer())),c=s&&a&&Za(()=>{let d=!1;const y=new r(ge.origin,{body:new Ga,method:"POST",get duplex(){return d=!0,"half"}}).headers.has("Content-Type");return d&&!y}),h=o&&a&&Za(()=>b.isReadableStream(new n("").body)),f={stream:h&&(d=>d.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(d=>{!f[d]&&(f[d]=(y,m)=>{let E=y&&y[d];if(E)return E.call(y);throw new W(`Response type '${d}' is not supported`,W.ERR_NOT_SUPPORT,m)})});const u=async d=>{if(d==null)return 0;if(b.isBlob(d))return d.size;if(b.isSpecCompliantForm(d))return(await new r(ge.origin,{method:"POST",body:d}).arrayBuffer()).byteLength;if(b.isArrayBufferView(d)||b.isArrayBuffer(d))return d.byteLength;if(b.isURLSearchParams(d)&&(d=d+""),b.isString(d))return(await l(d)).byteLength},v=async(d,y)=>{const m=b.toFiniteNumber(d.getContentLength());return m??u(y)};return async d=>{let{url:y,method:m,data:E,signal:T,cancelToken:x,timeout:A,onDownloadProgress:C,onUploadProgress:S,responseType:$,headers:z,withCredentials:I="same-origin",fetchOptions:D}=qc(d),P=t||fetch;$=$?($+"").toLowerCase():"text";let H=Qy([T,x&&x.toAbortSignal()],A),F=null;const R=H&&H.unsubscribe&&(()=>{H.unsubscribe()});let w;try{if(S&&c&&m!=="get"&&m!=="head"&&(w=await v(z,E))!==0){let xe=new r(y,{method:"POST",body:E,duplex:"half"}),_e;if(b.isFormData(E)&&(_e=xe.headers.get("content-type"))&&z.setContentType(_e),xe.body){const[Ke,Le]=Ua(w,vi(ja(S)));E=Ya(xe.body,Xa,Ke,Le)}}b.isString(I)||(I=I?"include":"omit");const Y=s&&"credentials"in r.prototype,U={...D,signal:H,method:m.toUpperCase(),headers:z.normalize().toJSON(),body:E,duplex:"half",credentials:Y?I:void 0};F=s&&new r(y,U);let se=await(s?P(F,D):P(y,U));const oe=h&&($==="stream"||$==="response");if(h&&(C||oe&&R)){const xe={};["status","statusText","headers"].forEach(J=>{xe[J]=se[J]});const _e=b.toFiniteNumber(se.headers.get("content-length")),[Ke,Le]=C&&Ua(_e,vi(ja(C),!0))||[];se=new n(Ya(se.body,Xa,Ke,()=>{Le&&Le(),R&&R()}),xe)}$=$||"text";let ae=await f[b.findKey(f,$)||"text"](se,d);return!oe&&R&&R(),await new Promise((xe,_e)=>{Uc(xe,_e,{data:ae,headers:qe.from(se.headers),status:se.status,statusText:se.statusText,config:d,request:F})})}catch(Y){throw R&&R(),Y&&Y.name==="TypeError"&&/Load failed|fetch/i.test(Y.message)?Object.assign(new W("Network Error",W.ERR_NETWORK,d,F),{cause:Y.cause||Y}):W.from(Y,Y&&Y.code,d,F)}}},ig=new Map,Yc=e=>{let t=e?e.env:{};const{fetch:r,Request:n,Response:i}=t,s=[n,i,r];let o=s.length,a=o,l,c,h=ig;for(;a--;)l=s[a],c=h.get(l),c===void 0&&h.set(l,c=a?new Map:ng(t)),h=c;return c};Yc();const js={http:gy,xhr:Ky,fetch:{get:Yc}};b.forEach(js,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Qa=e=>`- ${e}`,sg=e=>b.isFunction(e)||e===null||e===!1,Xc={getAdapter:(e,t)=>{e=b.isArray(e)?e:[e];const{length:r}=e;let n,i;const s={};for(let o=0;o<r;o++){n=e[o];let a;if(i=n,!sg(n)&&(i=js[(a=String(n)).toLowerCase()],i===void 0))throw new W(`Unknown adapter '${a}'`);if(i&&(b.isFunction(i)||(i=i.get(t))))break;s[a||"#"+o]=i}if(!i){const o=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=r?o.length>1?`since :
`+o.map(Qa).join(`
`):" "+Qa(o[0]):"as no adapter specified";throw new W("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:js};function gs(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Br(null,e)}function Ja(e){return gs(e),e.headers=qe.from(e.headers),e.data=ys.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Xc.getAdapter(e.adapter||wo.adapter,e)(e).then(function(n){return gs(e),n.data=ys.call(e,e.transformResponse,n),n.headers=qe.from(n.headers),n},function(n){return Wc(n)||(gs(e),n&&n.response&&(n.response.data=ys.call(e,e.transformResponse,n.response),n.response.headers=qe.from(n.response.headers))),Promise.reject(n)})}const Gc="1.12.2",Ii={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ii[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const el={};Ii.transitional=function(t,r,n){function i(s,o){return"[Axios v"+Gc+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(t===!1)throw new W(i(o," has been removed"+(r?" in "+r:"")),W.ERR_DEPRECATED);return r&&!el[o]&&(el[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(s,o,a):!0}};Ii.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function og(e,t,r){if(typeof e!="object")throw new W("options must be an object",W.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const s=n[i],o=t[s];if(o){const a=e[s],l=a===void 0||o(a,s,e);if(l!==!0)throw new W("option "+s+" must be "+l,W.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new W("Unknown option "+s,W.ERR_BAD_OPTION)}}const ai={assertOptions:og,validators:Ii},Je=ai.validators;class mi{constructor(t){this.defaults=t||{},this.interceptors={request:new Ba,response:new Ba}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=nr(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:s}=r;n!==void 0&&ai.assertOptions(n,{silentJSONParsing:Je.transitional(Je.boolean),forcedJSONParsing:Je.transitional(Je.boolean),clarifyTimeoutError:Je.transitional(Je.boolean)},!1),i!=null&&(b.isFunction(i)?r.paramsSerializer={serialize:i}:ai.assertOptions(i,{encode:Je.function,serialize:Je.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ai.assertOptions(r,{baseUrl:Je.spelling("baseURL"),withXsrfToken:Je.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=s&&b.merge(s.common,s[r.method]);s&&b.forEach(["delete","get","head","post","put","patch","common"],d=>{delete s[d]}),r.headers=qe.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let h,f=0,u;if(!l){const d=[Ja.bind(this),void 0];for(d.unshift(...a),d.push(...c),u=d.length,h=Promise.resolve(r);f<u;)h=h.then(d[f++],d[f++]);return h}u=a.length;let v=r;for(;f<u;){const d=a[f++],y=a[f++];try{v=d(v)}catch(m){y.call(this,m);break}}try{h=Ja.call(this,v)}catch(d){return Promise.reject(d)}for(f=0,u=c.length;f<u;)h=h.then(c[f++],c[f++]);return h}getUri(t){t=nr(this.defaults,t);const r=jc(t.baseURL,t.url,t.allowAbsoluteUrls);return Fc(r,t.params,t.paramsSerializer)}}b.forEach(["delete","get","head","options"],function(t){mi.prototype[t]=function(r,n){return this.request(nr(n||{},{method:t,url:r,data:(n||{}).data}))}});b.forEach(["post","put","patch"],function(t){function r(n){return function(s,o,a){return this.request(nr(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}mi.prototype[t]=r(),mi.prototype[t+"Form"]=r(!0)});const li=mi;class bo{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(i);return o.cancel=function(){n.unsubscribe(s)},o},t(function(s,o,a){n.reason||(n.reason=new Br(s,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new bo(function(i){t=i}),cancel:t}}}const ag=bo;function lg(e){return function(r){return e.apply(null,r)}}function cg(e){return b.isObject(e)&&e.isAxiosError===!0}const qs={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(qs).forEach(([e,t])=>{qs[t]=e});const hg=qs;function Kc(e){const t=new li(e),r=Cc(li.prototype.request,t);return b.extend(r,li.prototype,t,{allOwnKeys:!0}),b.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return Kc(nr(e,i))},r}const le=Kc(wo);le.Axios=li;le.CanceledError=Br;le.CancelToken=ag;le.isCancel=Wc;le.VERSION=Gc;le.toFormData=Ri;le.AxiosError=W;le.Cancel=le.CanceledError;le.all=function(t){return Promise.all(t)};le.spread=lg;le.isAxiosError=cg;le.mergeConfig=nr;le.AxiosHeaders=qe;le.formToJSON=e=>Bc(b.isHTMLForm(e)?new FormData(e):e);le.getAdapter=Xc.getAdapter;le.HttpStatusCode=hg;le.default=le;const fg=le;window.axios=fg;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var Ys=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ug(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function dg(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}function Cr(){}Cr.prototype.addEventListener=function(e,t){var r=this.__events=this.__events||{},n=r[e]=r[e]||[];n.indexOf(t)<0&&n.push(t)};Cr.prototype.removeEventListener=function(e,t){var r=this.__events=this.__events||{},n=r[e];if(n){var i=n.indexOf(t);i>=0&&n.splice(i,1)}};Cr.prototype.emit=function(e,t){var r=this.__events=this.__events||{},n=r[e],i=Array.prototype.slice.call(arguments,1);if(n)for(var s=0;s<n.length;s++){var o=n[s];o.apply(this,i)}};function pg(e){for(var t in Cr.prototype)Cr.prototype.hasOwnProperty(t)&&(e.prototype[t]=Cr.prototype[t])}var re=pg;function vg(){return typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return Date.now()}}var lr=vg(),Zc=lr;function mg(e,t){this.fn=e,this.cb=t,this.cfn=null}function bt(e){this._queue=[],this._delay=e&&e.delay||0,this._paused=e&&!!e.paused||!1,this._currentTask=null,this._lastFinished=null}bt.prototype.length=function(){return this._queue.length};bt.prototype.push=function(e,t){var r=new mg(e,t),n=this._cancel.bind(this,r);return this._queue.push(r),this._next(),n};bt.prototype.pause=function(){this._paused||(this._paused=!0)};bt.prototype.resume=function(){this._paused&&(this._paused=!1,this._next())};bt.prototype._start=function(e){if(this._currentTask)throw new Error("WorkQueue: called start while running task");this._currentTask=e;var t=this._finish.bind(this,e);if(e.cfn=e.fn(t),typeof e.cfn!="function")throw new Error("WorkQueue: function is not cancellable")};bt.prototype._finish=function(e){var t=Array.prototype.slice.call(arguments,1);if(this._currentTask!==e)throw new Error("WorkQueue: called finish on wrong task");e.cb.apply(null,t),this._currentTask=null,this._lastFinished=Zc(),this._next()};bt.prototype._cancel=function(e){var t=Array.prototype.slice.call(arguments,1);if(this._currentTask===e)e.cfn.apply(null,t);else{var r=this._queue.indexOf(e);r>=0&&(this._queue.splice(r,1),e.cb.apply(null,t))}};bt.prototype._next=function(){if(!this._paused&&this._queue.length&&!this._currentTask){if(this._lastFinished!=null){var e=Zc()-this._lastFinished,t=this._delay-e;if(t>0){setTimeout(this._next.bind(this),t);return}}var r=this._queue.shift();this._start(r)}};var Qc=bt;function _g(e,t,r,n){n=n||{};var i;r!=null&&r.absoluteWidth!=null?i=r.absoluteWidth/e:r!=null&&r.relativeWidth!=null?i=r.relativeWidth:i=1;var s;r&&r.absoluteHeight!=null?s=r.absoluteHeight/t:r!=null&&r.relativeHeight!=null?s=r.relativeHeight:s=1;var o;r!=null&&r.absoluteX!=null?o=r.absoluteX/e:r!=null&&r.relativeX!=null?o=r.relativeX:o=0;var a;return r!=null&&r.absoluteY!=null?a=r.absoluteY/t:r!=null&&r.relativeY!=null?a=r.relativeY:a=0,n.x=o,n.y=a,n.width=i,n.height=s,n}var Jc=_g;function yg(e){return function(r){var n,i;try{i=e()}catch(s){n=s}finally{n?r(n):r(null,i)}}}var eh=yg;function gg(e){var t=!1,r;return function(){return t||(t=!0,r=e.apply(null,arguments)),r}}var To=gg,Eg=To;function wg(e){return function(){if(!arguments.length)throw new Error("cancelized: expected at least one argument");var r=Array.prototype.slice.call(arguments,0),n=r[r.length-1]=Eg(r[r.length-1]);function i(){n.apply(null,arguments)}return e.apply(null,r),i}}var th=wg;function bg(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]=void 0)}var ee=bg;function xo(){this._renderers={}}xo.prototype.set=function(e,t,r){this._renderers[e]||(this._renderers[e]={}),this._renderers[e][t]=r};xo.prototype.get=function(e,t){var r=this._renderers[e]&&this._renderers[e][t];return r||null};var Tg=xo,xg=re,Mg=Qc,Ag=Jc,Sg=eh,Cg=th,Lg=ee,Og=Tg;function $g(e,t){return e.cmp(t)}function Pg(e,t){return-e.cmp(t)}function Z(e){this._progressive=!!(e&&e.progressive),this._layers=[],this._renderers=[],this._tilesToLoad=[],this._tilesToRender=[],this._tmpVisible=[],this._tmpChildren=[],this._width=0,this._height=0,this._tmpRect={},this._tmpSize={},this._createTextureWorkQueue=new Mg,this._emitRenderInvalid=this._emitRenderInvalid.bind(this),this._rendererRegistry=new Og}xg(Z);Z.prototype.destroy=function(){this.removeAllLayers(),Lg(this)};Z.prototype.registerRenderer=function(e,t,r){return this._rendererRegistry.set(e,t,r)};Z.prototype.domElement=function(){throw new Error("Stage implementation must override domElement")};Z.prototype.width=function(){return this._width};Z.prototype.height=function(){return this._height};Z.prototype.size=function(e){return e=e||{},e.width=this._width,e.height=this._height,e};Z.prototype.setSize=function(e){this._width=e.width,this._height=e.height,this.setSizeForType(),this.emit("resize"),this._emitRenderInvalid()};Z.prototype.setSizeForType=function(e){throw new Error("Stage implementation must override setSizeForType")};Z.prototype.loadImage=function(){throw new Error("Stage implementation must override loadImage")};Z.prototype._emitRenderInvalid=function(){this.emit("renderInvalid")};Z.prototype.validateLayer=function(e){throw new Error("Stage implementation must override validateLayer")};Z.prototype.listLayers=function(){return[].concat(this._layers)};Z.prototype.hasLayer=function(e){return this._layers.indexOf(e)>=0};Z.prototype.addLayer=function(e,t){if(this._layers.indexOf(e)>=0)throw new Error("Layer already in stage");if(t==null&&(t=this._layers.length),t<0||t>this._layers.length)throw new Error("Invalid layer position");this.validateLayer(e);var r=e.geometry().type,n=e.view().type,i=this._rendererRegistry.get(r,n);if(!i)throw new Error("No "+this.type+" renderer avaiable for "+r+" geometry and "+n+" view");var s=this.createRenderer(i);this._layers.splice(t,0,e),this._renderers.splice(t,0,s),e.addEventListener("viewChange",this._emitRenderInvalid),e.addEventListener("effectsChange",this._emitRenderInvalid),e.addEventListener("fixedLevelChange",this._emitRenderInvalid),e.addEventListener("textureStoreChange",this._emitRenderInvalid),this._emitRenderInvalid()};Z.prototype.moveLayer=function(e,t){var r=this._layers.indexOf(e);if(r<0)throw new Error("No such layer in stage");if(t<0||t>=this._layers.length)throw new Error("Invalid layer position");e=this._layers.splice(r,1)[0];var n=this._renderers.splice(r,1)[0];this._layers.splice(t,0,e),this._renderers.splice(t,0,n),this._emitRenderInvalid()};Z.prototype.removeLayer=function(e){var t=this._layers.indexOf(e);if(t<0)throw new Error("No such layer in stage");var r=this._layers.splice(t,1)[0],n=this._renderers.splice(t,1)[0];this.destroyRenderer(n),r.removeEventListener("viewChange",this._emitRenderInvalid),r.removeEventListener("effectsChange",this._emitRenderInvalid),r.removeEventListener("fixedLevelChange",this._emitRenderInvalid),r.removeEventListener("textureStoreChange",this._emitRenderInvalid),this._emitRenderInvalid()};Z.prototype.removeAllLayers=function(){for(;this._layers.length>0;)this.removeLayer(this._layers[0])};Z.prototype.startFrame=function(){throw new Error("Stage implementation must override startFrame")};Z.prototype.endFrame=function(){throw new Error("Stage implementation must override endFrame")};Z.prototype.render=function(){var e,t,r=this._tilesToLoad,n=this._tilesToRender,i=!0,s,o=this._width,a=this._height,l=this._tmpRect,c=this._tmpSize;if(!(o<=0||a<=0)){for(this.startFrame(),e=0;e<this._layers.length;e++)this._layers[e].textureStore().startFrame();for(e=0;e<this._layers.length;e++){var h=this._layers[e],f=h.effects(),u=h.view(),v=h.textureStore(),d=this._renderers[e],y=this._layers.length-e,m,E;if(Ag(o,a,f&&f.rect,l),!(l.width<=0||l.height<=0)){for(c.width=l.width*this._width,c.height=l.height*this._height,u.setSize(c),d.startLayer(h,l),s=this._collectTiles(h,v),t=0;t<r.length;t++)m=r[t],v.markTile(m);for(t=0;t<n.length;t++)m=n[t],E=v.texture(m),d.renderTile(m,E,h,y);h.emit("renderComplete",s),s||(i=!1),d.endLayer(h,l)}}for(e=0;e<this._layers.length;e++)this._layers[e].textureStore().endFrame();this.endFrame(),this.emit("renderComplete",i)}};Z.prototype._collectTiles=function(e,t){var r=this._tilesToLoad,n=this._tilesToRender,i=this._tmpVisible;r.length=0,n.length=0,i.length=0,e.visibleTiles(i);for(var s=!0,o=0;o<i.length;o++){var a=i[o],l;this._collectTileToLoad(a),t.texture(a)?(l=!1,this._collectTileToRender(a)):(l=this._collectChildren(a,t),s=!1),this._collectParents(a,t,l)}return r.sort($g),n.sort(Pg),s};Z.prototype._collectChildren=function(e,t){var r=this._tmpChildren,n=!0;do{if(r.length=0,!e.children(r))break;n=!1;for(var i=0;i<r.length;i++)e=r[i],t.texture(e)?(this._collectTileToLoad(e),this._collectTileToRender(e)):n=!0}while(n&&r.length===1);return n};Z.prototype._collectParents=function(e,t,r){for(var n=this._progressive;(n||r)&&(e=e.parent())!=null;){if(r){if(t.texture(e))this._collectTileToRender(e),r=!1;else if(!this._progressive)continue}this._collectTileToLoad(e)||(n=!1)}return r};Z.prototype._collectTileToLoad=function(e){return this._collectTileIntoList(e,this._tilesToLoad)};Z.prototype._collectTileToRender=function(e){return this._collectTileIntoList(e,this._tilesToRender)};Z.prototype._collectTileIntoList=function(e,t){for(var r=!1,n=0;n<t.length;n++)if(e.equals(t[n])){r=!0;break}return r||t.push(e),!r};Z.prototype.createTexture=function(e,t,r){var n=this;function i(){return new n.TextureClass(n,e,t)}var s=Cg(Sg(i));return this._createTextureWorkQueue.push(s,function(o,a){r(o,e,t,a)})};var Rg=Z,Ng=function(){return typeof window<"u"?window:typeof self<"u"?self:typeof Ys<"u"?Ys:null}(),rh=Ng,tl=rh,Ig=re,Dg=ee,Es={HTMLImageElement:["naturalWidth","naturalHeight"],HTMLCanvasElement:["width","height"],ImageBitmap:["width","height"]};function Vt(e){var t=!1;for(var r in Es)if(tl[r]&&e instanceof tl[r]){t=!0,this._widthProp=Es[r][0],this._heightProp=Es[r][1];break}if(!t)throw new Error("Unsupported pixel source");this._element=e}Ig(Vt);Vt.prototype.destroy=function(){Dg(this)};Vt.prototype.element=function(){return this._element};Vt.prototype.width=function(){return this._element[this._widthProp]};Vt.prototype.height=function(){return this._element[this._heightProp]};Vt.prototype.timestamp=function(){return 0};Vt.prototype.isDynamic=function(){return!1};var Mo=Vt;function zg(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}var it=zg,kg=it;function nh(e){this.constructor.super_.apply(this,arguments),this.message=e}kg(nh,Error);var ih=nh,sh={exports:{}};/*!
 * Bowser - a browser detector
 * https://github.com/ded/bowser
 * MIT License | (c) Dustin Diaz 2015
 */(function(e){(function(t,r,n){e.exports?e.exports=n():t[r]=n()})(Ys,"bowser",function(){var t=!0;function r(c){function h(oe){var ae=c.match(oe);return ae&&ae.length>1&&ae[1]||""}function f(oe){var ae=c.match(oe);return ae&&ae.length>1&&ae[2]||""}var u=h(/(ipod|iphone|ipad)/i).toLowerCase(),v=/like android/i.test(c),d=!v&&/android/i.test(c),y=/nexus\s*[0-6]\s*/i.test(c),m=!y&&/nexus\s*[0-9]+/i.test(c),E=/CrOS/.test(c),T=/silk/i.test(c),x=/sailfish/i.test(c),A=/tizen/i.test(c),C=/(web|hpw)(o|0)s/i.test(c),S=/windows phone/i.test(c),$=!S&&/windows/i.test(c),z=!u&&!T&&/macintosh/i.test(c),I=!d&&!x&&!A&&!C&&/linux/i.test(c),D=f(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),P=h(/version\/(\d+(\.\d+)?)/i),H=/tablet/i.test(c)&&!/tablet pc/i.test(c),F=!H&&/[^-]mobi/i.test(c),R=/xbox/i.test(c),w;/opera/i.test(c)?w={name:"Opera",opera:t,version:P||h(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(c)?w={name:"Opera",opera:t,version:h(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||P}:/SamsungBrowser/i.test(c)?w={name:"Samsung Internet for Android",samsungBrowser:t,version:P||h(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(c)?w={name:"NAVER Whale browser",whale:t,version:h(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(c)?w={name:"MZ Browser",mzbrowser:t,version:h(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(c)?w={name:"Opera Coast",coast:t,version:P||h(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(c)?w={name:"Focus",focus:t,version:h(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(c)?w={name:"Yandex Browser",yandexbrowser:t,version:P||h(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(c)?w={name:"UC Browser",ucbrowser:t,version:h(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(c)?w={name:"Maxthon",maxthon:t,version:h(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(c)?w={name:"Epiphany",epiphany:t,version:h(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(c)?w={name:"Puffin",puffin:t,version:h(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(c)?w={name:"Sleipnir",sleipnir:t,version:h(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(c)?w={name:"K-Meleon",kMeleon:t,version:h(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:S?(w={name:"Windows Phone",osname:"Windows Phone",windowsphone:t},D?(w.msedge=t,w.version=D):(w.msie=t,w.version=h(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(c)?w={name:"Internet Explorer",msie:t,version:h(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:E?w={name:"Chrome",osname:"Chrome OS",chromeos:t,chromeBook:t,chrome:t,version:h(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(c)?w={name:"Microsoft Edge",msedge:t,version:D}:/vivaldi/i.test(c)?w={name:"Vivaldi",vivaldi:t,version:h(/vivaldi\/(\d+(\.\d+)?)/i)||P}:x?w={name:"Sailfish",osname:"Sailfish OS",sailfish:t,version:h(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(c)?w={name:"SeaMonkey",seamonkey:t,version:h(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(c)?(w={name:"Firefox",firefox:t,version:h(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(c)&&(w.firefoxos=t,w.osname="Firefox OS")):T?w={name:"Amazon Silk",silk:t,version:h(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(c)?w={name:"PhantomJS",phantom:t,version:h(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(c)?w={name:"SlimerJS",slimer:t,version:h(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(c)||/rim\stablet/i.test(c)?w={name:"BlackBerry",osname:"BlackBerry OS",blackberry:t,version:P||h(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:C?(w={name:"WebOS",osname:"WebOS",webos:t,version:P||h(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(c)&&(w.touchpad=t)):/bada/i.test(c)?w={name:"Bada",osname:"Bada",bada:t,version:h(/dolfin\/(\d+(\.\d+)?)/i)}:A?w={name:"Tizen",osname:"Tizen",tizen:t,version:h(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||P}:/qupzilla/i.test(c)?w={name:"QupZilla",qupzilla:t,version:h(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||P}:/chromium/i.test(c)?w={name:"Chromium",chromium:t,version:h(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||P}:/chrome|crios|crmo/i.test(c)?w={name:"Chrome",chrome:t,version:h(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:d?w={name:"Android",version:P}:/safari|applewebkit/i.test(c)?(w={name:"Safari",safari:t},P&&(w.version=P)):u?(w={name:u=="iphone"?"iPhone":u=="ipad"?"iPad":"iPod"},P&&(w.version=P)):/googlebot/i.test(c)?w={name:"Googlebot",googlebot:t,version:h(/googlebot\/(\d+(\.\d+))/i)||P}:w={name:h(/^(.*)\/(.*) /),version:f(/^(.*)\/(.*) /)},!w.msedge&&/(apple)?webkit/i.test(c)?(/(apple)?webkit\/537\.36/i.test(c)?(w.name=w.name||"Blink",w.blink=t):(w.name=w.name||"Webkit",w.webkit=t),!w.version&&P&&(w.version=P)):!w.opera&&/gecko\//i.test(c)&&(w.name=w.name||"Gecko",w.gecko=t,w.version=w.version||h(/gecko\/(\d+(\.\d+)?)/i)),!w.windowsphone&&(d||w.silk)?(w.android=t,w.osname="Android"):!w.windowsphone&&u?(w[u]=t,w.ios=t,w.osname="iOS"):z?(w.mac=t,w.osname="macOS"):R?(w.xbox=t,w.osname="Xbox"):$?(w.windows=t,w.osname="Windows"):I&&(w.linux=t,w.osname="Linux");function Y(oe){switch(oe){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}var U="";w.windows?U=Y(h(/Windows ((NT|XP)( \d\d?.\d)?)/i)):w.windowsphone?U=h(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):w.mac?(U=h(/Mac OS X (\d+([_\.\s]\d+)*)/i),U=U.replace(/[_\s]/g,".")):u?(U=h(/os (\d+([_\s]\d+)*) like mac os x/i),U=U.replace(/[_\s]/g,".")):d?U=h(/android[ \/-](\d+(\.\d+)*)/i):w.webos?U=h(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):w.blackberry?U=h(/rim\stablet\sos\s(\d+(\.\d+)*)/i):w.bada?U=h(/bada\/(\d+(\.\d+)*)/i):w.tizen&&(U=h(/tizen[\/\s](\d+(\.\d+)*)/i)),U&&(w.osversion=U);var se=!w.windows&&U.split(".")[0];return H||m||u=="ipad"||d&&(se==3||se>=4&&!F)||w.silk?w.tablet=t:(F||u=="iphone"||u=="ipod"||d||y||w.blackberry||w.webos||w.bada)&&(w.mobile=t),w.msedge||w.msie&&w.version>=10||w.yandexbrowser&&w.version>=15||w.vivaldi&&w.version>=1||w.chrome&&w.version>=20||w.samsungBrowser&&w.version>=4||w.whale&&o([w.version,"1.0"])===1||w.mzbrowser&&o([w.version,"6.0"])===1||w.focus&&o([w.version,"1.0"])===1||w.firefox&&w.version>=20||w.safari&&w.version>=6||w.opera&&w.version>=10||w.ios&&w.osversion&&w.osversion.split(".")[0]>=6||w.blackberry&&w.version>=10.1||w.chromium&&w.version>=20?w.a=t:w.msie&&w.version<10||w.chrome&&w.version<20||w.firefox&&w.version<20||w.safari&&w.version<6||w.opera&&w.version<10||w.ios&&w.osversion&&w.osversion.split(".")[0]<6||w.chromium&&w.version<20?w.c=t:w.x=t,w}var n=r(typeof navigator<"u"&&navigator.userAgent||"");n.test=function(c){for(var h=0;h<c.length;++h){var f=c[h];if(typeof f=="string"&&f in n)return!0}return!1};function i(c){return c.split(".").length}function s(c,h){var f=[],u;if(Array.prototype.map)return Array.prototype.map.call(c,h);for(u=0;u<c.length;u++)f.push(h(c[u]));return f}function o(c){for(var h=Math.max(i(c[0]),i(c[1])),f=s(c,function(u){var v=h-i(u);return u=u+new Array(v+1).join(".0"),s(u.split("."),function(d){return new Array(20-d.length).join("0")+d}).reverse()});--h>=0;){if(f[0][h]>f[1][h])return 1;if(f[0][h]===f[1][h]){if(h===0)return 0}else return-1}}function a(c,h,f){var u=n;typeof h=="string"&&(f=h,h=void 0),h===void 0&&(h=!1),f&&(u=r(f));var v=""+u.version;for(var d in c)if(c.hasOwnProperty(d)&&u[d]){if(typeof c[d]!="string")throw new Error("Browser version in the minVersion map should be a string: "+d+": "+String(c));return o([v,c[d]])<0}return h}function l(c,h,f){return!a(c,h,f)}return n.isUnsupportedBrowser=a,n.compareVersions=o,n.check=l,n._detect=r,n.detect=r,n})})(sh);var Ao=sh.exports,ws=Mo,Hg=ih,Fg=Ao,oh=rh,Vg=To,Bg=!!oh.createImageBitmap&&!Fg.firefox,Wg={imageOrientation:"flipY",premultiplyAlpha:"premultiply"};function Di(e){this._stage=e}Di.prototype.loadImage=function(e,t,r){var n=this,i=new Image;i.crossOrigin="anonymous";var s=t&&t.x||0,o=t&&t.y||0,a=t&&t.width||1,l=t&&t.height||1;r=Vg(r),i.onload=function(){n._handleLoad(i,s,o,a,l,r)},i.onerror=function(){n._handleError(e,r)},i.src=e;function c(){i.onload=i.onerror=null,i.src="",r.apply(null,arguments)}return c};Di.prototype._handleLoad=function(e,t,r,n,i,s){if(t===0&&r===0&&n===1&&i===1){s(null,new ws(e));return}if(t*=e.naturalWidth,r*=e.naturalHeight,n*=e.naturalWidth,i*=e.naturalHeight,Bg)oh.createImageBitmap(e,t,r,n,i,Wg).then(function(l){s(null,new ws(l))});else{var o=document.createElement("canvas");o.width=n,o.height=i;var a=o.getContext("2d");a.drawImage(e,t,r,n,i,0,0,n,i),s(null,new ws(o))}};Di.prototype._handleError=function(e,t){t(new Hg("Network error: "+e))};var Ug=Di,jg=1;function qg(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e&&e.deviceXDPI&&e.logicalXDPI)return e.deviceXDPI/e.logicalXDPI;if(e&&e.systemXDPI&&e.logicalXDPI)return e.systemXDPI/e.logicalXDPI}return jg}var zi=qg;function Yg(e){return(e&e-1)==0}var Xg=Yg;function So(e){for(var t=document.documentElement.style,r=["Moz","Webkit","Khtml","O","ms"],n=0;n<r.length;n++){var i=r[n],s=e[0].toUpperCase()+e.slice(1),o=i+s;if(o in t)return o}return e}function Gg(e){var t=So(e);return function(n){return n.style[t]}}function Co(e){var t=So(e);return function(n,i){return n.style[t]=i}}var ah=Co("transform"),lh=Co("transformOrigin");function Kg(e){ah(e,"translateZ(0)")}function Zg(e){lh(e,"0 0 0")}function Qg(e){e.style.position="absolute"}function Jg(e,t,r){e.style.left=t+"px",e.style.top=r+"px"}function e0(e,t,r){e.style.width=t+"px",e.style.height=r+"px"}function t0(e){e.style.width=e.style.height=0}function r0(e){e.style.width=e.style.height="100%"}function n0(e){e.style.overflow="hidden"}function i0(e){e.style.overflow="visible"}function s0(e){e.style.pointerEvents="none"}var Ce={prefixProperty:So,getWithVendorPrefix:Gg,setWithVendorPrefix:Co,setTransform:ah,setTransformOrigin:lh,setNullTransform:Kg,setNullTransformOrigin:Zg,setAbsolute:Qg,setPixelPosition:Jg,setPixelSize:e0,setNullSize:t0,setFullSize:r0,setOverflowHidden:n0,setOverflowVisible:i0,setNoPointerEvents:s0},o0=Rg,a0=Ug,l0=Ao,c0=it,h0=zi,rl=Xg,f0=Ce.setAbsolute,u0=Ce.setFullSize,d0=ee,p0={videoUseTexImage2D:l0.chrome};function v0(e,t){var r={alpha:!0,premultipliedAlpha:!0,antialias:!!(t&&t.antialias),preserveDrawingBuffer:!!(t&&t.preserveDrawingBuffer)},n=e.getContext&&(e.getContext("webgl",r)||e.getContext("experimental-webgl",r));if(!n)throw new Error("Could not get WebGL context");return t.wrapContext&&(n=t.wrapContext(n)),n}function ue(e){e=e||{};var t=this;this.constructor.super_.call(this,e),this._generateMipmaps=e.generateMipmaps!=null?e.generateMipmaps:!1,this._loader=new a0(this),this._domElement=document.createElement("canvas"),f0(this._domElement),u0(this._domElement),this._gl=v0(this._domElement,e),this._handleContextLoss=function(){t.emit("webglcontextlost"),t._gl=null},this._domElement.addEventListener("webglcontextlost",this._handleContextLoss),this._rendererInstances=[]}c0(ue,o0);ue.prototype.destroy=function(){this._domElement.removeEventListener("webglcontextlost",this._handleContextLoss),this.constructor.super_.prototype.destroy.call(this)};ue.prototype.domElement=function(){return this._domElement};ue.prototype.webGlContext=function(){return this._gl};ue.prototype.setSizeForType=function(){var e=h0();this._domElement.width=e*this._width,this._domElement.height=e*this._height};ue.prototype.loadImage=function(e,t,r){return this._loader.loadImage(e,t,r)};ue.prototype.maxTextureSize=function(){return this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE)};ue.prototype.validateLayer=function(e){var t=e.geometry().maxTileSize(),r=this.maxTextureSize();if(t>r)throw new Error("Layer has level with tile size larger than maximum texture size ("+t+" vs. "+r+")")};ue.prototype.createRenderer=function(e){for(var t=this._rendererInstances,r=0;r<t.length;r++)if(t[r]instanceof e)return t[r];var n=new e(this._gl);return t.push(n),n};ue.prototype.destroyRenderer=function(e){var t=this._rendererInstances;if(this._renderers.indexOf(e)<0){e.destroy();var r=t.indexOf(e);r>=0&&t.splice(r,1)}};ue.prototype.startFrame=function(){var e=this._gl;if(!e)throw new Error("Bad WebGL context - maybe context was lost?");e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.enable(e.DEPTH_TEST),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)};ue.prototype.endFrame=function(){};ue.prototype.takeSnapshot=function(e){(typeof e!="object"||e==null)&&(e={});var t=e.quality;if(typeof t>"u"&&(t=75),typeof t!="number"||t<0||t>100)throw new Error("WebGLStage: Snapshot quality needs to be a number between 0 and 100");return this.render(),this._domElement.toDataURL("image/jpeg",t/100)};ue.type=ue.prototype.type="webgl";function Lo(e,t,r){this._stage=e,this._gl=e._gl,this._texture=null,this._timestamp=null,this._width=this._height=null,this.refresh(t,r)}Lo.prototype.refresh=function(e,t){var r=this._gl,n=this._stage,i,s=t.timestamp();if(s!==this._timestamp){var o=t.element(),a=t.width(),l=t.height();if(a!==this._width||l!==this._height){var c=n.maxTextureSize();if(a>c)throw new Error("Texture width larger than max size ("+a+" vs. "+c+")");if(l>c)throw new Error("Texture height larger than max size ("+l+" vs. "+c+")");this._texture&&r.deleteTexture(i),i=this._texture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,i),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,o)}else i=this._texture,r.bindTexture(r.TEXTURE_2D,i),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),o instanceof HTMLVideoElement&&p0.videoUseTexImage2D?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,o):r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,o);n._generateMipmaps&&rl(a)&&rl(l)?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_LINEAR),r.generateMipmap(r.TEXTURE_2D)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR)),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.bindTexture(r.TEXTURE_2D,null),this._timestamp=s,this._width=a,this._height=l}};Lo.prototype.destroy=function(){this._texture&&this._gl.deleteTexture(this._texture),d0(this)};ue.TextureClass=ue.prototype.TextureClass=Lo;var ch=ue,N=1e-6,j=typeof Float32Array<"u"?Float32Array:Array,je=Math.random;function m0(e){j=e}var _0=Math.PI/180;function y0(e){return e*_0}function g0(e,t){return Math.abs(e-t)<=N*Math.max(1,Math.abs(e),Math.abs(t))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});const E0=Object.freeze(Object.defineProperty({__proto__:null,get ARRAY_TYPE(){return j},EPSILON:N,RANDOM:je,equals:g0,setMatrixArrayType:m0,toRadian:y0},Symbol.toStringTag,{value:"Module"}));function w0(){var e=new j(4);return j!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function b0(e){var t=new j(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function T0(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function x0(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function M0(e,t,r,n){var i=new j(4);return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i}function A0(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function S0(e,t){if(e===t){var r=t[1];e[1]=t[2],e[2]=r}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function C0(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],o=r*s-i*n;return o?(o=1/o,e[0]=s*o,e[1]=-n*o,e[2]=-i*o,e[3]=r*o,e):null}function L0(e,t){var r=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=r,e}function O0(e){return e[0]*e[3]-e[2]*e[1]}function hh(e,t,r){var n=t[0],i=t[1],s=t[2],o=t[3],a=r[0],l=r[1],c=r[2],h=r[3];return e[0]=n*a+s*l,e[1]=i*a+o*l,e[2]=n*c+s*h,e[3]=i*c+o*h,e}function $0(e,t,r){var n=t[0],i=t[1],s=t[2],o=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=n*l+s*a,e[1]=i*l+o*a,e[2]=n*-a+s*l,e[3]=i*-a+o*l,e}function P0(e,t,r){var n=t[0],i=t[1],s=t[2],o=t[3],a=r[0],l=r[1];return e[0]=n*a,e[1]=i*a,e[2]=s*l,e[3]=o*l,e}function R0(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e}function N0(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function I0(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function D0(e){return Math.hypot(e[0],e[1],e[2],e[3])}function z0(e,t,r,n){return e[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-e[2]*r[1],[e,t,r]}function k0(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function fh(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function H0(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function F0(e,t){var r=e[0],n=e[1],i=e[2],s=e[3],o=t[0],a=t[1],l=t[2],c=t[3];return Math.abs(r-o)<=N*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=N*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-l)<=N*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-c)<=N*Math.max(1,Math.abs(s),Math.abs(c))}function V0(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function B0(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}var W0=hh,U0=fh;const j0=Object.freeze(Object.defineProperty({__proto__:null,LDU:z0,add:k0,adjoint:L0,clone:b0,copy:T0,create:w0,determinant:O0,equals:F0,exactEquals:H0,frob:D0,fromRotation:R0,fromScaling:N0,fromValues:M0,identity:x0,invert:C0,mul:W0,multiply:hh,multiplyScalar:V0,multiplyScalarAndAdd:B0,rotate:$0,scale:P0,set:A0,str:I0,sub:U0,subtract:fh,transpose:S0},Symbol.toStringTag,{value:"Module"}));function q0(){var e=new j(6);return j!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function Y0(e){var t=new j(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function X0(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function G0(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function K0(e,t,r,n,i,s){var o=new j(6);return o[0]=e,o[1]=t,o[2]=r,o[3]=n,o[4]=i,o[5]=s,o}function Z0(e,t,r,n,i,s,o){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=s,e[5]=o,e}function Q0(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=r*s-n*i;return l?(l=1/l,e[0]=s*l,e[1]=-n*l,e[2]=-i*l,e[3]=r*l,e[4]=(i*a-s*o)*l,e[5]=(n*o-r*a)*l,e):null}function J0(e){return e[0]*e[3]-e[1]*e[2]}function uh(e,t,r){var n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=r[0],h=r[1],f=r[2],u=r[3],v=r[4],d=r[5];return e[0]=n*c+s*h,e[1]=i*c+o*h,e[2]=n*f+s*u,e[3]=i*f+o*u,e[4]=n*v+s*d+a,e[5]=i*v+o*d+l,e}function e1(e,t,r){var n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=Math.sin(r),h=Math.cos(r);return e[0]=n*h+s*c,e[1]=i*h+o*c,e[2]=n*-c+s*h,e[3]=i*-c+o*h,e[4]=a,e[5]=l,e}function t1(e,t,r){var n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=r[0],h=r[1];return e[0]=n*c,e[1]=i*c,e[2]=s*h,e[3]=o*h,e[4]=a,e[5]=l,e}function r1(e,t,r){var n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=r[0],h=r[1];return e[0]=n,e[1]=i,e[2]=s,e[3]=o,e[4]=n*c+s*h+a,e[5]=i*c+o*h+l,e}function n1(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=0,e[5]=0,e}function i1(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function s1(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function o1(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function a1(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],1)}function l1(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function dh(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function c1(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function h1(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e}function f1(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function u1(e,t){var r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=t[0],c=t[1],h=t[2],f=t[3],u=t[4],v=t[5];return Math.abs(r-l)<=N*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-c)<=N*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-h)<=N*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-f)<=N*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(o-u)<=N*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-v)<=N*Math.max(1,Math.abs(a),Math.abs(v))}var d1=uh,p1=dh;const v1=Object.freeze(Object.defineProperty({__proto__:null,add:l1,clone:Y0,copy:X0,create:q0,determinant:J0,equals:u1,exactEquals:f1,frob:a1,fromRotation:n1,fromScaling:i1,fromTranslation:s1,fromValues:K0,identity:G0,invert:Q0,mul:d1,multiply:uh,multiplyScalar:c1,multiplyScalarAndAdd:h1,rotate:e1,scale:t1,set:Z0,str:o1,sub:p1,subtract:dh,translate:r1},Symbol.toStringTag,{value:"Module"}));function ph(){var e=new j(9);return j!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function m1(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function _1(e){var t=new j(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function y1(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function g1(e,t,r,n,i,s,o,a,l){var c=new j(9);return c[0]=e,c[1]=t,c[2]=r,c[3]=n,c[4]=i,c[5]=s,c[6]=o,c[7]=a,c[8]=l,c}function E1(e,t,r,n,i,s,o,a,l,c){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=c,e}function w1(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function b1(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function T1(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],f=h*o-a*c,u=-h*s+a*l,v=c*s-o*l,d=r*f+n*u+i*v;return d?(d=1/d,e[0]=f*d,e[1]=(-h*n+i*c)*d,e[2]=(a*n-i*o)*d,e[3]=u*d,e[4]=(h*r-i*l)*d,e[5]=(-a*r+i*s)*d,e[6]=v*d,e[7]=(-c*r+n*l)*d,e[8]=(o*r-n*s)*d,e):null}function x1(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8];return e[0]=o*h-a*c,e[1]=i*c-n*h,e[2]=n*a-i*o,e[3]=a*l-s*h,e[4]=r*h-i*l,e[5]=i*s-r*a,e[6]=s*c-o*l,e[7]=n*l-r*c,e[8]=r*o-n*s,e}function M1(e){var t=e[0],r=e[1],n=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8];return t*(c*s-o*l)+r*(-c*i+o*a)+n*(l*i-s*a)}function vh(e,t,r){var n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],u=r[0],v=r[1],d=r[2],y=r[3],m=r[4],E=r[5],T=r[6],x=r[7],A=r[8];return e[0]=u*n+v*o+d*c,e[1]=u*i+v*a+d*h,e[2]=u*s+v*l+d*f,e[3]=y*n+m*o+E*c,e[4]=y*i+m*a+E*h,e[5]=y*s+m*l+E*f,e[6]=T*n+x*o+A*c,e[7]=T*i+x*a+A*h,e[8]=T*s+x*l+A*f,e}function A1(e,t,r){var n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],u=r[0],v=r[1];return e[0]=n,e[1]=i,e[2]=s,e[3]=o,e[4]=a,e[5]=l,e[6]=u*n+v*o+c,e[7]=u*i+v*a+h,e[8]=u*s+v*l+f,e}function S1(e,t,r){var n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],u=Math.sin(r),v=Math.cos(r);return e[0]=v*n+u*o,e[1]=v*i+u*a,e[2]=v*s+u*l,e[3]=v*o-u*n,e[4]=v*a-u*i,e[5]=v*l-u*s,e[6]=c,e[7]=h,e[8]=f,e}function C1(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function L1(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function O1(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function $1(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function P1(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function R1(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],o=r+r,a=n+n,l=i+i,c=r*o,h=n*o,f=n*a,u=i*o,v=i*a,d=i*l,y=s*o,m=s*a,E=s*l;return e[0]=1-f-d,e[3]=h-E,e[6]=u+m,e[1]=h+E,e[4]=1-c-d,e[7]=v-y,e[2]=u-m,e[5]=v+y,e[8]=1-c-f,e}function N1(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],f=t[9],u=t[10],v=t[11],d=t[12],y=t[13],m=t[14],E=t[15],T=r*a-n*o,x=r*l-i*o,A=r*c-s*o,C=n*l-i*a,S=n*c-s*a,$=i*c-s*l,z=h*y-f*d,I=h*m-u*d,D=h*E-v*d,P=f*m-u*y,H=f*E-v*y,F=u*E-v*m,R=T*F-x*H+A*P+C*D-S*I+$*z;return R?(R=1/R,e[0]=(a*F-l*H+c*P)*R,e[1]=(l*D-o*F-c*I)*R,e[2]=(o*H-a*D+c*z)*R,e[3]=(i*H-n*F-s*P)*R,e[4]=(r*F-i*D+s*I)*R,e[5]=(n*D-r*H-s*z)*R,e[6]=(y*$-m*S+E*C)*R,e[7]=(m*A-d*$-E*x)*R,e[8]=(d*S-y*A+E*T)*R,e):null}function I1(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function D1(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function z1(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function k1(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function mh(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function H1(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function F1(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e}function V1(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function B1(e,t){var r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],f=t[0],u=t[1],v=t[2],d=t[3],y=t[4],m=t[5],E=t[6],T=t[7],x=t[8];return Math.abs(r-f)<=N*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-u)<=N*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-v)<=N*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(s-d)<=N*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(o-y)<=N*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(a-m)<=N*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(l-E)<=N*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(c-T)<=N*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(h-x)<=N*Math.max(1,Math.abs(h),Math.abs(x))}var W1=vh,U1=mh;const j1=Object.freeze(Object.defineProperty({__proto__:null,add:k1,adjoint:x1,clone:_1,copy:y1,create:ph,determinant:M1,equals:B1,exactEquals:V1,frob:z1,fromMat2d:P1,fromMat4:m1,fromQuat:R1,fromRotation:O1,fromScaling:$1,fromTranslation:L1,fromValues:g1,identity:w1,invert:T1,mul:W1,multiply:vh,multiplyScalar:H1,multiplyScalarAndAdd:F1,normalFromMat4:N1,projection:I1,rotate:S1,scale:C1,set:E1,str:D1,sub:U1,subtract:mh,translate:A1,transpose:b1},Symbol.toStringTag,{value:"Module"}));function q1(){var e=new j(16);return j!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Y1(e){var t=new j(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function X1(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function G1(e,t,r,n,i,s,o,a,l,c,h,f,u,v,d,y){var m=new j(16);return m[0]=e,m[1]=t,m[2]=r,m[3]=n,m[4]=i,m[5]=s,m[6]=o,m[7]=a,m[8]=l,m[9]=c,m[10]=h,m[11]=f,m[12]=u,m[13]=v,m[14]=d,m[15]=y,m}function K1(e,t,r,n,i,s,o,a,l,c,h,f,u,v,d,y,m){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=c,e[9]=h,e[10]=f,e[11]=u,e[12]=v,e[13]=d,e[14]=y,e[15]=m,e}function _h(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Z1(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],s=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=s,e[11]=t[14],e[12]=i,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Q1(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],f=t[9],u=t[10],v=t[11],d=t[12],y=t[13],m=t[14],E=t[15],T=r*a-n*o,x=r*l-i*o,A=r*c-s*o,C=n*l-i*a,S=n*c-s*a,$=i*c-s*l,z=h*y-f*d,I=h*m-u*d,D=h*E-v*d,P=f*m-u*y,H=f*E-v*y,F=u*E-v*m,R=T*F-x*H+A*P+C*D-S*I+$*z;return R?(R=1/R,e[0]=(a*F-l*H+c*P)*R,e[1]=(i*H-n*F-s*P)*R,e[2]=(y*$-m*S+E*C)*R,e[3]=(u*S-f*$-v*C)*R,e[4]=(l*D-o*F-c*I)*R,e[5]=(r*F-i*D+s*I)*R,e[6]=(m*A-d*$-E*x)*R,e[7]=(h*$-u*A+v*x)*R,e[8]=(o*H-a*D+c*z)*R,e[9]=(n*D-r*H-s*z)*R,e[10]=(d*S-y*A+E*T)*R,e[11]=(f*A-h*S-v*T)*R,e[12]=(a*I-o*P-l*z)*R,e[13]=(r*P-n*I+i*z)*R,e[14]=(y*x-d*C-m*T)*R,e[15]=(h*C-f*x+u*T)*R,e):null}function J1(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],f=t[9],u=t[10],v=t[11],d=t[12],y=t[13],m=t[14],E=t[15];return e[0]=a*(u*E-v*m)-f*(l*E-c*m)+y*(l*v-c*u),e[1]=-(n*(u*E-v*m)-f*(i*E-s*m)+y*(i*v-s*u)),e[2]=n*(l*E-c*m)-a*(i*E-s*m)+y*(i*c-s*l),e[3]=-(n*(l*v-c*u)-a*(i*v-s*u)+f*(i*c-s*l)),e[4]=-(o*(u*E-v*m)-h*(l*E-c*m)+d*(l*v-c*u)),e[5]=r*(u*E-v*m)-h*(i*E-s*m)+d*(i*v-s*u),e[6]=-(r*(l*E-c*m)-o*(i*E-s*m)+d*(i*c-s*l)),e[7]=r*(l*v-c*u)-o*(i*v-s*u)+h*(i*c-s*l),e[8]=o*(f*E-v*y)-h*(a*E-c*y)+d*(a*v-c*f),e[9]=-(r*(f*E-v*y)-h*(n*E-s*y)+d*(n*v-s*f)),e[10]=r*(a*E-c*y)-o*(n*E-s*y)+d*(n*c-s*a),e[11]=-(r*(a*v-c*f)-o*(n*v-s*f)+h*(n*c-s*a)),e[12]=-(o*(f*m-u*y)-h*(a*m-l*y)+d*(a*u-l*f)),e[13]=r*(f*m-u*y)-h*(n*m-i*y)+d*(n*u-i*f),e[14]=-(r*(a*m-l*y)-o*(n*m-i*y)+d*(n*l-i*a)),e[15]=r*(a*u-l*f)-o*(n*u-i*f)+h*(n*l-i*a),e}function eE(e){var t=e[0],r=e[1],n=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],h=e[9],f=e[10],u=e[11],v=e[12],d=e[13],y=e[14],m=e[15],E=t*o-r*s,T=t*a-n*s,x=t*l-i*s,A=r*a-n*o,C=r*l-i*o,S=n*l-i*a,$=c*d-h*v,z=c*y-f*v,I=c*m-u*v,D=h*y-f*d,P=h*m-u*d,H=f*m-u*y;return E*H-T*P+x*D+A*I-C*z+S*$}function yh(e,t,r){var n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=t[8],u=t[9],v=t[10],d=t[11],y=t[12],m=t[13],E=t[14],T=t[15],x=r[0],A=r[1],C=r[2],S=r[3];return e[0]=x*n+A*a+C*f+S*y,e[1]=x*i+A*l+C*u+S*m,e[2]=x*s+A*c+C*v+S*E,e[3]=x*o+A*h+C*d+S*T,x=r[4],A=r[5],C=r[6],S=r[7],e[4]=x*n+A*a+C*f+S*y,e[5]=x*i+A*l+C*u+S*m,e[6]=x*s+A*c+C*v+S*E,e[7]=x*o+A*h+C*d+S*T,x=r[8],A=r[9],C=r[10],S=r[11],e[8]=x*n+A*a+C*f+S*y,e[9]=x*i+A*l+C*u+S*m,e[10]=x*s+A*c+C*v+S*E,e[11]=x*o+A*h+C*d+S*T,x=r[12],A=r[13],C=r[14],S=r[15],e[12]=x*n+A*a+C*f+S*y,e[13]=x*i+A*l+C*u+S*m,e[14]=x*s+A*c+C*v+S*E,e[15]=x*o+A*h+C*d+S*T,e}function tE(e,t,r){var n=r[0],i=r[1],s=r[2],o,a,l,c,h,f,u,v,d,y,m,E;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*s+t[12],e[13]=t[1]*n+t[5]*i+t[9]*s+t[13],e[14]=t[2]*n+t[6]*i+t[10]*s+t[14],e[15]=t[3]*n+t[7]*i+t[11]*s+t[15]):(o=t[0],a=t[1],l=t[2],c=t[3],h=t[4],f=t[5],u=t[6],v=t[7],d=t[8],y=t[9],m=t[10],E=t[11],e[0]=o,e[1]=a,e[2]=l,e[3]=c,e[4]=h,e[5]=f,e[6]=u,e[7]=v,e[8]=d,e[9]=y,e[10]=m,e[11]=E,e[12]=o*n+h*i+d*s+t[12],e[13]=a*n+f*i+y*s+t[13],e[14]=l*n+u*i+m*s+t[14],e[15]=c*n+v*i+E*s+t[15]),e}function rE(e,t,r){var n=r[0],i=r[1],s=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function nE(e,t,r,n){var i=n[0],s=n[1],o=n[2],a=Math.hypot(i,s,o),l,c,h,f,u,v,d,y,m,E,T,x,A,C,S,$,z,I,D,P,H,F,R,w;return a<N?null:(a=1/a,i*=a,s*=a,o*=a,l=Math.sin(r),c=Math.cos(r),h=1-c,f=t[0],u=t[1],v=t[2],d=t[3],y=t[4],m=t[5],E=t[6],T=t[7],x=t[8],A=t[9],C=t[10],S=t[11],$=i*i*h+c,z=s*i*h+o*l,I=o*i*h-s*l,D=i*s*h-o*l,P=s*s*h+c,H=o*s*h+i*l,F=i*o*h+s*l,R=s*o*h-i*l,w=o*o*h+c,e[0]=f*$+y*z+x*I,e[1]=u*$+m*z+A*I,e[2]=v*$+E*z+C*I,e[3]=d*$+T*z+S*I,e[4]=f*D+y*P+x*H,e[5]=u*D+m*P+A*H,e[6]=v*D+E*P+C*H,e[7]=d*D+T*P+S*H,e[8]=f*F+y*R+x*w,e[9]=u*F+m*R+A*w,e[10]=v*F+E*R+C*w,e[11]=d*F+T*R+S*w,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function iE(e,t,r){var n=Math.sin(r),i=Math.cos(r),s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],h=t[9],f=t[10],u=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+c*n,e[5]=o*i+h*n,e[6]=a*i+f*n,e[7]=l*i+u*n,e[8]=c*i-s*n,e[9]=h*i-o*n,e[10]=f*i-a*n,e[11]=u*i-l*n,e}function sE(e,t,r){var n=Math.sin(r),i=Math.cos(r),s=t[0],o=t[1],a=t[2],l=t[3],c=t[8],h=t[9],f=t[10],u=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-c*n,e[1]=o*i-h*n,e[2]=a*i-f*n,e[3]=l*i-u*n,e[8]=s*n+c*i,e[9]=o*n+h*i,e[10]=a*n+f*i,e[11]=l*n+u*i,e}function oE(e,t,r){var n=Math.sin(r),i=Math.cos(r),s=t[0],o=t[1],a=t[2],l=t[3],c=t[4],h=t[5],f=t[6],u=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+c*n,e[1]=o*i+h*n,e[2]=a*i+f*n,e[3]=l*i+u*n,e[4]=c*i-s*n,e[5]=h*i-o*n,e[6]=f*i-a*n,e[7]=u*i-l*n,e}function aE(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function lE(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function cE(e,t,r){var n=r[0],i=r[1],s=r[2],o=Math.hypot(n,i,s),a,l,c;return o<N?null:(o=1/o,n*=o,i*=o,s*=o,a=Math.sin(t),l=Math.cos(t),c=1-l,e[0]=n*n*c+l,e[1]=i*n*c+s*a,e[2]=s*n*c-i*a,e[3]=0,e[4]=n*i*c-s*a,e[5]=i*i*c+l,e[6]=s*i*c+n*a,e[7]=0,e[8]=n*s*c+i*a,e[9]=i*s*c-n*a,e[10]=s*s*c+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function hE(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fE(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function uE(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function gh(e,t,r){var n=t[0],i=t[1],s=t[2],o=t[3],a=n+n,l=i+i,c=s+s,h=n*a,f=n*l,u=n*c,v=i*l,d=i*c,y=s*c,m=o*a,E=o*l,T=o*c;return e[0]=1-(v+y),e[1]=f+T,e[2]=u-E,e[3]=0,e[4]=f-T,e[5]=1-(h+y),e[6]=d+m,e[7]=0,e[8]=u+E,e[9]=d-m,e[10]=1-(h+v),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function dE(e,t){var r=new j(3),n=-t[0],i=-t[1],s=-t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=n*n+i*i+s*s+o*o;return f>0?(r[0]=(a*o+h*n+l*s-c*i)*2/f,r[1]=(l*o+h*i+c*n-a*s)*2/f,r[2]=(c*o+h*s+a*i-l*n)*2/f):(r[0]=(a*o+h*n+l*s-c*i)*2,r[1]=(l*o+h*i+c*n-a*s)*2,r[2]=(c*o+h*s+a*i-l*n)*2),gh(e,t,r),e}function Eh(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function wh(e,t){var r=t[0],n=t[1],i=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],h=t[10];return e[0]=Math.hypot(r,n,i),e[1]=Math.hypot(s,o,a),e[2]=Math.hypot(l,c,h),e}function bh(e,t){var r=new j(3);wh(r,t);var n=1/r[0],i=1/r[1],s=1/r[2],o=t[0]*n,a=t[1]*i,l=t[2]*s,c=t[4]*n,h=t[5]*i,f=t[6]*s,u=t[8]*n,v=t[9]*i,d=t[10]*s,y=o+h+d,m=0;return y>0?(m=Math.sqrt(y+1)*2,e[3]=.25*m,e[0]=(f-v)/m,e[1]=(u-l)/m,e[2]=(a-c)/m):o>h&&o>d?(m=Math.sqrt(1+o-h-d)*2,e[3]=(f-v)/m,e[0]=.25*m,e[1]=(a+c)/m,e[2]=(u+l)/m):h>d?(m=Math.sqrt(1+h-o-d)*2,e[3]=(u-l)/m,e[0]=(a+c)/m,e[1]=.25*m,e[2]=(f+v)/m):(m=Math.sqrt(1+d-o-h)*2,e[3]=(a-c)/m,e[0]=(u+l)/m,e[1]=(f+v)/m,e[2]=.25*m),e}function pE(e,t,r,n){var i=t[0],s=t[1],o=t[2],a=t[3],l=i+i,c=s+s,h=o+o,f=i*l,u=i*c,v=i*h,d=s*c,y=s*h,m=o*h,E=a*l,T=a*c,x=a*h,A=n[0],C=n[1],S=n[2];return e[0]=(1-(d+m))*A,e[1]=(u+x)*A,e[2]=(v-T)*A,e[3]=0,e[4]=(u-x)*C,e[5]=(1-(f+m))*C,e[6]=(y+E)*C,e[7]=0,e[8]=(v+T)*S,e[9]=(y-E)*S,e[10]=(1-(f+d))*S,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function vE(e,t,r,n,i){var s=t[0],o=t[1],a=t[2],l=t[3],c=s+s,h=o+o,f=a+a,u=s*c,v=s*h,d=s*f,y=o*h,m=o*f,E=a*f,T=l*c,x=l*h,A=l*f,C=n[0],S=n[1],$=n[2],z=i[0],I=i[1],D=i[2],P=(1-(y+E))*C,H=(v+A)*C,F=(d-x)*C,R=(v-A)*S,w=(1-(u+E))*S,Y=(m+T)*S,U=(d+x)*$,se=(m-T)*$,oe=(1-(u+y))*$;return e[0]=P,e[1]=H,e[2]=F,e[3]=0,e[4]=R,e[5]=w,e[6]=Y,e[7]=0,e[8]=U,e[9]=se,e[10]=oe,e[11]=0,e[12]=r[0]+z-(P*z+R*I+U*D),e[13]=r[1]+I-(H*z+w*I+se*D),e[14]=r[2]+D-(F*z+Y*I+oe*D),e[15]=1,e}function mE(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],o=r+r,a=n+n,l=i+i,c=r*o,h=n*o,f=n*a,u=i*o,v=i*a,d=i*l,y=s*o,m=s*a,E=s*l;return e[0]=1-f-d,e[1]=h+E,e[2]=u-m,e[3]=0,e[4]=h-E,e[5]=1-c-d,e[6]=v+y,e[7]=0,e[8]=u+m,e[9]=v-y,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _E(e,t,r,n,i,s,o){var a=1/(r-t),l=1/(i-n),c=1/(s-o);return e[0]=s*2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s*2*l,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(i+n)*l,e[10]=(o+s)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*c,e[15]=0,e}function yE(e,t,r,n,i){var s=1/Math.tan(t/2),o;return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(o=1/(n-i),e[10]=(i+n)*o,e[14]=2*i*n*o):(e[10]=-1,e[14]=-2*n),e}function gE(e,t,r,n){var i=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(i+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-((o-a)*l*.5),e[9]=(i-s)*c*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}function EE(e,t,r,n,i,s,o){var a=1/(t-r),l=1/(n-i),c=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*a,e[13]=(i+n)*l,e[14]=(o+s)*c,e[15]=1,e}function wE(e,t,r,n){var i,s,o,a,l,c,h,f,u,v,d=t[0],y=t[1],m=t[2],E=n[0],T=n[1],x=n[2],A=r[0],C=r[1],S=r[2];return Math.abs(d-A)<N&&Math.abs(y-C)<N&&Math.abs(m-S)<N?_h(e):(h=d-A,f=y-C,u=m-S,v=1/Math.hypot(h,f,u),h*=v,f*=v,u*=v,i=T*u-x*f,s=x*h-E*u,o=E*f-T*h,v=Math.hypot(i,s,o),v?(v=1/v,i*=v,s*=v,o*=v):(i=0,s=0,o=0),a=f*o-u*s,l=u*i-h*o,c=h*s-f*i,v=Math.hypot(a,l,c),v?(v=1/v,a*=v,l*=v,c*=v):(a=0,l=0,c=0),e[0]=i,e[1]=a,e[2]=h,e[3]=0,e[4]=s,e[5]=l,e[6]=f,e[7]=0,e[8]=o,e[9]=c,e[10]=u,e[11]=0,e[12]=-(i*d+s*y+o*m),e[13]=-(a*d+l*y+c*m),e[14]=-(h*d+f*y+u*m),e[15]=1,e)}function bE(e,t,r,n){var i=t[0],s=t[1],o=t[2],a=n[0],l=n[1],c=n[2],h=i-r[0],f=s-r[1],u=o-r[2],v=h*h+f*f+u*u;v>0&&(v=1/Math.sqrt(v),h*=v,f*=v,u*=v);var d=l*u-c*f,y=c*h-a*u,m=a*f-l*h;return v=d*d+y*y+m*m,v>0&&(v=1/Math.sqrt(v),d*=v,y*=v,m*=v),e[0]=d,e[1]=y,e[2]=m,e[3]=0,e[4]=f*m-u*y,e[5]=u*d-h*m,e[6]=h*y-f*d,e[7]=0,e[8]=h,e[9]=f,e[10]=u,e[11]=0,e[12]=i,e[13]=s,e[14]=o,e[15]=1,e}function TE(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function xE(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function ME(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function Th(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function AE(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function SE(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e}function CE(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function LE(e,t){var r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=e[8],f=e[9],u=e[10],v=e[11],d=e[12],y=e[13],m=e[14],E=e[15],T=t[0],x=t[1],A=t[2],C=t[3],S=t[4],$=t[5],z=t[6],I=t[7],D=t[8],P=t[9],H=t[10],F=t[11],R=t[12],w=t[13],Y=t[14],U=t[15];return Math.abs(r-T)<=N*Math.max(1,Math.abs(r),Math.abs(T))&&Math.abs(n-x)<=N*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(i-A)<=N*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(s-C)<=N*Math.max(1,Math.abs(s),Math.abs(C))&&Math.abs(o-S)<=N*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(a-$)<=N*Math.max(1,Math.abs(a),Math.abs($))&&Math.abs(l-z)<=N*Math.max(1,Math.abs(l),Math.abs(z))&&Math.abs(c-I)<=N*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(h-D)<=N*Math.max(1,Math.abs(h),Math.abs(D))&&Math.abs(f-P)<=N*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(u-H)<=N*Math.max(1,Math.abs(u),Math.abs(H))&&Math.abs(v-F)<=N*Math.max(1,Math.abs(v),Math.abs(F))&&Math.abs(d-R)<=N*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(y-w)<=N*Math.max(1,Math.abs(y),Math.abs(w))&&Math.abs(m-Y)<=N*Math.max(1,Math.abs(m),Math.abs(Y))&&Math.abs(E-U)<=N*Math.max(1,Math.abs(E),Math.abs(U))}var OE=yh,$E=Th;const PE=Object.freeze(Object.defineProperty({__proto__:null,add:ME,adjoint:J1,clone:Y1,copy:X1,create:q1,determinant:eE,equals:LE,exactEquals:CE,frob:xE,fromQuat:mE,fromQuat2:dE,fromRotation:cE,fromRotationTranslation:gh,fromRotationTranslationScale:pE,fromRotationTranslationScaleOrigin:vE,fromScaling:lE,fromTranslation:aE,fromValues:G1,fromXRotation:hE,fromYRotation:fE,fromZRotation:uE,frustum:_E,getRotation:bh,getScaling:wh,getTranslation:Eh,identity:_h,invert:Q1,lookAt:wE,mul:OE,multiply:yh,multiplyScalar:AE,multiplyScalarAndAdd:SE,ortho:EE,perspective:yE,perspectiveFromFieldOfView:gE,rotate:nE,rotateX:iE,rotateY:sE,rotateZ:oE,scale:rE,set:K1,str:TE,sub:$E,subtract:Th,targetTo:bE,translate:tE,transpose:Z1},Symbol.toStringTag,{value:"Module"}));function Oo(){var e=new j(3);return j!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function RE(e){var t=new j(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function xh(e){var t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)}function Xs(e,t,r){var n=new j(3);return n[0]=e,n[1]=t,n[2]=r,n}function NE(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function IE(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}function DE(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function Mh(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function Ah(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function Sh(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function zE(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function kE(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function HE(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function FE(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function VE(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function BE(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function WE(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function Ch(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.hypot(r,n,i)}function Lh(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i}function Oh(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function UE(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function jE(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function $h(e,t){var r=t[0],n=t[1],i=t[2],s=r*r+n*n+i*i;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function $o(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ci(e,t,r){var n=t[0],i=t[1],s=t[2],o=r[0],a=r[1],l=r[2];return e[0]=i*l-s*a,e[1]=s*o-n*l,e[2]=n*a-i*o,e}function qE(e,t,r,n){var i=t[0],s=t[1],o=t[2];return e[0]=i+n*(r[0]-i),e[1]=s+n*(r[1]-s),e[2]=o+n*(r[2]-o),e}function YE(e,t,r,n,i,s){var o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,c=o*(s-1),h=o*(3-2*s);return e[0]=t[0]*a+r[0]*l+n[0]*c+i[0]*h,e[1]=t[1]*a+r[1]*l+n[1]*c+i[1]*h,e[2]=t[2]*a+r[2]*l+n[2]*c+i[2]*h,e}function XE(e,t,r,n,i,s){var o=1-s,a=o*o,l=s*s,c=a*o,h=3*s*a,f=3*l*o,u=l*s;return e[0]=t[0]*c+r[0]*h+n[0]*f+i[0]*u,e[1]=t[1]*c+r[1]*h+n[1]*f+i[1]*u,e[2]=t[2]*c+r[2]*h+n[2]*f+i[2]*u,e}function GE(e,t){t=t||1;var r=je()*2*Math.PI,n=je()*2-1,i=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*i,e[1]=Math.sin(r)*i,e[2]=n*t,e}function KE(e,t,r){var n=t[0],i=t[1],s=t[2],o=r[3]*n+r[7]*i+r[11]*s+r[15];return o=o||1,e[0]=(r[0]*n+r[4]*i+r[8]*s+r[12])/o,e[1]=(r[1]*n+r[5]*i+r[9]*s+r[13])/o,e[2]=(r[2]*n+r[6]*i+r[10]*s+r[14])/o,e}function ZE(e,t,r){var n=t[0],i=t[1],s=t[2];return e[0]=n*r[0]+i*r[3]+s*r[6],e[1]=n*r[1]+i*r[4]+s*r[7],e[2]=n*r[2]+i*r[5]+s*r[8],e}function QE(e,t,r){var n=r[0],i=r[1],s=r[2],o=r[3],a=t[0],l=t[1],c=t[2],h=i*c-s*l,f=s*a-n*c,u=n*l-i*a,v=i*u-s*f,d=s*h-n*u,y=n*f-i*h,m=o*2;return h*=m,f*=m,u*=m,v*=2,d*=2,y*=2,e[0]=a+h+v,e[1]=l+f+d,e[2]=c+u+y,e}function JE(e,t,r,n){var i=[],s=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],s[0]=i[0],s[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),s[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function ew(e,t,r,n){var i=[],s=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],s[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),s[1]=i[1],s[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function tw(e,t,r,n){var i=[],s=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],s[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),s[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),s[2]=i[2],e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function rw(e,t){var r=e[0],n=e[1],i=e[2],s=t[0],o=t[1],a=t[2],l=Math.sqrt(r*r+n*n+i*i),c=Math.sqrt(s*s+o*o+a*a),h=l*c,f=h&&$o(e,t)/h;return Math.acos(Math.min(Math.max(f,-1),1))}function nw(e){return e[0]=0,e[1]=0,e[2]=0,e}function iw(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function sw(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function ow(e,t){var r=e[0],n=e[1],i=e[2],s=t[0],o=t[1],a=t[2];return Math.abs(r-s)<=N*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-o)<=N*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=N*Math.max(1,Math.abs(i),Math.abs(a))}var aw=Mh,lw=Ah,cw=Sh,hw=Ch,fw=Lh,Ph=xh,uw=Oh,dw=function(){var e=Oo();return function(t,r,n,i,s,o){var a,l;for(r||(r=3),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,a=n;a<l;a+=r)e[0]=t[a],e[1]=t[a+1],e[2]=t[a+2],s(e,e,o),t[a]=e[0],t[a+1]=e[1],t[a+2]=e[2];return t}}();const pw=Object.freeze(Object.defineProperty({__proto__:null,add:DE,angle:rw,bezier:XE,ceil:zE,clone:RE,copy:NE,create:Oo,cross:ci,dist:hw,distance:Ch,div:cw,divide:Sh,dot:$o,equals:ow,exactEquals:sw,floor:kE,forEach:dw,fromValues:Xs,hermite:YE,inverse:jE,len:Ph,length:xh,lerp:qE,max:FE,min:HE,mul:lw,multiply:Ah,negate:UE,normalize:$h,random:GE,rotateX:JE,rotateY:ew,rotateZ:tw,round:VE,scale:BE,scaleAndAdd:WE,set:IE,sqrDist:fw,sqrLen:uw,squaredDistance:Lh,squaredLength:Oh,str:iw,sub:aw,subtract:Mh,transformMat3:ZE,transformMat4:KE,transformQuat:QE,zero:nw},Symbol.toStringTag,{value:"Module"}));function Rh(){var e=new j(4);return j!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Nh(e){var t=new j(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Ih(e,t,r,n){var i=new j(4);return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i}function Dh(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function zh(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function kh(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function Hh(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function Fh(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function Vh(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function vw(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function mw(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function _w(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function yw(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function gw(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Bh(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function Ew(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}function Wh(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return Math.hypot(r,n,i,s)}function Uh(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return r*r+n*n+i*i+s*s}function Po(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.hypot(t,r,n,i)}function Ro(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}function ww(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function bw(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function jh(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],o=r*r+n*n+i*i+s*s;return o>0&&(o=1/Math.sqrt(o)),e[0]=r*o,e[1]=n*o,e[2]=i*o,e[3]=s*o,e}function qh(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Tw(e,t,r,n){var i=r[0]*n[1]-r[1]*n[0],s=r[0]*n[2]-r[2]*n[0],o=r[0]*n[3]-r[3]*n[0],a=r[1]*n[2]-r[2]*n[1],l=r[1]*n[3]-r[3]*n[1],c=r[2]*n[3]-r[3]*n[2],h=t[0],f=t[1],u=t[2],v=t[3];return e[0]=f*c-u*l+v*a,e[1]=-(h*c)+u*o-v*s,e[2]=h*l-f*o+v*i,e[3]=-(h*a)+f*s-u*i,e}function Yh(e,t,r,n){var i=t[0],s=t[1],o=t[2],a=t[3];return e[0]=i+n*(r[0]-i),e[1]=s+n*(r[1]-s),e[2]=o+n*(r[2]-o),e[3]=a+n*(r[3]-a),e}function xw(e,t){t=t||1;var r,n,i,s,o,a;do r=je()*2-1,n=je()*2-1,o=r*r+n*n;while(o>=1);do i=je()*2-1,s=je()*2-1,a=i*i+s*s;while(a>=1);var l=Math.sqrt((1-o)/a);return e[0]=t*r,e[1]=t*n,e[2]=t*i*l,e[3]=t*s*l,e}function Mw(e,t,r){var n=t[0],i=t[1],s=t[2],o=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*o,e[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*o,e[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*o,e[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*o,e}function Aw(e,t,r){var n=t[0],i=t[1],s=t[2],o=r[0],a=r[1],l=r[2],c=r[3],h=c*n+a*s-l*i,f=c*i+l*n-o*s,u=c*s+o*i-a*n,v=-o*n-a*i-l*s;return e[0]=h*c+v*-o+f*-l-u*-a,e[1]=f*c+v*-a+u*-o-h*-l,e[2]=u*c+v*-l+h*-a-f*-o,e[3]=t[3],e}function Sw(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function Cw(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function Xh(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function Gh(e,t){var r=e[0],n=e[1],i=e[2],s=e[3],o=t[0],a=t[1],l=t[2],c=t[3];return Math.abs(r-o)<=N*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=N*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-l)<=N*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-c)<=N*Math.max(1,Math.abs(s),Math.abs(c))}var Lw=Hh,Ow=Fh,$w=Vh,Pw=Wh,Rw=Uh,Nw=Po,Iw=Ro,Dw=function(){var e=Rh();return function(t,r,n,i,s,o){var a,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,a=n;a<l;a+=r)e[0]=t[a],e[1]=t[a+1],e[2]=t[a+2],e[3]=t[a+3],s(e,e,o),t[a]=e[0],t[a+1]=e[1],t[a+2]=e[2],t[a+3]=e[3];return t}}();const zw=Object.freeze(Object.defineProperty({__proto__:null,add:kh,ceil:vw,clone:Nh,copy:Dh,create:Rh,cross:Tw,dist:Pw,distance:Wh,div:$w,divide:Vh,dot:qh,equals:Gh,exactEquals:Xh,floor:mw,forEach:Dw,fromValues:Ih,inverse:bw,len:Nw,length:Po,lerp:Yh,max:yw,min:_w,mul:Ow,multiply:Fh,negate:ww,normalize:jh,random:xw,round:gw,scale:Bh,scaleAndAdd:Ew,set:zh,sqrDist:Rw,sqrLen:Iw,squaredDistance:Uh,squaredLength:Ro,str:Cw,sub:Lw,subtract:Hh,transformMat4:Mw,transformQuat:Aw,zero:Sw},Symbol.toStringTag,{value:"Module"}));function _i(){var e=new j(4);return j!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function kw(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Kh(e,t,r){r=r*.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function Hw(e,t){var r=Math.acos(t[3])*2,n=Math.sin(r/2);return n>N?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=1,e[1]=0,e[2]=0),r}function Fw(e,t){var r=Io(e,t);return Math.acos(2*r*r-1)}function Zh(e,t,r){var n=t[0],i=t[1],s=t[2],o=t[3],a=r[0],l=r[1],c=r[2],h=r[3];return e[0]=n*h+o*a+i*c-s*l,e[1]=i*h+o*l+s*a-n*c,e[2]=s*h+o*c+n*l-i*a,e[3]=o*h-n*a-i*l-s*c,e}function Qh(e,t,r){r*=.5;var n=t[0],i=t[1],s=t[2],o=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=n*l+o*a,e[1]=i*l+s*a,e[2]=s*l-i*a,e[3]=o*l-n*a,e}function Jh(e,t,r){r*=.5;var n=t[0],i=t[1],s=t[2],o=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=n*l-s*a,e[1]=i*l+o*a,e[2]=s*l+n*a,e[3]=o*l-i*a,e}function ef(e,t,r){r*=.5;var n=t[0],i=t[1],s=t[2],o=t[3],a=Math.sin(r),l=Math.cos(r);return e[0]=n*l+i*a,e[1]=i*l-n*a,e[2]=s*l+o*a,e[3]=o*l-s*a,e}function Vw(e,t){var r=t[0],n=t[1],i=t[2];return e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e}function tf(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],o=Math.sqrt(r*r+n*n+i*i),a=Math.exp(s),l=o>0?a*Math.sin(o)/o:0;return e[0]=r*l,e[1]=n*l,e[2]=i*l,e[3]=a*Math.cos(o),e}function rf(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],o=Math.sqrt(r*r+n*n+i*i),a=o>0?Math.atan2(o,s)/o:0;return e[0]=r*a,e[1]=n*a,e[2]=i*a,e[3]=.5*Math.log(r*r+n*n+i*i+s*s),e}function Bw(e,t,r){return rf(e,t),sf(e,e,r),tf(e,e),e}function hi(e,t,r,n){var i=t[0],s=t[1],o=t[2],a=t[3],l=r[0],c=r[1],h=r[2],f=r[3],u,v,d,y,m;return v=i*l+s*c+o*h+a*f,v<0&&(v=-v,l=-l,c=-c,h=-h,f=-f),1-v>N?(u=Math.acos(v),d=Math.sin(u),y=Math.sin((1-n)*u)/d,m=Math.sin(n*u)/d):(y=1-n,m=n),e[0]=y*i+m*l,e[1]=y*s+m*c,e[2]=y*o+m*h,e[3]=y*a+m*f,e}function Ww(e){var t=je(),r=je(),n=je(),i=Math.sqrt(1-t),s=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*r),e[1]=i*Math.cos(2*Math.PI*r),e[2]=s*Math.sin(2*Math.PI*n),e[3]=s*Math.cos(2*Math.PI*n),e}function Uw(e,t){var r=t[0],n=t[1],i=t[2],s=t[3],o=r*r+n*n+i*i+s*s,a=o?1/o:0;return e[0]=-r*a,e[1]=-n*a,e[2]=-i*a,e[3]=s*a,e}function jw(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function nf(e,t){var r=t[0]+t[4]+t[8],n;if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var s=(i+1)%3,o=(i+2)%3;n=Math.sqrt(t[i*3+i]-t[s*3+s]-t[o*3+o]+1),e[i]=.5*n,n=.5/n,e[3]=(t[s*3+o]-t[o*3+s])*n,e[s]=(t[s*3+i]+t[i*3+s])*n,e[o]=(t[o*3+i]+t[i*3+o])*n}return e}function qw(e,t,r,n){var i=.5*Math.PI/180;t*=i,r*=i,n*=i;var s=Math.sin(t),o=Math.cos(t),a=Math.sin(r),l=Math.cos(r),c=Math.sin(n),h=Math.cos(n);return e[0]=s*l*h-o*a*c,e[1]=o*a*h+s*l*c,e[2]=o*l*c-s*a*h,e[3]=o*l*h+s*a*c,e}function Yw(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var Xw=Nh,Gw=Ih,No=Dh,Kw=zh,Zw=kh,Qw=Zh,sf=Bh,Io=qh,Jw=Yh,Do=Po,eb=Do,zo=Ro,tb=zo,ko=jh,rb=Xh,nb=Gh,ib=function(){var e=Oo(),t=Xs(1,0,0),r=Xs(0,1,0);return function(n,i,s){var o=$o(i,s);return o<-.999999?(ci(e,t,i),Ph(e)<1e-6&&ci(e,r,i),$h(e,e),Kh(n,e,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(ci(e,i,s),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+o,ko(n,n))}}(),sb=function(){var e=_i(),t=_i();return function(r,n,i,s,o,a){return hi(e,n,o,a),hi(t,i,s,a),hi(r,e,t,2*a*(1-a)),r}}(),ob=function(){var e=ph();return function(t,r,n,i){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-r[0],e[5]=-r[1],e[8]=-r[2],ko(t,nf(t,e))}}();const ab=Object.freeze(Object.defineProperty({__proto__:null,add:Zw,calculateW:Vw,clone:Xw,conjugate:jw,copy:No,create:_i,dot:Io,equals:nb,exactEquals:rb,exp:tf,fromEuler:qw,fromMat3:nf,fromValues:Gw,getAngle:Fw,getAxisAngle:Hw,identity:kw,invert:Uw,len:eb,length:Do,lerp:Jw,ln:rf,mul:Qw,multiply:Zh,normalize:ko,pow:Bw,random:Ww,rotateX:Qh,rotateY:Jh,rotateZ:ef,rotationTo:ib,scale:sf,set:Kw,setAxes:ob,setAxisAngle:Kh,slerp:hi,sqlerp:sb,sqrLen:tb,squaredLength:zo,str:Yw},Symbol.toStringTag,{value:"Module"}));function lb(){var e=new j(8);return j!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function cb(e){var t=new j(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function hb(e,t,r,n,i,s,o,a){var l=new j(8);return l[0]=e,l[1]=t,l[2]=r,l[3]=n,l[4]=i,l[5]=s,l[6]=o,l[7]=a,l}function fb(e,t,r,n,i,s,o){var a=new j(8);a[0]=e,a[1]=t,a[2]=r,a[3]=n;var l=i*.5,c=s*.5,h=o*.5;return a[4]=l*n+c*r-h*t,a[5]=c*n+h*e-l*r,a[6]=h*n+l*t-c*e,a[7]=-l*e-c*t-h*r,a}function of(e,t,r){var n=r[0]*.5,i=r[1]*.5,s=r[2]*.5,o=t[0],a=t[1],l=t[2],c=t[3];return e[0]=o,e[1]=a,e[2]=l,e[3]=c,e[4]=n*c+i*l-s*a,e[5]=i*c+s*o-n*l,e[6]=s*c+n*a-i*o,e[7]=-n*o-i*a-s*l,e}function ub(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0]*.5,e[5]=t[1]*.5,e[6]=t[2]*.5,e[7]=0,e}function db(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function pb(e,t){var r=_i();bh(r,t);var n=new j(3);return Eh(n,t),of(e,r,n),e}function af(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function vb(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function mb(e,t,r,n,i,s,o,a,l){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e}var _b=No;function yb(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}var gb=No;function Eb(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function wb(e,t){var r=t[4],n=t[5],i=t[6],s=t[7],o=-t[0],a=-t[1],l=-t[2],c=t[3];return e[0]=(r*c+s*o+n*l-i*a)*2,e[1]=(n*c+s*a+i*o-r*l)*2,e[2]=(i*c+s*l+r*a-n*o)*2,e}function bb(e,t,r){var n=t[0],i=t[1],s=t[2],o=t[3],a=r[0]*.5,l=r[1]*.5,c=r[2]*.5,h=t[4],f=t[5],u=t[6],v=t[7];return e[0]=n,e[1]=i,e[2]=s,e[3]=o,e[4]=o*a+i*c-s*l+h,e[5]=o*l+s*a-n*c+f,e[6]=o*c+n*l-i*a+u,e[7]=-n*a-i*l-s*c+v,e}function Tb(e,t,r){var n=-t[0],i=-t[1],s=-t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=a*o+h*n+l*s-c*i,u=l*o+h*i+c*n-a*s,v=c*o+h*s+a*i-l*n,d=h*o-a*n-l*i-c*s;return Qh(e,t,r),n=e[0],i=e[1],s=e[2],o=e[3],e[4]=f*o+d*n+u*s-v*i,e[5]=u*o+d*i+v*n-f*s,e[6]=v*o+d*s+f*i-u*n,e[7]=d*o-f*n-u*i-v*s,e}function xb(e,t,r){var n=-t[0],i=-t[1],s=-t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=a*o+h*n+l*s-c*i,u=l*o+h*i+c*n-a*s,v=c*o+h*s+a*i-l*n,d=h*o-a*n-l*i-c*s;return Jh(e,t,r),n=e[0],i=e[1],s=e[2],o=e[3],e[4]=f*o+d*n+u*s-v*i,e[5]=u*o+d*i+v*n-f*s,e[6]=v*o+d*s+f*i-u*n,e[7]=d*o-f*n-u*i-v*s,e}function Mb(e,t,r){var n=-t[0],i=-t[1],s=-t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],f=a*o+h*n+l*s-c*i,u=l*o+h*i+c*n-a*s,v=c*o+h*s+a*i-l*n,d=h*o-a*n-l*i-c*s;return ef(e,t,r),n=e[0],i=e[1],s=e[2],o=e[3],e[4]=f*o+d*n+u*s-v*i,e[5]=u*o+d*i+v*n-f*s,e[6]=v*o+d*s+f*i-u*n,e[7]=d*o-f*n-u*i-v*s,e}function Ab(e,t,r){var n=r[0],i=r[1],s=r[2],o=r[3],a=t[0],l=t[1],c=t[2],h=t[3];return e[0]=a*o+h*n+l*s-c*i,e[1]=l*o+h*i+c*n-a*s,e[2]=c*o+h*s+a*i-l*n,e[3]=h*o-a*n-l*i-c*s,a=t[4],l=t[5],c=t[6],h=t[7],e[4]=a*o+h*n+l*s-c*i,e[5]=l*o+h*i+c*n-a*s,e[6]=c*o+h*s+a*i-l*n,e[7]=h*o-a*n-l*i-c*s,e}function Sb(e,t,r){var n=t[0],i=t[1],s=t[2],o=t[3],a=r[0],l=r[1],c=r[2],h=r[3];return e[0]=n*h+o*a+i*c-s*l,e[1]=i*h+o*l+s*a-n*c,e[2]=s*h+o*c+n*l-i*a,e[3]=o*h-n*a-i*l-s*c,a=r[4],l=r[5],c=r[6],h=r[7],e[4]=n*h+o*a+i*c-s*l,e[5]=i*h+o*l+s*a-n*c,e[6]=s*h+o*c+n*l-i*a,e[7]=o*h-n*a-i*l-s*c,e}function Cb(e,t,r,n){if(Math.abs(n)<N)return af(e,t);var i=Math.hypot(r[0],r[1],r[2]);n=n*.5;var s=Math.sin(n),o=s*r[0]/i,a=s*r[1]/i,l=s*r[2]/i,c=Math.cos(n),h=t[0],f=t[1],u=t[2],v=t[3];e[0]=h*c+v*o+f*l-u*a,e[1]=f*c+v*a+u*o-h*l,e[2]=u*c+v*l+h*a-f*o,e[3]=v*c-h*o-f*a-u*l;var d=t[4],y=t[5],m=t[6],E=t[7];return e[4]=d*c+E*o+y*l-m*a,e[5]=y*c+E*a+m*o-d*l,e[6]=m*c+E*l+d*a-y*o,e[7]=E*c-d*o-y*a-m*l,e}function Lb(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e}function lf(e,t,r){var n=t[0],i=t[1],s=t[2],o=t[3],a=r[4],l=r[5],c=r[6],h=r[7],f=t[4],u=t[5],v=t[6],d=t[7],y=r[0],m=r[1],E=r[2],T=r[3];return e[0]=n*T+o*y+i*E-s*m,e[1]=i*T+o*m+s*y-n*E,e[2]=s*T+o*E+n*m-i*y,e[3]=o*T-n*y-i*m-s*E,e[4]=n*h+o*a+i*c-s*l+f*T+d*y+u*E-v*m,e[5]=i*h+o*l+s*a-n*c+u*T+d*m+v*y-f*E,e[6]=s*h+o*c+n*l-i*a+v*T+d*E+f*m-u*y,e[7]=o*h-n*a-i*l-s*c+d*T-f*y-u*m-v*E,e}var Ob=lf;function $b(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e}var cf=Io;function Pb(e,t,r,n){var i=1-n;return cf(t,r)<0&&(n=-n),e[0]=t[0]*i+r[0]*n,e[1]=t[1]*i+r[1]*n,e[2]=t[2]*i+r[2]*n,e[3]=t[3]*i+r[3]*n,e[4]=t[4]*i+r[4]*n,e[5]=t[5]*i+r[5]*n,e[6]=t[6]*i+r[6]*n,e[7]=t[7]*i+r[7]*n,e}function Rb(e,t){var r=ki(t);return e[0]=-t[0]/r,e[1]=-t[1]/r,e[2]=-t[2]/r,e[3]=t[3]/r,e[4]=-t[4]/r,e[5]=-t[5]/r,e[6]=-t[6]/r,e[7]=t[7]/r,e}function Nb(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}var hf=Do,Ib=hf,ki=zo,Db=ki;function zb(e,t){var r=ki(t);if(r>0){r=Math.sqrt(r);var n=t[0]/r,i=t[1]/r,s=t[2]/r,o=t[3]/r,a=t[4],l=t[5],c=t[6],h=t[7],f=n*a+i*l+s*c+o*h;e[0]=n,e[1]=i,e[2]=s,e[3]=o,e[4]=(a-n*f)/r,e[5]=(l-i*f)/r,e[6]=(c-s*f)/r,e[7]=(h-o*f)/r}return e}function kb(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function Hb(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function Fb(e,t){var r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],h=t[0],f=t[1],u=t[2],v=t[3],d=t[4],y=t[5],m=t[6],E=t[7];return Math.abs(r-h)<=N*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(n-f)<=N*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(i-u)<=N*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-v)<=N*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(o-d)<=N*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-y)<=N*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(l-m)<=N*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(c-E)<=N*Math.max(1,Math.abs(c),Math.abs(E))}const Vb=Object.freeze(Object.defineProperty({__proto__:null,add:Lb,clone:cb,conjugate:Nb,copy:af,create:lb,dot:cf,equals:Fb,exactEquals:Hb,fromMat4:pb,fromRotation:db,fromRotationTranslation:of,fromRotationTranslationValues:fb,fromTranslation:ub,fromValues:hb,getDual:yb,getReal:_b,getTranslation:wb,identity:vb,invert:Rb,len:Ib,length:hf,lerp:Pb,mul:Ob,multiply:lf,normalize:zb,rotateAroundAxis:Cb,rotateByQuatAppend:Ab,rotateByQuatPrepend:Sb,rotateX:Tb,rotateY:xb,rotateZ:Mb,scale:$b,set:mb,setDual:Eb,setReal:gb,sqrLen:Db,squaredLength:ki,str:kb,translate:bb},Symbol.toStringTag,{value:"Module"}));function ff(){var e=new j(2);return j!=Float32Array&&(e[0]=0,e[1]=0),e}function Bb(e){var t=new j(2);return t[0]=e[0],t[1]=e[1],t}function Wb(e,t){var r=new j(2);return r[0]=e,r[1]=t,r}function Ub(e,t){return e[0]=t[0],e[1]=t[1],e}function jb(e,t,r){return e[0]=t,e[1]=r,e}function qb(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function uf(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function df(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function pf(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function Yb(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function Xb(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Gb(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function Kb(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function Zb(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function Qb(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function Jb(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}function vf(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.hypot(r,n)}function mf(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function _f(e){var t=e[0],r=e[1];return Math.hypot(t,r)}function yf(e){var t=e[0],r=e[1];return t*t+r*r}function eT(e,t){return e[0]=-t[0],e[1]=-t[1],e}function tT(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function rT(e,t){var r=t[0],n=t[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e}function nT(e,t){return e[0]*t[0]+e[1]*t[1]}function iT(e,t,r){var n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e}function sT(e,t,r,n){var i=t[0],s=t[1];return e[0]=i+n*(r[0]-i),e[1]=s+n*(r[1]-s),e}function oT(e,t){t=t||1;var r=je()*2*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function aT(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e}function lT(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function cT(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function hT(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}function fT(e,t,r,n){var i=t[0]-r[0],s=t[1]-r[1],o=Math.sin(n),a=Math.cos(n);return e[0]=i*a-s*o+r[0],e[1]=i*o+s*a+r[1],e}function uT(e,t){var r=e[0],n=e[1],i=t[0],s=t[1],o=Math.sqrt(r*r+n*n)*Math.sqrt(i*i+s*s),a=o&&(r*i+n*s)/o;return Math.acos(Math.min(Math.max(a,-1),1))}function dT(e){return e[0]=0,e[1]=0,e}function pT(e){return"vec2("+e[0]+", "+e[1]+")"}function vT(e,t){return e[0]===t[0]&&e[1]===t[1]}function mT(e,t){var r=e[0],n=e[1],i=t[0],s=t[1];return Math.abs(r-i)<=N*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-s)<=N*Math.max(1,Math.abs(n),Math.abs(s))}var _T=_f,yT=uf,gT=df,ET=pf,wT=vf,bT=mf,TT=yf,xT=function(){var e=ff();return function(t,r,n,i,s,o){var a,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,a=n;a<l;a+=r)e[0]=t[a],e[1]=t[a+1],s(e,e,o),t[a]=e[0],t[a+1]=e[1];return t}}();const MT=Object.freeze(Object.defineProperty({__proto__:null,add:qb,angle:uT,ceil:Yb,clone:Bb,copy:Ub,create:ff,cross:iT,dist:wT,distance:vf,div:ET,divide:pf,dot:nT,equals:mT,exactEquals:vT,floor:Xb,forEach:xT,fromValues:Wb,inverse:tT,len:_T,length:_f,lerp:sT,max:Kb,min:Gb,mul:gT,multiply:df,negate:eT,normalize:rT,random:oT,rotate:fT,round:Zb,scale:Qb,scaleAndAdd:Jb,set:jb,sqrDist:bT,sqrLen:TT,squaredDistance:mf,squaredLength:yf,str:pT,sub:yT,subtract:uf,transformMat2:aT,transformMat2d:lT,transformMat3:cT,transformMat4:hT,zero:dT},Symbol.toStringTag,{value:"Module"})),AT=Object.freeze(Object.defineProperty({__proto__:null,glMatrix:E0,mat2:j0,mat2d:v1,mat3:j1,mat4:PE,quat:ab,quat2:Vb,vec2:MT,vec3:pw,vec4:zw},Symbol.toStringTag,{value:"Module"})),me=dg(AT);function ST(e,t,r){return Math.min(Math.max(e,t),r)}var Wr=ST,CT=256,nl=256,Jn=Wr,LT=me.vec4,yi=me.vec3,Sr=me.mat4;function il(e,t,r){var n=e.createShader(t);if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw e.getShaderInfoLog(n);return n}function OT(e,t,r,n,i){var s=il(e,e.VERTEX_SHADER,t),o=il(e,e.FRAGMENT_SHADER,r),a=e.createProgram();if(e.attachShader(a,s),e.attachShader(a,o),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw e.getProgramInfoLog(a);for(var l=0;l<n.length;l++){var c=n[l];if(a[c]=e.getAttribLocation(a,c),a[c]===-1)throw new Error("Shader program has no "+c+" attribute")}for(var h=0;h<i.length;h++){var f=i[h];if(a[f]=e.getUniformLocation(a,f),a[f]===-1)throw new Error("Shader program has no "+f+" uniform")}return a}function $T(e,t){for(var r=e.getAttachedShaders(t),n=0;n<r.length;n++){var i=r[n];e.detachShader(t,i),e.deleteShader(i)}e.deleteProgram(t)}function bs(e,t,r,n){var i=e.createBuffer();return e.bindBuffer(t,i),e.bufferData(t,n,r),i}function PT(e,t,r,n){return{vertexIndices:bs(e,e.ELEMENT_ARRAY_BUFFER,e.STATIC_DRAW,new Uint16Array(t)),vertexPositions:bs(e,e.ARRAY_BUFFER,e.STATIC_DRAW,new Float32Array(r)),textureCoords:bs(e,e.ARRAY_BUFFER,e.STATIC_DRAW,new Float32Array(n))}}function RT(e,t){e.deleteBuffer(t.vertexIndices),e.deleteBuffer(t.vertexPositions),e.deleteBuffer(t.textureCoords)}function NT(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=0;n<r;n++)e.enableVertexAttribArray(n)}function IT(e,t){for(var r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=0;n<r;n++)e.disableVertexAttribArray(n)}function DT(e,t,r){e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,r._texture),e.uniform1i(t.uSampler,0)}function zT(e,t,r,n){var i=((r+1)*nl-n)/(nl*CT);e.uniform1f(t.uDepth,i)}var kT=1,HT=LT.create(),gf=Sr.create();Sr.identity(gf);function FT(e,t,r){var n=kT;t&&t.opacity!=null&&(n=t.opacity),e.uniform1f(r.opacity,n);var i=HT;t&&t.colorOffset&&(i=t.colorOffset),e.uniform4fv(r.colorOffset,i);var s=gf;t&&t.colorMatrix&&(s=t.colorMatrix),e.uniformMatrix4fv(r.colorMatrix,!1,s)}var sl=yi.create(),ol=yi.create();function VT(e,t,r,n){if(r.x===0&&r.width===1&&r.y===0&&r.height===1){e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),Sr.identity(n);return}var i=r.x,s=Jn(i,0,1),o=s-i,a=1-s,l=Jn(r.width-o,0,a),c=r.width-l,h=1-r.height-r.y,f=Jn(h,0,1),u=f-h,v=1-f,d=Jn(r.height-u,0,v),y=r.height-d;yi.set(ol,r.width/l,r.height/d,1),yi.set(sl,(c-o)/l,(y-u)/d,0),Sr.identity(n),Sr.translate(n,n,sl),Sr.scale(n,n,ol),e.viewport(e.drawingBufferWidth*s,e.drawingBufferHeight*f,e.drawingBufferWidth*l,e.drawingBufferHeight*d)}var Ef={createShaderProgram:OT,destroyShaderProgram:$T,createConstantBuffers:PT,destroyConstantBuffers:RT,enableAttributes:NT,disableAttributes:IT,setTexture:DT,setDepth:zT,setViewport:VT,setupPixelEffectUniforms:FT},BT=["attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float uDepth;","uniform mat4 uViewportMatrix;","uniform mat4 uProjMatrix;","varying vec2 vTextureCoord;","void main(void) {","  gl_Position = uViewportMatrix * uProjMatrix * vec4(aVertexPosition.xy, 0.0, 1.0);","  gl_Position.z = uDepth * gl_Position.w;","  vTextureCoord = aTextureCoord;","}"].join(`
`),WT=["#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uSampler;","uniform float uOpacity;","uniform vec4 uColorOffset;","uniform mat4 uColorMatrix;","varying vec2 vTextureCoord;","void main(void) {","  vec4 color = texture2D(uSampler, vTextureCoord) * uColorMatrix + uColorOffset;","  gl_FragColor = vec4(color.rgba * uOpacity);","}"].join(`
`),Kt=me.mat4,al=me.vec3,UT=ee,st=Ef,jT=st.createConstantBuffers,qT=st.destroyConstantBuffers,YT=st.createShaderProgram,XT=st.destroyShaderProgram,GT=st.enableAttributes,KT=st.disableAttributes,ZT=st.setViewport,QT=st.setupPixelEffectUniforms,JT=st.setDepth,ex=st.setTexture,tx=BT,rx=WT,wf=[0,1,2,0,2,3],nx=[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],ix=[0,0,1,0,1,1,0,1],sx=["aVertexPosition","aTextureCoord"],ox=["uDepth","uOpacity","uSampler","uProjMatrix","uViewportMatrix","uColorOffset","uColorMatrix"];function xn(e){this.gl=e,this.projMatrix=Kt.create(),this.viewportMatrix=Kt.create(),this.translateVector=al.create(),this.scaleVector=al.create(),this.constantBuffers=jT(e,wf,nx,ix),this.shaderProgram=YT(e,tx,rx,sx,ox)}xn.prototype.destroy=function(){qT(this.gl,this.constantBuffers),XT(this.gl,this.shaderProgram),UT(this)};xn.prototype.startLayer=function(e,t){var r=this.gl,n=this.shaderProgram,i=this.constantBuffers,s=this.viewportMatrix;r.useProgram(n),GT(r,n),ZT(r,e,t,s),r.uniformMatrix4fv(n.uViewportMatrix,!1,s),r.bindBuffer(r.ARRAY_BUFFER,i.vertexPositions),r.vertexAttribPointer(n.aVertexPosition,3,r.FLOAT,r.FALSE,0,0),r.bindBuffer(r.ARRAY_BUFFER,i.textureCoords),r.vertexAttribPointer(n.aTextureCoord,2,r.FLOAT,r.FALSE,0,0),QT(r,e.effects(),{opacity:n.uOpacity,colorOffset:n.uColorOffset,colorMatrix:n.uColorMatrix})};xn.prototype.endLayer=function(e,t){var r=this.gl,n=this.shaderProgram;KT(r,n)};xn.prototype.renderTile=function(e,t,r,n){var i=this.gl,s=this.shaderProgram,o=this.constantBuffers,a=this.projMatrix,l=this.translateVector,c=this.scaleVector;l[0]=e.centerX(),l[1]=e.centerY(),l[2]=-.5,c[0]=e.scaleX(),c[1]=e.scaleY(),c[2]=1,Kt.copy(a,r.view().projection()),Kt.rotateX(a,a,e.rotX()),Kt.rotateY(a,a,e.rotY()),Kt.translate(a,a,l),Kt.scale(a,a,c),i.uniformMatrix4fv(s.uProjMatrix,!1,a),JT(i,s,n,e.z),ex(i,s,t),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,o.vertexIndices),i.drawElements(i.TRIANGLES,wf.length,i.UNSIGNED_SHORT,0)};var bf=xn,ax=bf,lx=it;function Tf(){this.constructor.super_.apply(this,arguments)}lx(Tf,ax);var xf=Tf,cx=bf,hx=it;function Mf(){this.constructor.super_.apply(this,arguments)}hx(Mf,cx);var Af=Mf,fx=["attribute vec3 aVertexPosition;","uniform float uDepth;","uniform mat4 uViewportMatrix;","uniform mat4 uInvProjMatrix;","varying vec4 vRay;","void main(void) {","  vRay = uInvProjMatrix * vec4(aVertexPosition.xy, 1.0, 1.0);","  gl_Position = uViewportMatrix * vec4(aVertexPosition.xy, uDepth, 1.0);","}"].join(`
`),ux=["#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float","#endif","uniform sampler2D uSampler;","uniform float uOpacity;","uniform float uTextureX;","uniform float uTextureY;","uniform float uTextureWidth;","uniform float uTextureHeight;","uniform vec4 uColorOffset;","uniform mat4 uColorMatrix;","varying vec4 vRay;","const float PI = 3.14159265358979323846264;","void main(void) {","  float r = inversesqrt(vRay.x * vRay.x + vRay.y * vRay.y + vRay.z * vRay.z);","  float phi  = acos(vRay.y * r);","  float theta = atan(vRay.x, -1.0*vRay.z);","  float s = 0.5 + 0.5 * theta / PI;","  float t = 1.0 - phi / PI;","  s = s * uTextureWidth + uTextureX;","  t = t * uTextureHeight + uTextureY;","  vec4 color = texture2D(uSampler, vec2(s, t)) * uColorMatrix + uColorOffset;","  gl_FragColor = vec4(color.rgba * uOpacity);","}"].join(`
`),gi=me.mat4,dx=ee,ot=Ef,px=ot.createConstantBuffers,vx=ot.destroyConstantBuffers,mx=ot.createShaderProgram,_x=ot.destroyShaderProgram,yx=ot.enableAttributes,gx=ot.disableAttributes,Ex=ot.setViewport,wx=ot.setupPixelEffectUniforms,bx=ot.setDepth,Tx=ot.setTexture,xx=fx,Mx=ux,Sf=[0,1,2,0,2,3],Ax=[-1,-1,0,1,-1,0,1,1,0,-1,1,0],Sx=[0,0,1,0,1,1,0,1],Cx=["aVertexPosition"],Lx=["uDepth","uOpacity","uSampler","uInvProjMatrix","uViewportMatrix","uColorOffset","uColorMatrix","uTextureX","uTextureY","uTextureWidth","uTextureHeight"];function Mn(e){this.gl=e,this.invProjMatrix=gi.create(),this.viewportMatrix=gi.create(),this.constantBuffers=px(e,Sf,Ax,Sx),this.shaderProgram=mx(e,xx,Mx,Cx,Lx)}Mn.prototype.destroy=function(){vx(this.gl,this.constantBuffers),_x(this.gl,this.shaderProgram),dx(this)};Mn.prototype.startLayer=function(e,t){var r=this.gl,n=this.shaderProgram,i=this.constantBuffers,s=this.invProjMatrix,o=this.viewportMatrix;r.useProgram(n),yx(r,n),Ex(r,e,t,o),r.uniformMatrix4fv(n.uViewportMatrix,!1,o),r.bindBuffer(r.ARRAY_BUFFER,i.vertexPositions),r.vertexAttribPointer(n.aVertexPosition,3,r.FLOAT,r.FALSE,0,0),r.bindBuffer(r.ARRAY_BUFFER,i.textureCoords),gi.copy(s,e.view().projection()),gi.invert(s,s),r.uniformMatrix4fv(n.uInvProjMatrix,!1,s);var a=e.effects().textureCrop||{},l=a.x!=null?a.x:0,c=a.y!=null?a.y:0,h=a.width!=null?a.width:1,f=a.height!=null?a.height:1;r.uniform1f(n.uTextureX,l),r.uniform1f(n.uTextureY,c),r.uniform1f(n.uTextureWidth,h),r.uniform1f(n.uTextureHeight,f),wx(r,e.effects(),{opacity:n.uOpacity,colorOffset:n.uColorOffset,colorMatrix:n.uColorMatrix})};Mn.prototype.endLayer=function(e,t){var r=this.gl,n=this.shaderProgram;gx(r,n)};Mn.prototype.renderTile=function(e,t,r,n){var i=this.gl,s=this.shaderProgram,o=this.constantBuffers;bx(i,s,n,e.z),Tx(i,s,t),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,o.vertexIndices),i.drawElements(i.TRIANGLES,Sf.length,i.UNSIGNED_SHORT,0)};var Cf=Mn,Ox=xf,$x=Af,Px=Cf;function Rx(e){switch(e.type){case"webgl":e.registerRenderer("flat","flat",$x),e.registerRenderer("cube","rectilinear",Ox),e.registerRenderer("equirect","rectilinear",Px);break;default:throw new Error("Unknown stage type: "+e.type)}}var Lf=Rx;function Nx(){for(var e=0,t=0;t<arguments.length;t++){var r=arguments[t];e+=r,e+=r<<10,e^=r>>6}return e+=e<<3,e^=e>>11,e+=e<<15,e>=0?e:-e}var Hi=Nx;function Ix(e,t){return(+e%(t=+t)+t)%t}var Bt=Ix,Ho=Bt,Dx=64;function cr(e){if(e!=null&&(!isFinite(e)||Math.floor(e)!==e||e<1))throw new Error("Set: invalid capacity");this._capacity=this._capacity||Dx,this._buckets=[];for(var t=0;t<this._capacity;t++)this._buckets.push([]);this._size=0}cr.prototype.add=function(e){for(var t=Ho(e.hash(),this._capacity),r=this._buckets[t],n=0;n<r.length;n++){var i=r[n];if(e.equals(i))return r[n]=e,i}return r.push(e),this._size++,null};cr.prototype.remove=function(e){for(var t=Ho(e.hash(),this._capacity),r=this._buckets[t],n=0;n<r.length;n++){var i=r[n];if(e.equals(i)){for(var s=n;s<r.length-1;s++)r[s]=r[s+1];return r.length=r.length-1,this._size--,i}}return null};cr.prototype.has=function(e){for(var t=Ho(e.hash(),this._capacity),r=this._buckets[t],n=0;n<r.length;n++){var i=r[n];if(e.equals(i))return!0}return!1};cr.prototype.size=function(){return this._size};cr.prototype.clear=function(){for(var e=0;e<this._capacity;e++)this._buckets[e].length=0;this._size=0};cr.prototype.forEach=function(e){for(var t=0,r=0;r<this._capacity;r++)for(var n=this._buckets[r],i=0;i<n.length;i++)e(n[i]),t+=1;return t};var Of=cr,zx=Of;function Fo(){this._stack=[],this._visited=new zx,this._vertices=null}Fo.prototype.search=function(e,t,r){var n=this._stack,i=this._visited,s=this._vertices,o=0;for(this._clear(),n.push(t);n.length>0;){var a=n.pop();if(!i.has(a)&&e.intersects(a.vertices(s))){i.add(a);for(var l=a.neighbors(),c=0;c<l.length;c++)n.push(l[c]);r.push(a),o++}}return this._vertices=s,this._clear(),o};Fo.prototype._clear=function(){this._stack.length=0,this._visited.clear()};var $f=Fo,kx=Bt;function Tt(e){if(!isFinite(e)||Math.floor(e)!==e||e<0)throw new Error("LruMap: invalid capacity");this._capacity=e,this._keys=new Array(this._capacity),this._values=new Array(this._capacity),this._start=0,this._size=0}Tt.prototype._index=function(e){return kx(this._start+e,this._capacity)};Tt.prototype.get=function(e){for(var t=0;t<this._size;t++){var r=this._keys[this._index(t)];if(e.equals(r))return this._values[this._index(t)]}return null};Tt.prototype.set=function(e,t){if(this._capacity===0)return e;this.del(e);var r=this._size===this._capacity?this._keys[this._index(0)]:null;return this._keys[this._index(this._size)]=e,this._values[this._index(this._size)]=t,this._size<this._capacity?this._size++:this._start=this._index(1),r};Tt.prototype.del=function(e){for(var t=0;t<this._size;t++)if(e.equals(this._keys[this._index(t)])){for(var r=this._values[this._index(t)],n=t;n<this._size-1;n++)this._keys[this._index(n)]=this._keys[this._index(n+1)],this._values[this._index(n)]=this._values[this._index(n+1)];return this._size--,r}return null};Tt.prototype.has=function(e){for(var t=0;t<this._size;t++)if(e.equals(this._keys[this._index(t)]))return!0;return!1};Tt.prototype.size=function(){return this._size};Tt.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._start=0,this._size=0};Tt.prototype.forEach=function(e){for(var t=0,r=0;r<this._size;r++)e(this._keys[this._index(r)],this._values[this._index(r)]),t+=1;return t};var Pf=Tt;function Fi(e){this._fallbackOnly=!!e.fallbackOnly}Fi.prototype.numHorizontalTiles=function(){return Math.ceil(this.width()/this.tileWidth())};Fi.prototype.numVerticalTiles=function(){return Math.ceil(this.height()/this.tileHeight())};Fi.prototype.fallbackOnly=function(){return this._fallbackOnly};var Vo=Fi;function Hx(e,t){return e<t?-1:e>t?1:0}var An=Hx,Fx=An;function Vx(e,t){for(var r=[],n=0;n<e.length;n++)r.push(new t(e[n]));return r.sort(function(i,s){return Fx(i.width(),s.width())}),r}function Bx(e){for(var t=[],r=0;r<e.length;r++)e[r]._fallbackOnly||t.push(e[r]);if(!t.length)throw new Error("No selectable levels in list");return t}var Sn={makeLevelList:Vx,makeSelectableLevelList:Bx};function Wx(e){var t=typeof e;if(t==="object"){if(e===null)return"null";if(Object.prototype.toString.call(e)==="[object Array]")return"array";if(Object.prototype.toString.call(e)==="[object RegExp]")return"regexp"}return t}var Cn=Wx,Ux=it,jx=Hi,qx=$f,Yx=Pf,Xx=Vo,Gx=Sn.makeLevelList,Kx=Sn.makeSelectableLevelList,Ei=Wr,ei=An,Zx=Cn,we=me.vec3,Gs=me.vec4,Qx=64,ir="fudlrb",sr={f:{x:0,y:0},b:{x:0,y:Math.PI},l:{x:0,y:Math.PI/2},r:{x:0,y:-Math.PI/2},u:{x:Math.PI/2,y:0},d:{x:-Math.PI/2,y:0}},Ts=we.create();function un(e,t,r,n){t&&we.rotateZ(e,e,Ts,t),r&&we.rotateX(e,e,Ts,r),n&&we.rotateY(e,e,Ts,n)}var Ks={};for(var xs=0;xs<ir.length;xs++){var ll=ir[xs],cl=sr[ll],hl=we.fromValues(0,0,-1);un(hl,0,cl.x,cl.y),Ks[ll]=hl}var ti={f:["l","r","u","d"],b:["r","l","u","d"],l:["b","f","u","d"],r:["f","b","u","d"],u:["l","r","b","f"],d:["l","r","f","b"]},Ms=[[0,1],[1,0],[0,-1],[-1,0]];function ie(e,t,r,n,i){this.face=e,this.x=t,this.y=r,this.z=n,this._geometry=i,this._level=i.levelList[n]}ie.prototype.rotX=function(){return sr[this.face].x};ie.prototype.rotY=function(){return sr[this.face].y};ie.prototype.centerX=function(){return(this.x+.5)/this._level.numHorizontalTiles()-.5};ie.prototype.centerY=function(){return .5-(this.y+.5)/this._level.numVerticalTiles()};ie.prototype.scaleX=function(){return 1/this._level.numHorizontalTiles()};ie.prototype.scaleY=function(){return 1/this._level.numVerticalTiles()};ie.prototype.vertices=function(e){e||(e=[we.create(),we.create(),we.create(),we.create()]);var t=sr[this.face];function r(a,l,c){we.set(a,l,c,-.5),un(a,0,t.x,t.y)}var n=this.centerX()-this.scaleX()/2,i=this.centerX()+this.scaleX()/2,s=this.centerY()-this.scaleY()/2,o=this.centerY()+this.scaleY()/2;return r(e[0],n,o),r(e[1],i,o),r(e[2],i,s),r(e[3],n,s),e};ie.prototype.parent=function(){if(this.z===0)return null;var e=this.face,t=this.z,r=this.x,n=this.y,i=this._geometry,s=i.levelList[t],o=i.levelList[t-1],a=Math.floor(r/s.numHorizontalTiles()*o.numHorizontalTiles()),l=Math.floor(n/s.numVerticalTiles()*o.numVerticalTiles()),c=t-1;return new ie(e,a,l,c,i)};ie.prototype.children=function(e){if(this.z===this._geometry.levelList.length-1)return null;var t=this.face,r=this.z,n=this.x,i=this.y,s=this._geometry,o=s.levelList[r],a=s.levelList[r+1],l=a.numHorizontalTiles()/o.numHorizontalTiles(),c=a.numVerticalTiles()/o.numVerticalTiles();e=e||[];for(var h=0;h<l;h++)for(var f=0;f<c;f++){var u=l*n+h,v=c*i+f,d=r+1;e.push(new ie(t,u,v,d,s))}return e};ie.prototype.neighbors=function(){var e=this._geometry,t=e._neighborsCache,r=t.get(this);if(r)return r;for(var n=e._vec,i=this.face,s=this.x,o=this.y,a=this.z,l=this._level,c=l.numHorizontalTiles(),h=l.numVerticalTiles(),f=[],u=0;u<Ms.length;u++){var v=Ms[u][0],d=Ms[u][1],y=s+v,m=o+d,E=a,T=i;if(y<0||y>=c||m<0||m>=h){var x=this.centerX(),A=this.centerY();y<0?(we.set(n,-.5,A,-.5),T=ti[i][0]):y>=c?(we.set(n,.5,A,-.5),T=ti[i][1]):m<0?(we.set(n,x,.5,-.5),T=ti[i][2]):m>=h&&(we.set(n,x,-.5,-.5),T=ti[i][3]);var C;C=sr[i],un(n,0,C.x,C.y),C=sr[T],un(n,0,-C.x,-C.y),y=Ei(Math.floor((.5+n[0])*c),0,c-1),m=Ei(Math.floor((.5-n[1])*h),0,h-1)}f.push(new ie(T,y,m,E,e))}return t.set(this,f),f};ie.prototype.hash=function(){return jx(ir.indexOf(this.face),this.z,this.y,this.x)};ie.prototype.equals=function(e){return this._geometry===e._geometry&&this.face===e.face&&this.z===e.z&&this.y===e.y&&this.x===e.x};ie.prototype.cmp=function(e){return ei(this.z,e.z)||ei(ir.indexOf(this.face),ir.indexOf(e.face))||ei(this.y,e.y)||ei(this.x,e.x)};ie.prototype.str=function(){return"CubeTile("+tile.face+", "+tile.x+", "+tile.y+", "+tile.z+")"};function hr(e){if(this.constructor.super_.call(this,e),this._size=e.size,this._tileSize=e.tileSize,this._size%this._tileSize!==0)throw new Error("Level size is not multiple of tile size: "+this._size+" "+this._tileSize)}Ux(hr,Xx);hr.prototype.width=function(){return this._size};hr.prototype.height=function(){return this._size};hr.prototype.tileWidth=function(){return this._tileSize};hr.prototype.tileHeight=function(){return this._tileSize};hr.prototype._validateWithParentLevel=function(e){var t=this.width(),r=this.height(),n=this.tileWidth(),i=this.tileHeight(),s=this.numHorizontalTiles(),o=this.numVerticalTiles(),a=e.width(),l=e.height(),c=e.tileWidth(),h=e.tileHeight(),f=e.numHorizontalTiles(),u=e.numVerticalTiles();if(t%a!==0)throw new Error("Level width must be multiple of parent level: "+t+" vs. "+a);if(r%l!==0)throw new Error("Level height must be multiple of parent level: "+r+" vs. "+l);if(s%f!==0)throw new Error("Number of horizontal tiles must be multiple of parent level: "+s+" ("+t+"/"+n+") vs. "+f+" ("+a+"/"+c+")");if(o%u!==0)throw new Error("Number of vertical tiles must be multiple of parent level: "+o+" ("+r+"/"+i+") vs. "+u+" ("+l+"/"+h+")")};function yt(e){if(Zx(e)!=="array")throw new Error("Level list must be an array");this.levelList=Gx(e,hr),this.selectableLevelList=Kx(this.levelList);for(var t=1;t<this.levelList.length;t++)this.levelList[t]._validateWithParentLevel(this.levelList[t-1]);this._tileSearcher=new qx,this._neighborsCache=new Yx(Qx),this._vec=Gs.create(),this._viewSize={}}yt.prototype.maxTileSize=function(){for(var e=0,t=0;t<this.levelList.length;t++){var r=this.levelList[t];e=Math.max(e,r.tileWidth,r.tileHeight)}return e};yt.prototype.levelTiles=function(e,t){var r=this.levelList.indexOf(e),n=e.numHorizontalTiles()-1,i=e.numVerticalTiles()-1;t=t||[];for(var s=0;s<ir.length;s++)for(var o=ir[s],a=0;a<=n;a++)for(var l=0;l<=i;l++)t.push(new ie(o,a,l,r,this));return t};yt.prototype._closestTile=function(e,t){var r=this._vec;Gs.set(r,0,0,1,1),Gs.transformMat4(r,r,e.inverseProjection());var n=1/0,i=null;for(var s in Ks){var o=Ks[s],a=1-we.dot(o,r);a<n&&(n=a,i=s)}for(var l=Math.max(Math.abs(r[0]),Math.abs(r[1]),Math.abs(r[2]))/.5,c=0;c<3;c++)r[c]=r[c]/l;var h=sr[i];un(r,0,-h.x,-h.y);var f=this.levelList.indexOf(t),u=t.numHorizontalTiles(),v=t.numVerticalTiles(),d=Ei(Math.floor((.5+r[0])*u),0,u-1),y=Ei(Math.floor((.5-r[1])*v),0,v-1);return new ie(i,d,y,f,this)};yt.prototype.visibleTiles=function(e,t,r){var n=this._viewSize,i=this._tileSearcher;if(r=r||[],e.size(n),n.width===0||n.height===0)return r;var s=this._closestTile(e,t),o=i.search(e,s,r);if(!o)throw new Error("Starting tile is not visible");return r};yt.Tile=yt.prototype.Tile=ie;yt.type=yt.prototype.type="cube";ie.type=ie.prototype.type="cube";var Jx=yt,e2=it,t2=Hi,r2=$f,n2=Pf,i2=Vo,s2=Sn.makeLevelList,o2=Sn.makeSelectableLevelList,fl=Wr,Rf=Bt,As=An,a2=Cn,$t=me.vec2,Zs=me.vec4,l2=64,Ss=[[0,1],[1,0],[0,-1],[-1,0]];function K(e,t,r,n){this.x=e,this.y=t,this.z=r,this._geometry=n,this._level=n.levelList[r]}K.prototype.rotX=function(){return 0};K.prototype.rotY=function(){return 0};K.prototype.centerX=function(){var e=this._level.width(),t=this._level.tileWidth();return(this.x*t+.5*this.width())/e-.5};K.prototype.centerY=function(){var e=this._level.height(),t=this._level.tileHeight();return .5-(this.y*t+.5*this.height())/e};K.prototype.scaleX=function(){var e=this._level.width();return this.width()/e};K.prototype.scaleY=function(){var e=this._level.height();return this.height()/e};K.prototype.width=function(){var e=this._level.width(),t=this._level.tileWidth();if(this.x===this._level.numHorizontalTiles()-1){var r=Rf(e,t);return r||t}else return t};K.prototype.height=function(){var e=this._level.height(),t=this._level.tileHeight();if(this.y===this._level.numVerticalTiles()-1){var r=Rf(e,t);return r||t}else return t};K.prototype.levelWidth=function(){return this._level.width()};K.prototype.levelHeight=function(){return this._level.height()};K.prototype.vertices=function(e){e||(e=[$t.create(),$t.create(),$t.create(),$t.create()]);var t=this.centerX()-this.scaleX()/2,r=this.centerX()+this.scaleX()/2,n=this.centerY()-this.scaleY()/2,i=this.centerY()+this.scaleY()/2;return $t.set(e[0],t,i),$t.set(e[1],r,i),$t.set(e[2],r,n),$t.set(e[3],t,n),e};K.prototype.parent=function(){if(this.z===0)return null;var e=this._geometry,t=this.z-1,r=Math.floor(this.x/2),n=Math.floor(this.y/2);return new K(r,n,t,e)};K.prototype.children=function(e){if(this.z===this._geometry.levelList.length-1)return null;var t=this._geometry,r=this.z+1;return e=e||[],e.push(new K(2*this.x,2*this.y,r,t)),e.push(new K(2*this.x,2*this.y+1,r,t)),e.push(new K(2*this.x+1,2*this.y,r,t)),e.push(new K(2*this.x+1,2*this.y+1,r,t)),e};K.prototype.neighbors=function(){var e=this._geometry,t=e._neighborsCache,r=t.get(this);if(r)return r;for(var n=this.x,i=this.y,s=this.z,o=this._level,a=o.numHorizontalTiles()-1,l=o.numVerticalTiles()-1,c=[],h=0;h<Ss.length;h++){var f=Ss[h][0],u=Ss[h][1],v=n+f,d=i+u,y=s;0<=v&&v<=a&&0<=d&&d<=l&&c.push(new K(v,d,y,e))}return t.set(this,c),c};K.prototype.hash=function(){return t2(this.z,this.y,this.x)};K.prototype.equals=function(e){return this._geometry===e._geometry&&this.z===e.z&&this.y===e.y&&this.x===e.x};K.prototype.cmp=function(e){return As(this.z,e.z)||As(this.y,e.y)||As(this.x,e.x)};K.prototype.str=function(){return"FlatTile("+tile.x+", "+tile.y+", "+tile.z+")"};function fr(e){this.constructor.super_.call(this,e),this._width=e.width,this._height=e.height,this._tileWidth=e.tileWidth,this._tileHeight=e.tileHeight}e2(fr,i2);fr.prototype.width=function(){return this._width};fr.prototype.height=function(){return this._height};fr.prototype.tileWidth=function(){return this._tileWidth};fr.prototype.tileHeight=function(){return this._tileHeight};fr.prototype._validateWithParentLevel=function(e){var t=this.width(),r=this.height(),n=this.tileWidth(),i=this.tileHeight(),s=e.width(),o=e.height(),a=e.tileWidth(),l=e.tileHeight();if(t%s!==0)return new Error("Level width must be multiple of parent level: "+t+" vs. "+s);if(r%o!==0)return new Error("Level height must be multiple of parent level: "+r+" vs. "+o);if(n%a!==0)return new Error("Level tile width must be multiple of parent level: "+n+" vs. "+a);if(i%l!==0)return new Error("Level tile height must be multiple of parent level: "+i+" vs. "+l)};function gt(e){if(a2(e)!=="array")throw new Error("Level list must be an array");this.levelList=s2(e,fr),this.selectableLevelList=o2(this.levelList);for(var t=1;t<this.levelList.length;t++)this.levelList[t]._validateWithParentLevel(this.levelList[t-1]);this._tileSearcher=new r2,this._neighborsCache=new n2(l2),this._vec=Zs.create(),this._viewSize={}}gt.prototype.maxTileSize=function(){for(var e=0,t=0;t<this.levelList.length;t++){var r=this.levelList[t];e=Math.max(e,r.tileWidth,r.tileHeight)}return e};gt.prototype.levelTiles=function(e,t){var r=this.levelList.indexOf(e),n=e.numHorizontalTiles()-1,i=e.numVerticalTiles()-1;t||(t=[]);for(var s=0;s<=n;s++)for(var o=0;o<=i;o++)t.push(new K(s,o,r,this));return t};gt.prototype._closestTile=function(e,t){var r=this._vec;Zs.set(r,0,0,1,1),Zs.transformMat4(r,r,e.inverseProjection());var n=.5+r[0],i=.5-r[1],s=this.levelList.indexOf(t),o=t.width(),a=t.height(),l=t.tileWidth(),c=t.tileHeight(),h=t.numHorizontalTiles(),f=t.numVerticalTiles(),u=fl(Math.floor(n*o/l),0,h-1),v=fl(Math.floor(i*a/c),0,f-1);return new K(u,v,s,this)};gt.prototype.visibleTiles=function(e,t,r){var n=this._viewSize,i=this._tileSearcher;if(r=r||[],e.size(n),n.width===0||n.height===0)return r;var s=this._closestTile(e,t),o=i.search(e,s,r);if(!o)throw new Error("Starting tile is not visible");return r};gt.Tile=gt.prototype.Tile=K;gt.type=gt.prototype.type="flat";K.type=K.prototype.type="flat";var c2=gt,h2=it,f2=Hi,u2=An,ul=Sn,d2=Vo,p2=Cn;function ce(e,t){this.z=e,this._geometry=t,this._level=t.levelList[e]}ce.prototype.rotX=function(){return 0};ce.prototype.rotY=function(){return 0};ce.prototype.centerX=function(){return .5};ce.prototype.centerY=function(){return .5};ce.prototype.scaleX=function(){return 1};ce.prototype.scaleY=function(){return 1};ce.prototype.parent=function(){return this.z===0?null:new ce(this.z-1,this._geometry)};ce.prototype.children=function(e){return this.z===this._geometry.levelList.length-1?null:(e=e||[],e.push(new ce(this.z+1,this._geometry)),e)};ce.prototype.neighbors=function(){return[]};ce.prototype.hash=function(){return f2(this.z)};ce.prototype.equals=function(e){return this._geometry===e._geometry&&this.z===e.z};ce.prototype.cmp=function(e){return u2(this.z,e.z)};ce.prototype.str=function(){return"EquirectTile("+tile.z+")"};function Ur(e){this.constructor.super_.call(this,e),this._width=e.width}h2(Ur,d2);Ur.prototype.width=function(){return this._width};Ur.prototype.height=function(){return this._width/2};Ur.prototype.tileWidth=function(){return this._width};Ur.prototype.tileHeight=function(){return this._width/2};function zt(e){if(p2(e)!=="array")throw new Error("Level list must be an array");this.levelList=ul.makeLevelList(e,Ur),this.selectableLevelList=ul.makeSelectableLevelList(this.levelList)}zt.prototype.maxTileSize=function(){for(var e=0,t=0;t<this.levelList.length;t++){var r=this.levelList[t];e=Math.max(e,r.tileWidth,r.tileHeight)}return e};zt.prototype.levelTiles=function(e,t){var r=this.levelList.indexOf(e);return t=t||[],t.push(new ce(r,this)),t};zt.prototype.visibleTiles=function(e,t,r){var n=new ce(this.levelList.indexOf(t),this);r=r||[],r.length=0,r.push(n)};zt.Tile=zt.prototype.Tile=ce;zt.type=zt.prototype.type="equirect";ce.type=ce.prototype.type="equirect";var v2=zt;function ur(e,t,r){return 2*Math.atan(r*Math.tan(e/2)/t)}function m2(e,t,r){return ur(e,t,r)}function _2(e,t,r){return ur(e,t,Math.sqrt(t*t+r*r))}function y2(e,t,r){return ur(e,r,t)}function g2(e,t,r){return ur(e,r,Math.sqrt(t*t+r*r))}function E2(e,t,r){return ur(e,Math.sqrt(t*t+r*r),t)}function w2(e,t,r){return ur(e,Math.sqrt(t*t+r*r),r)}var Nf={convert:ur,htov:m2,htod:_2,vtoh:y2,vtod:g2,dtoh:E2,dtov:w2};function b2(e){return typeof e=="number"&&isFinite(e)}var Bo=b2;function T2(e){return e.toPrecision(15)}var Wo=T2;function x2(){var e=arguments;return function(r){for(var n=r,i=0;i<e.length;i++){var s=e[i];n=s.call(null,n)}return n}}var If=x2,M2=re,Rt=me.mat4,ve=me.vec4,Df=zi,dn=Nf,Cs=Bt,Pt=Bo,Gt=Wr,et=Wo,A2=If,S2=ee,C2=0,L2=0,O2=0,$2=0,P2=0,R2=Math.PI/4,N2=0,I2=0,dl=1e-6;function V(e,t){this._yaw=e&&e.yaw!=null?e.yaw:O2,this._pitch=e&&e.pitch!=null?e.pitch:$2,this._roll=e&&e.roll!=null?e.roll:P2,this._fov=e&&e.fov!=null?e.fov:R2,this._width=e&&e.width!=null?e.width:C2,this._height=e&&e.height!=null?e.height:L2,this._projectionCenterX=e&&e.projectionCenterX!=null?e.projectionCenterX:N2,this._projectionCenterY=e&&e.projectionCenterY!=null?e.projectionCenterY:I2,this._limiter=t||null,this._projMatrix=Rt.create(),this._invProjMatrix=Rt.create(),this._frustum=[ve.create(),ve.create(),ve.create(),ve.create(),ve.create()],this._projectionChanged=!0,this._params={},this._fovs={},this._tmpVec=ve.create(),this._update()}M2(V);V.prototype.destroy=function(){S2(this)};V.prototype.yaw=function(){return this._yaw};V.prototype.pitch=function(){return this._pitch};V.prototype.roll=function(){return this._roll};V.prototype.projectionCenterX=function(){return this._projectionCenterX};V.prototype.projectionCenterY=function(){return this._projectionCenterY};V.prototype.fov=function(){return this._fov};V.prototype.width=function(){return this._width};V.prototype.height=function(){return this._height};V.prototype.size=function(e){return e=e||{},e.width=this._width,e.height=this._height,e};V.prototype.parameters=function(e){return e=e||{},e.yaw=this._yaw,e.pitch=this._pitch,e.roll=this._roll,e.fov=this._fov,e};V.prototype.limiter=function(){return this._limiter};V.prototype.setYaw=function(e){this._resetParams(),this._params.yaw=e,this._update(this._params)};V.prototype.setPitch=function(e){this._resetParams(),this._params.pitch=e,this._update(this._params)};V.prototype.setRoll=function(e){this._resetParams(),this._params.roll=e,this._update(this._params)};V.prototype.setFov=function(e){this._resetParams(),this._params.fov=e,this._update(this._params)};V.prototype.setProjectionCenterX=function(e){this._resetParams(),this._params.projectionCenterX=e,this._update(this._params)};V.prototype.setProjectionCenterY=function(e){this._resetParams(),this._params.projectionCenterY=e,this._update(this._params)};V.prototype.offsetYaw=function(e){this.setYaw(this._yaw+e)};V.prototype.offsetPitch=function(e){this.setPitch(this._pitch+e)};V.prototype.offsetRoll=function(e){this.setRoll(this._roll+e)};V.prototype.offsetFov=function(e){this.setFov(this._fov+e)};V.prototype.setSize=function(e){this._resetParams(),this._params.width=e.width,this._params.height=e.height,this._update(this._params)};V.prototype.setParameters=function(e){this._resetParams(),this._params.yaw=e.yaw,this._params.pitch=e.pitch,this._params.roll=e.roll,this._params.fov=e.fov,this._params.projectionCenterX=e.projectionCenterX,this._params.projectionCenterY=e.projectionCenterY,this._update(this._params)};V.prototype.setLimiter=function(e){this._limiter=e||null,this._update()};V.prototype._resetParams=function(){var e=this._params;e.yaw=null,e.pitch=null,e.roll=null,e.fov=null,e.width=null,e.height=null};V.prototype._update=function(e){e==null&&(this._resetParams(),e=this._params);var t=this._yaw,r=this._pitch,n=this._roll,i=this._fov,s=this._projectionCenterX,o=this._projectionCenterY,a=this._width,l=this._height;if(e.yaw=e.yaw!=null?e.yaw:t,e.pitch=e.pitch!=null?e.pitch:r,e.roll=e.roll!=null?e.roll:n,e.fov=e.fov!=null?e.fov:i,e.width=e.width!=null?e.width:a,e.height=e.height!=null?e.height:l,e.projectionCenterX=e.projectionCenterX!=null?e.projectionCenterX:s,e.projectionCenterY=e.projectionCenterY!=null?e.projectionCenterY:o,this._limiter&&(e=this._limiter(e),!e))throw new Error("Bad view limiter");e=this._normalize(e);var c=e.yaw,h=e.pitch,f=e.roll,u=e.fov,v=e.width,d=e.height,y=e.projectionCenterX,m=e.projectionCenterY;if(!Pt(c)||!Pt(h)||!Pt(f)||!Pt(u)||!Pt(v)||!Pt(d)||!Pt(y)||!Pt(m))throw new Error("Bad view - suspect a broken limiter");this._yaw=c,this._pitch=h,this._roll=f,this._fov=u,this._width=v,this._height=d,this._projectionCenterX=y,this._projectionCenterY=m,(c!==t||h!==r||f!==n||u!==i||v!==a||d!==l||y!==s||m!==o)&&(this._projectionChanged=!0,this.emit("change")),(v!==a||d!==l)&&this.emit("resize")};V.prototype._normalize=function(e){this._normalizeCoordinates(e);var t=dn.htov(Math.PI,e.width,e.height),r=isNaN(t)?Math.PI:Math.min(Math.PI,t);return e.fov=Gt(e.fov,dl,r-dl),e};V.prototype._normalizeCoordinates=function(e){return"yaw"in e&&(e.yaw=Cs(e.yaw-Math.PI,-2*Math.PI)+Math.PI),"pitch"in e&&(e.pitch=Cs(e.pitch-Math.PI,-2*Math.PI)+Math.PI),"roll"in e&&(e.roll=Cs(e.roll-Math.PI,-2*Math.PI)+Math.PI),e};V.prototype.normalizeToClosest=function(e,t){var r=this._yaw,n=this._pitch,i=e.yaw,s=e.pitch,o=i-2*Math.PI,a=i+2*Math.PI;Math.abs(o-r)<Math.abs(i-r)?i=o:Math.abs(a-r)<Math.abs(i-r)&&(i=a);var l=s-2*Math.PI,c=s+2*Math.PI;return Math.abs(l-n)<Math.abs(s-n)?s=l:Math.abs(l-n)<Math.abs(s-n)&&(s=c),t=t||{},t.yaw=i,t.pitch=s,t};V.prototype.updateWithControlParameters=function(e){var t=this._fov,r=dn.vtoh(t,this._width,this._height);isNaN(r)&&(r=t),this.offsetYaw(e.axisScaledX*r+e.x*2*r+e.yaw),this.offsetPitch(e.axisScaledY*t+e.y*2*r+e.pitch),this.offsetRoll(-e.roll),this.offsetFov(e.zoom*t)};V.prototype._updateProjection=function(){var e=this._projMatrix,t=this._invProjMatrix,r=this._frustum;if(this._projectionChanged){var n=this._width,i=this._height,s=this._fov,o=dn.vtoh(s,n,i),a=n/i,l=this._projectionCenterX,c=this._projectionCenterY;if(l!==0||c!==0){var h=Math.atan(l*2*Math.tan(o/2)),f=Math.atan(c*2*Math.tan(s/2)),u=this._fovs;u.leftDegrees=(o/2+h)*180/Math.PI,u.rightDegrees=(o/2-h)*180/Math.PI,u.upDegrees=(s/2+f)*180/Math.PI,u.downDegrees=(s/2-f)*180/Math.PI,Rt.perspectiveFromFieldOfView(e,u,-1,1)}else Rt.perspective(e,s,a,-1,1);Rt.rotateZ(e,e,this._roll),Rt.rotateX(e,e,this._pitch),Rt.rotateY(e,e,this._yaw),Rt.invert(t,e),this._matrixToFrustum(e,r),this._projectionChanged=!1}};V.prototype._matrixToFrustum=function(e,t){ve.set(t[0],e[3]+e[0],e[7]+e[4],e[11]+e[8],0),ve.set(t[1],e[3]-e[0],e[7]-e[4],e[11]-e[8],0),ve.set(t[2],e[3]+e[1],e[7]+e[5],e[11]+e[9],0),ve.set(t[3],e[3]-e[1],e[7]-e[5],e[11]-e[9],0),ve.set(t[4],e[3]+e[2],e[7]+e[6],e[11]+e[10],0)};V.prototype.projection=function(){return this._updateProjection(),this._projMatrix};V.prototype.inverseProjection=function(){return this._updateProjection(),this._invProjMatrix};V.prototype.intersects=function(e){this._updateProjection();for(var t=this._frustum,r=this._tmpVec,n=0;n<t.length;n++){for(var i=t[n],s=!1,o=0;o<e.length;o++){var a=e[o];ve.set(r,a[0],a[1],a[2],0),ve.dot(i,r)>=0&&(s=!0)}if(!s)return!1}return!0};V.prototype.selectLevel=function(e){for(var t=Df()*this._height,r=Math.tan(.5*this._fov),n=0;n<e.length;n++){var i=e[n];if(r*i.height()>=t)return i}return e[e.length-1]};V.prototype.coordinatesToScreen=function(e,t){var r=this._tmpVec;t||(t={});var n=this._width,i=this._height;if(n<=0||i<=0)return t.x=null,t.y=null,null;var s=e.yaw,o=e.pitch,a=Math.sin(s)*Math.cos(o),l=-Math.sin(o),c=-Math.cos(s)*Math.cos(o);if(ve.set(r,a,l,c,1),ve.transformMat4(r,r,this.projection()),r[3]>=0)t.x=n*(r[0]/r[3]+1)/2,t.y=i*(1-r[1]/r[3])/2;else return t.x=null,t.y=null,null;return t};V.prototype.screenToCoordinates=function(e,t){var r=this._tmpVec;t||(t={});var n=this._width,i=this._height,s=2*e.x/n-1,o=1-2*e.y/i;ve.set(r,s,o,1,1),ve.transformMat4(r,r,this.inverseProjection());var a=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);return t.yaw=Math.atan2(r[0],-r[2]),t.pitch=Math.acos(r[1]/a)-Math.PI/2,this._normalizeCoordinates(t),t};V.prototype.coordinatesToPerspectiveTransform=function(e,t,r){r=r||"";var n=this._height,i=this._width,s=this._fov,o=.5*n/Math.tan(s/2),a="";return a+="translateX("+et(i/2)+"px) ",a+="translateY("+et(n/2)+"px) ",a+="translateX(-50%) translateY(-50%) ",a+="perspective("+et(o)+"px) ",a+="translateZ("+et(o)+"px) ",a+="rotateZ("+et(-this._roll)+"rad) ",a+="rotateX("+et(-this._pitch)+"rad) ",a+="rotateY("+et(this._yaw)+"rad) ",a+="rotateY("+et(-e.yaw)+"rad) ",a+="rotateX("+et(e.pitch)+"rad) ",a+="translateZ("+et(-t)+"px) ",a+=r+" ",a};V.limit={yaw:function(e,t){return function(n){return n.yaw=Gt(n.yaw,e,t),n}},pitch:function(e,t){return function(n){return n.pitch=Gt(n.pitch,e,t),n}},roll:function(e,t){return function(n){return n.roll=Gt(n.roll,e,t),n}},hfov:function(e,t){return function(n){var i=n.width,s=n.height;if(i>0&&s>0){var o=dn.htov(e,i,s),a=dn.htov(t,i,s);n.fov=Gt(n.fov,o,a)}return n}},vfov:function(e,t){return function(n){return n.fov=Gt(n.fov,e,t),n}},resolution:function(e){return function(r){var n=r.height;if(n){var i=Df()*n,s=2*Math.atan(i/e);r.fov=Gt(r.fov,s,1/0)}return r}},traditional:function(e,t,r){return r=r??t,A2(V.limit.resolution(e),V.limit.vfov(0,t),V.limit.hfov(0,r),V.limit.pitch(-Math.PI/2,Math.PI/2))}};V.type=V.prototype.type="rectilinear";var D2=V,z2=re,wi=me.mat4,pn=me.vec4,zf=zi,wr=Bo,pt=Wr,k2=ee,H2=0,F2=0,kf=.5,Hf=.5,V2=1,B2=[1,0,1,0],W2=[-1,-1,1,1],U2=1e-6;function q(e,t){if(!(e&&e.mediaAspectRatio!=null))throw new Error("mediaAspectRatio must be defined");this._x=e&&e.x!=null?e.x:kf,this._y=e&&e.y!=null?e.y:Hf,this._zoom=e&&e.zoom!=null?e.zoom:V2,this._mediaAspectRatio=e.mediaAspectRatio,this._width=e&&e.width!=null?e.width:H2,this._height=e&&e.height!=null?e.height:F2,this._limiter=t||null,this._projMatrix=wi.create(),this._invProjMatrix=wi.create(),this._frustum=[0,0,0,0],this._projectionChanged=!0,this._params={},this._vec=pn.create(),this._update()}z2(q);q.prototype.destroy=function(){k2(this)};q.prototype.x=function(){return this._x};q.prototype.y=function(){return this._y};q.prototype.zoom=function(){return this._zoom};q.prototype.mediaAspectRatio=function(){return this._mediaAspectRatio};q.prototype.width=function(){return this._width};q.prototype.height=function(){return this._height};q.prototype.size=function(e){return e=e||{},e.width=this._width,e.height=this._height,e};q.prototype.parameters=function(e){return e=e||{},e.x=this._x,e.y=this._y,e.zoom=this._zoom,e.mediaAspectRatio=this._mediaAspectRatio,e};q.prototype.limiter=function(){return this._limiter};q.prototype.setX=function(e){this._resetParams(),this._params.x=e,this._update(this._params)};q.prototype.setY=function(e){this._resetParams(),this._params.y=e,this._update(this._params)};q.prototype.setZoom=function(e){this._resetParams(),this._params.zoom=e,this._update(this._params)};q.prototype.offsetX=function(e){this.setX(this._x+e)};q.prototype.offsetY=function(e){this.setY(this._y+e)};q.prototype.offsetZoom=function(e){this.setZoom(this._zoom+e)};q.prototype.setMediaAspectRatio=function(e){this._resetParams(),this._params.mediaAspectRatio=e,this._update(this._params)};q.prototype.setSize=function(e){this._resetParams(),this._params.width=e.width,this._params.height=e.height,this._update(this._params)};q.prototype.setParameters=function(e){this._resetParams(),this._params.x=e.x,this._params.y=e.y,this._params.zoom=e.zoom,this._params.mediaAspectRatio=e.mediaAspectRatio,this._update(this._params)};q.prototype.setLimiter=function(e){this._limiter=e||null,this._update()};q.prototype._resetParams=function(){var e=this._params;e.x=null,e.y=null,e.zoom=null,e.mediaAspectRatio=null,e.width=null,e.height=null};q.prototype._update=function(e){e==null&&(this._resetParams(),e=this._params);var t=this._x,r=this._y,n=this._zoom,i=this._mediaAspectRatio,s=this._width,o=this._height;if(e.x=e.x!=null?e.x:t,e.y=e.y!=null?e.y:r,e.zoom=e.zoom!=null?e.zoom:n,e.mediaAspectRatio=e.mediaAspectRatio!=null?e.mediaAspectRatio:i,e.width=e.width!=null?e.width:s,e.height=e.height!=null?e.height:o,this._limiter&&(e=this._limiter(e),!e))throw new Error("Bad view limiter");var a=e.x,l=e.y,c=e.zoom,h=e.mediaAspectRatio,f=e.width,u=e.height;if(!wr(a)||!wr(l)||!wr(c)||!wr(h)||!wr(f)||!wr(u))throw new Error("Bad view - suspect a broken limiter");c=pt(c,U2,1/0),this._x=a,this._y=l,this._zoom=c,this._mediaAspectRatio=h,this._width=f,this._height=u,(a!==t||l!==r||c!==n||h!==i||f!==s||u!==o)&&(this._projectionChanged=!0,this.emit("change")),(f!==s||u!==o)&&this.emit("resize")};q.prototype._zoomX=function(){return this._zoom};q.prototype._zoomY=function(){var e=this._mediaAspectRatio,t=this._width/this._height,r=this._zoom,n=r*e/t;return isNaN(n)&&(n=r),n};q.prototype.updateWithControlParameters=function(e){var t=this.zoom(),r=this._zoomX(),n=this._zoomY();this.offsetX(e.axisScaledX*r+e.x*t),this.offsetY(e.axisScaledY*n+e.y*t),this.offsetZoom(e.zoom*t)};q.prototype._updateProjection=function(){var e=this._projMatrix,t=this._invProjMatrix,r=this._frustum;if(this._projectionChanged){var n=this._x,i=this._y,s=this._zoomX(),o=this._zoomY(),a=r[0]=.5-i+.5*o,l=r[1]=n-.5+.5*s,c=r[2]=.5-i-.5*o,h=r[3]=n-.5-.5*s;wi.ortho(e,h,l,c,a,-1,1),wi.invert(t,e),this._projectionChanged=!1}};q.prototype.projection=function(){return this._updateProjection(),this._projMatrix};q.prototype.inverseProjection=function(){return this._updateProjection(),this._invProjMatrix};q.prototype.intersects=function(e){this._updateProjection();for(var t=this._frustum,r=0;r<t.length;r++){for(var n=t[r],i=B2[r],s=W2[r],o=!1,a=0;a<e.length;a++){var l=e[a];if(s<0&&l[i]<n||s>0&&l[i]>n){o=!0;break}}if(!o)return!1}return!0};q.prototype.selectLevel=function(e){for(var t=zf()*this.width(),r=this._zoom,n=0;n<e.length;n++){var i=e[n];if(r*i.width()>=t)return i}return e[e.length-1]};q.prototype.coordinatesToScreen=function(e,t){var r=this._vec;t||(t={});var n=this._width,i=this._height;if(n<=0||i<=0)return t.x=null,t.y=null,null;var s=e&&e.x!=null?e.x:kf,o=e&&e.y!=null?e.y:Hf;pn.set(r,s-.5,.5-o,-1,1),pn.transformMat4(r,r,this.projection());for(var a=0;a<3;a++)r[a]/=r[3];return t.x=n*(r[0]+1)/2,t.y=i*(1-r[1])/2,t};q.prototype.screenToCoordinates=function(e,t){var r=this._vec;t||(t={});var n=this._width,i=this._height,s=2*e.x/n-1,o=1-2*e.y/i;return pn.set(r,s,o,1,1),pn.transformMat4(r,r,this.inverseProjection()),t.x=.5+r[0],t.y=.5-r[1],t};q.limit={x:function(e,t){return function(n){return n.x=pt(n.x,e,t),n}},y:function(e,t){return function(n){return n.y=pt(n.y,e,t),n}},zoom:function(e,t){return function(n){return n.zoom=pt(n.zoom,e,t),n}},resolution:function(e){return function(r){if(r.width<=0||r.height<=0)return r;var n=r.width,i=zf()*n/e;return r.zoom=pt(r.zoom,i,1/0),r}},visibleX:function(e,t){return function(n){var i=t-e;n.zoom>i&&(n.zoom=i);var s=e+.5*n.zoom,o=t-.5*n.zoom;return n.x=pt(n.x,s,o),n}},visibleY:function(e,t){return function(n){if(n.width<=0||n.height<=0)return n;var i=n.width/n.height,s=i/n.mediaAspectRatio,o=(t-e)*s;n.zoom>o&&(n.zoom=o);var a=e+.5*n.zoom/s,l=t-.5*n.zoom/s;return n.y=pt(n.y,a,l),n}},letterbox:function(){return function(t){if(t.width<=0||t.height<=0)return t;var r=t.width/t.height,n=1,i=r/t.mediaAspectRatio;t.mediaAspectRatio>=r&&(t.zoom=Math.min(t.zoom,n)),t.mediaAspectRatio<=r&&(t.zoom=Math.min(t.zoom,i));var s,o;t.zoom>n?s=o=.5:(s=0+.5*t.zoom/n,o=1-.5*t.zoom/n);var a,l;return t.zoom>i?a=l=.5:(a=0+.5*t.zoom/i,l=1-.5*t.zoom/i),t.x=pt(t.x,s,o),t.y=pt(t.y,a,l),t}}};q.type=q.prototype.type="flat";var j2=q,q2=Qc,Y2=Bt;function Ln(e){this._concurrency=e&&e.concurrency||1,this._paused=e&&!!e.paused||!1,this._pool=[];for(var t=0;t<this._concurrency;t++)this._pool.push(new q2(e));this._next=0}Ln.prototype.length=function(){for(var e=0,t=0;t<this._pool.length;t++)e+=this._pool[t].length();return e};Ln.prototype.push=function(e,t){var r=this._next,n=this._pool[r].push(e,t);return this._next=Y2(this._next+1,this._concurrency),n};Ln.prototype.pause=function(){if(!this._paused){this._paused=!0;for(var e=0;e<this._concurrency;e++)this._pool[e].pause()}};Ln.prototype.resume=function(){if(this._paused){this._paused=!1;for(var e=0;e<this._concurrency;e++)this._pool[e].resume()}};var X2=Ln;function G2(){}var On=G2,K2=On;function Z2(){var e=Array.prototype.slice.call(arguments,0);return function(){var r=e.slice(0),n=null,i=null,s=arguments.length?Array.prototype.slice.call(arguments,0,arguments.length-1):[],o=arguments.length?arguments[arguments.length-1]:K2;function a(){var c=arguments[0];if(c){n=i=null,o.apply(null,arguments);return}if(!r.length){n=i=null,o.apply(null,arguments);return}n=r.shift();var h=n,f=Array.prototype.slice.call(arguments,1);f.push(a);var u=n.apply(null,f);if(h===n){if(typeof u!="function")throw new Error("chain: chaining on non-cancellable function");i=u}}function l(){i&&i.apply(null,arguments)}return s.unshift(null),a.apply(null,s),l}}var Uo=Z2;function Q2(e,t){var r=null;function n(){r!=null&&(r=null,t(null))}function i(){r!=null&&(clearTimeout(r),r=null,t.apply(null,arguments))}return r=setTimeout(n,e),i}var Ff=Q2,J2=re,eM=ih,tM=X2,rM=Uo,nM=Ff,pl=lr,vl={x:"x",y:"y",z:"z",f:"face"},iM="bdflru",sM=4,oM=1e4;function vn(e,t){t=t||{},this._loadPool=new tM({concurrency:t.concurrency||sM}),this._retryDelay=t.retryDelay||oM,this._retryMap={},this._sourceFromTile=e}J2(vn);vn.prototype.loadAsset=function(e,t,r){var n=this,i=this._retryDelay,s=this._retryMap,o=this._sourceFromTile(t),a=o.url,l=o.rect,c=e.loadImage.bind(e,a,l),h=function(m){return n._loadPool.push(c,function(E,T){E?(E instanceof eM&&(s[a]=pl(),n.emit("networkError",E,t)),m(E,t)):(delete s[a],m(null,t,T))})},f,u=s[a];if(u!=null){var v=pl(),d=v-u;d<i?f=i-d:(f=0,delete s[a])}var y=nM.bind(null,f);return rM(y,h)(r)};vn.fromString=function(e,t){t=t||{};var r=t&&t.cubeMapPreviewFaceOrder||iM,n=t.cubeMapPreviewUrl?s:i;return new vn(n,t);function i(a){var l=e;for(var c in vl){var h=vl[c],f=aM(c),u=a.hasOwnProperty(h)?a[h]:"";l=l.replace(f,u)}return{url:l}}function s(a){return a.z===0?o(a):i(a)}function o(a){var l=r.indexOf(a.face)/6;return{url:t.cubeMapPreviewUrl,rect:{x:0,y:l,width:1,height:1/6}}}};function aM(e){var t="\\{("+e+")\\}";return new RegExp(t,"g")}var lM=vn;function jo(e){this._asset=e}jo.prototype.asset=function(){return this._asset};jo.prototype.loadAsset=function(e,t,r){var n=this,i=setTimeout(function(){r(null,t,n._asset)},0);function s(){clearTimeout(i),r.apply(null,arguments)}return s};var cM=jo,hM=Mo,fM=it,uM=re,dM=ee;function dr(e){this.constructor.super_.call(this,e),this._timestamp=0}fM(dr,hM);uM(dr);dr.prototype.destroy=function(){dM(this)};dr.prototype.timestamp=function(){return this._timestamp};dr.prototype.isDynamic=function(){return!0};dr.prototype.markDirty=function(){this._timestamp++,this.emit("change")};var pM=dr,Vi=Bt,vM=64;function Wt(e){if(e!=null&&(!isFinite(e)||Math.floor(e)!==e||e<1))throw new Error("Map: invalid capacity");this._capacity=e||vM,this._keyBuckets=[],this._valBuckets=[];for(var t=0;t<this._capacity;t++)this._keyBuckets.push([]),this._valBuckets.push([]);this._size=0}Wt.prototype.get=function(e){for(var t=Vi(e.hash(),this._capacity),r=this._keyBuckets[t],n=0;n<r.length;n++){var i=r[n];if(e.equals(i)){var s=this._valBuckets[t],o=s[n];return o}}return null};Wt.prototype.set=function(e,t){for(var r=Vi(e.hash(),this._capacity),n=this._keyBuckets[r],i=this._valBuckets[r],s=0;s<n.length;s++){var o=n[s];if(e.equals(o)){var a=i[s];return n[s]=e,i[s]=t,a}}return n.push(e),i.push(t),this._size++,null};Wt.prototype.del=function(e){for(var t=Vi(e.hash(),this._capacity),r=this._keyBuckets[t],n=this._valBuckets[t],i=0;i<r.length;i++){var s=r[i];if(e.equals(s)){for(var o=n[i],a=i;a<r.length-1;a++)r[a]=r[a+1],n[a]=n[a+1];return r.length=r.length-1,n.length=n.length-1,this._size--,o}}return null};Wt.prototype.has=function(e){for(var t=Vi(e.hash(),this._capacity),r=this._keyBuckets[t],n=0;n<r.length;n++){var i=r[n];if(e.equals(i))return!0}return!1};Wt.prototype.size=function(){return this._size};Wt.prototype.clear=function(){for(var e=0;e<this._capacity;e++)this._keyBuckets[e].length=0,this._valBuckets[e].length=0;this._size=0};Wt.prototype.forEach=function(e){for(var t=0,r=0;r<this._capacity;r++)for(var n=this._keyBuckets[r],i=this._valBuckets[r],s=0;s<n.length;s++)e(n[s],i[s]),t+=1;return t};var mM=Wt,_M=Bt;function Ut(e){if(!isFinite(e)||Math.floor(e)!==e||e<0)throw new Error("LruSet: invalid capacity");this._capacity=e,this._elements=new Array(this._capacity),this._start=0,this._size=0}Ut.prototype._index=function(e){return _M(this._start+e,this._capacity)};Ut.prototype.add=function(e){if(this._capacity===0)return e;this.remove(e);var t=this._size===this._capacity?this._elements[this._index(0)]:null;return this._elements[this._index(this._size)]=e,this._size<this._capacity?this._size++:this._start=this._index(1),t};Ut.prototype.remove=function(e){for(var t=0;t<this._size;t++){var r=this._elements[this._index(t)];if(e.equals(r)){for(var n=t;n<this._size-1;n++)this._elements[this._index(n)]=this._elements[this._index(n+1)];return this._size--,r}}return null};Ut.prototype.has=function(e){for(var t=0;t<this._size;t++)if(e.equals(this._elements[this._index(t)]))return!0;return!1};Ut.prototype.size=function(){return this._size};Ut.prototype.clear=function(){this._elements.length=0,this._start=0,this._size=0};Ut.prototype.forEach=function(e){for(var t=0,r=0;r<this._size;r++)e(this._elements[this._index(r)]),t+=1;return t};var yM=Ut;function gM(e,t){for(var r in t)r in e||(e[r]=t[r]);return e}var at=gM,EM=On;function wM(e){return function(){var r=arguments.length?Array.prototype.slice.call(arguments,0,arguments.length-1):[],n=arguments.length?arguments[arguments.length-1]:EM,i=null,s=!1;function o(){var a=arguments[0];!a||s?n.apply(null,arguments):i=e.apply(null,r)}return r.push(o),o(!0),function(){s=!0,i.apply(null,arguments)}}}var Vf=wM,ml=mM,_l=Of,bM=yM,Bf=re,TM=at,xM=Vf,MM=Uo,AM=it,Wf=ee,ln=typeof MARZIPANODEBUG<"u"&&MARZIPANODEBUG.textureStore,He={IDLE:0,START:1,MARK:2,END:3},SM={previouslyVisibleCacheSize:512},CM=0;function qo(){}AM(qo,Error);function $n(e,t){var r=this,n=CM++;r._id=n,r._store=e,r._tile=t,r._asset=null,r._texture=null,r._changeHandler=function(){e.emit("textureInvalid",t)};var i=e.source(),s=e.stage(),o=i.loadAsset.bind(i),a=s.createTexture.bind(s),l=MM(xM(o),a);e.emit("textureStartLoad",t),ln&&console.log("loading",n,t),r._cancel=l(s,t,function(c,h,f,u){if(r._cancel=null,c){f&&f.destroy(),u&&u.destroy(),c instanceof qo?(e.emit("textureCancel",t),ln&&console.log("cancel",n,t)):(e.emit("textureError",t,c),ln&&console.log("error",n,t));return}r._texture=u,f.isDynamic()?(r._asset=f,f.addEventListener("change",r._changeHandler)):f.destroy(),e.emit("textureLoad",t),ln&&console.log("load",n,t)})}$n.prototype.asset=function(){return this._asset};$n.prototype.texture=function(){return this._texture};$n.prototype.destroy=function(){var e=this._id,t=this._store,r=this._tile,n=this._asset,i=this._texture,s=this._cancel;if(s){s(new qo);return}n&&(n.removeEventListener("change",this._changeHandler),n.destroy()),i&&i.destroy(),t.emit("textureUnload",r),ln&&console.log("unload",e,r),Wf(this)};Bf($n);function de(e,t,r){r=TM(r||{},SM),this._source=e,this._stage=t,this._state=He.IDLE,this._delimCount=0,this._itemMap=new ml,this._visible=new _l,this._previouslyVisible=new bM(r.previouslyVisibleCacheSize),this._pinMap=new ml,this._newVisible=new _l,this._noLongerVisible=[],this._visibleAgain=[],this._evicted=[]}Bf(de);de.prototype.destroy=function(){this.clear(),Wf(this)};de.prototype.stage=function(){return this._stage};de.prototype.source=function(){return this._source};de.prototype.clear=function(){var e=this;e._evicted.length=0,e._itemMap.forEach(function(t){e._evicted.push(t)}),e._evicted.forEach(function(t){e._unloadTile(t)}),e._itemMap.clear(),e._visible.clear(),e._previouslyVisible.clear(),e._pinMap.clear(),e._newVisible.clear(),e._noLongerVisible.length=0,e._visibleAgain.length=0,e._evicted.length=0};de.prototype.clearNotPinned=function(){var e=this;e._evicted.length=0,e._itemMap.forEach(function(t){e._pinMap.has(t)||e._evicted.push(t)}),e._evicted.forEach(function(t){e._unloadTile(t)}),e._visible.clear(),e._previouslyVisible.clear(),e._evicted.length=0};de.prototype.startFrame=function(){if(this._state!==He.IDLE&&this._state!==He.START)throw new Error("TextureStore: startFrame called out of sequence");this._state=He.START,this._delimCount++};de.prototype.markTile=function(e){if(this._state!==He.START&&this._state!==He.MARK)throw new Error("TextureStore: markTile called out of sequence");this._state=He.MARK;var t=this._itemMap.get(e),r=t&&t.texture(),n=t&&t.asset();r&&n&&r.refresh(e,n),this._newVisible.add(e)};de.prototype.endFrame=function(){if(this._state!==He.START&&this._state!==He.MARK&&this._state!==He.END)throw new Error("TextureStore: endFrame called out of sequence");this._state=He.END,this._delimCount--,this._delimCount||(this._update(),this._state=He.IDLE)};de.prototype._update=function(){var e=this;e._noLongerVisible.length=0,e._visible.forEach(function(r){e._newVisible.has(r)||e._noLongerVisible.push(r)}),e._visibleAgain.length=0,e._newVisible.forEach(function(r){e._previouslyVisible.has(r)&&e._visibleAgain.push(r)}),e._visibleAgain.forEach(function(r){e._previouslyVisible.remove(r)}),e._evicted.length=0,e._noLongerVisible.forEach(function(r){var n=e._itemMap.get(r),i=n&&n.texture();if(i){var s=e._previouslyVisible.add(r);s!=null&&e._evicted.push(s)}else n&&e._unloadTile(r)}),e._evicted.forEach(function(r){e._pinMap.has(r)||e._unloadTile(r)}),e._newVisible.forEach(function(r){var n=e._itemMap.get(r);n||e._loadTile(r)});var t=e._visible;e._visible=e._newVisible,e._newVisible=t,e._newVisible.clear(),e._noLongerVisible.length=0,e._visibleAgain.length=0,e._evicted.length=0};de.prototype._loadTile=function(e){if(this._itemMap.has(e))throw new Error("TextureStore: loading texture already in cache");var t=new $n(this,e);this._itemMap.set(e,t)};de.prototype._unloadTile=function(e){var t=this._itemMap.del(e);if(!t)throw new Error("TextureStore: unloading texture not in cache");t.destroy()};de.prototype.asset=function(e){var t=this._itemMap.get(e);return t?t.asset():null};de.prototype.texture=function(e){var t=this._itemMap.get(e);return t?t.texture():null};de.prototype.pin=function(e){var t=(this._pinMap.get(e)||0)+1;return this._pinMap.set(e,t),this._itemMap.has(e)||this._loadTile(e),t};de.prototype.unpin=function(e){var t=this._pinMap.get(e);if(t)t--,t>0?this._pinMap.set(e,t):(this._pinMap.del(e),!this._visible.has(e)&&!this._previouslyVisible.has(e)&&this._unloadTile(e));else throw new Error("TextureStore: unpin when not pinned");return t};de.prototype.query=function(e){var t=this._itemMap.get(e),r=this._pinMap.get(e)||0;return{visible:this._visible.has(e),previouslyVisible:this._previouslyVisible.has(e),hasAsset:t!=null&&t.asset()!=null,hasTexture:t!=null&&t.texture()!=null,pinned:r!==0,pinCount:r}};var Uf=de;function LM(e,t){for(var r in t)e[r]=t[r];return e}var jf=LM,OM=re,$M=jf,PM=ee;function pe(e,t,r,n,i){i=i||{};var s=this;this._source=e,this._geometry=t,this._view=r,this._textureStore=n,this._effects=i.effects||{},this._fixedLevelIndex=null,this._viewChangeHandler=function(){s.emit("viewChange",s.view())},this._view.addEventListener("change",this._viewChangeHandler),this._textureStoreChangeHandler=function(){s.emit("textureStoreChange",s.textureStore())},this._textureStore.addEventListener("textureLoad",this._textureStoreChangeHandler),this._textureStore.addEventListener("textureError",this._textureStoreChangeHandler),this._textureStore.addEventListener("textureInvalid",this._textureStoreChangeHandler)}OM(pe);pe.prototype.destroy=function(){this._view.removeEventListener("change",this._viewChangeHandler),this._textureStore.removeEventListener("textureLoad",this._textureStoreChangeHandler),this._textureStore.removeEventListener("textureError",this._textureStoreChangeHandler),this._textureStore.removeEventListener("textureInvalid",this._textureStoreChangeHandler),PM(this)};pe.prototype.source=function(){return this._source};pe.prototype.geometry=function(){return this._geometry};pe.prototype.view=function(){return this._view};pe.prototype.textureStore=function(){return this._textureStore};pe.prototype.effects=function(){return this._effects};pe.prototype.setEffects=function(e){this._effects=e,this.emit("effectsChange",this._effects)};pe.prototype.mergeEffects=function(e){$M(this._effects,e),this.emit("effectsChange",this._effects)};pe.prototype.fixedLevel=function(){return this._fixedLevelIndex};pe.prototype.setFixedLevel=function(e){if(e!==this._fixedLevelIndex){if(e!=null&&(e>=this._geometry.levelList.length||e<0))throw new Error("Level index out of range: "+e);this._fixedLevelIndex=e,this.emit("fixedLevelChange",this._fixedLevelIndex)}};pe.prototype._selectLevel=function(){var e;return this._fixedLevelIndex!=null?e=this._geometry.levelList[this._fixedLevelIndex]:e=this._view.selectLevel(this._geometry.selectableLevelList),e};pe.prototype.visibleTiles=function(e){var t=this._selectLevel();return this._geometry.visibleTiles(this._view,t,e)};pe.prototype.pinLevel=function(e){for(var t=this._geometry.levelList[e],r=this._geometry.levelTiles(t),n=0;n<r.length;n++)this._textureStore.pin(r[n])};pe.prototype.unpinLevel=function(e){for(var t=this._geometry.levelList[e],r=this._geometry.levelTiles(t),n=0;n<r.length;n++)this._textureStore.unpin(r[n])};pe.prototype.pinFirstLevel=function(){return this.pinLevel(0)};pe.prototype.unpinFirstLevel=function(){return this.unpinLevel(0)};var qf=pe,RM=re,NM=ee;function jt(e){var t=this;this._stage=e,this._running=!1,this._rendering=!1,this._requestHandle=null,this._boundLoop=this._loop.bind(this),this._renderInvalidHandler=function(){t._rendering||t.renderOnNextFrame()},this._stage.addEventListener("renderInvalid",this._renderInvalidHandler)}RM(jt);jt.prototype.destroy=function(){this.stop(),this._stage.removeEventListener("renderInvalid",this._renderInvalidHandler),NM(this)};jt.prototype.stage=function(){return this._stage};jt.prototype.start=function(){this._running=!0,this.renderOnNextFrame()};jt.prototype.stop=function(){this._requestHandle&&(window.cancelAnimationFrame(this._requestHandle),this._requestHandle=null),this._running=!1};jt.prototype.renderOnNextFrame=function(){this._running&&!this._requestHandle&&(this._requestHandle=window.requestAnimationFrame(this._boundLoop))};jt.prototype._loop=function(){if(!this._running)throw new Error("Render loop running while in stopped state");this._requestHandle=null,this._rendering=!0,this.emit("beforeRender"),this._rendering=!1,this._stage.render(),this.emit("afterRender")};var Yf=jt;function Et(){this.velocity=null,this.friction=null,this.offset=null}Et.equals=function(e,t){return e.velocity===t.velocity&&e.friction===t.friction&&e.offset===t.offset};Et.prototype.equals=function(e){return Et.equals(this,e)};Et.prototype.update=function(e,t){e.offset&&(this.offset=this.offset||0,this.offset+=e.offset);var r=this.offsetFromVelocity(t);r&&(this.offset=this.offset||0,this.offset+=r),this.velocity=e.velocity,this.friction=e.friction};Et.prototype.reset=function(){this.velocity=null,this.friction=null,this.offset=null};Et.prototype.velocityAfter=function(e){return this.velocity?this.friction?IM(this.velocity,this.friction*e):this.velocity:null};Et.prototype.offsetFromVelocity=function(e){e=Math.min(e,this.nullVelocityTime());var t=this.velocityAfter(e),r=(this.velocity+t)/2;return r*e};Et.prototype.nullVelocityTime=function(){return this.velocity==null?0:this.velocity&&!this.friction?1/0:Math.abs(this.velocity/this.friction)};function IM(e,t){return e<0?Math.min(0,e+t):e>0?Math.max(0,e-t):0}var xt=Et,DM=re,zM=xt,kM=ee;function jr(e,t,r,n,i){if(!e)throw new Error("KeyControlMethod: keyCode must be defined");if(!t)throw new Error("KeyControlMethod: parameter must be defined");if(!r)throw new Error("KeyControlMethod: velocity must be defined");if(!n)throw new Error("KeyControlMethod: friction must be defined");i=i||document,this._keyCode=e,this._parameter=t,this._velocity=r,this._friction=n,this._element=i,this._keydownHandler=this._handlePress.bind(this),this._keyupHandler=this._handleRelease.bind(this),this._blurHandler=this._handleBlur.bind(this),this._element.addEventListener("keydown",this._keydownHandler),this._element.addEventListener("keyup",this._keyupHandler),window.addEventListener("blur",this._blurHandler),this._dynamics=new zM,this._pressing=!1}DM(jr);jr.prototype.destroy=function(){this._element.removeEventListener("keydown",this._keydownHandler),this._element.removeEventListener("keyup",this._keyupHandler),window.removeEventListener("blur",this._blurHandler),kM(this)};jr.prototype._handlePress=function(e){e.keyCode===this._keyCode&&(this._pressing=!0,this._dynamics.velocity=this._velocity,this._dynamics.friction=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("active"))};jr.prototype._handleRelease=function(e){e.keyCode===this._keyCode&&(this._pressing&&(this._dynamics.friction=this._friction,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive")),this._pressing=!1)};jr.prototype._handleBlur=function(){this._dynamics.velocity=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive"),this._pressing=!1};var Xf=jr,Gf={exports:{}};/*! Hammer.JS - v2.0.4 - 2014-09-28
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2014 Jorik Tangelder;
 * Licensed under the MIT license */(function(e){(function(t,r,n,i){var s=["","webkit","moz","MS","ms","o"],o=r.createElement("div"),a="function",l=Math.round,c=Math.abs,h=Date.now;function f(p,_,g){return setTimeout(E(p,g),_)}function u(p,_,g){return Array.isArray(p)?(v(p,g[_],g),!0):!1}function v(p,_,g){var M;if(p)if(p.forEach)p.forEach(_,g);else if(p.length!==i)for(M=0;M<p.length;)_.call(g,p[M],M,p),M++;else for(M in p)p.hasOwnProperty(M)&&_.call(g,p[M],M,p)}function d(p,_,g){for(var M=Object.keys(_),O=0;O<M.length;)(!g||g&&p[M[O]]===i)&&(p[M[O]]=_[M[O]]),O++;return p}function y(p,_){return d(p,_,!0)}function m(p,_,g){var M=_.prototype,O;O=p.prototype=Object.create(M),O.constructor=p,O._super=M,g&&d(O,g)}function E(p,_){return function(){return p.apply(_,arguments)}}function T(p,_){return typeof p==a?p.apply(_&&_[0]||i,_):p}function x(p,_){return p===i?_:p}function A(p,_,g){v(z(_),function(M){p.addEventListener(M,g,!1)})}function C(p,_,g){v(z(_),function(M){p.removeEventListener(M,g,!1)})}function S(p,_){for(;p;){if(p==_)return!0;p=p.parentNode}return!1}function $(p,_){return p.indexOf(_)>-1}function z(p){return p.trim().split(/\s+/g)}function I(p,_,g){if(p.indexOf&&!g)return p.indexOf(_);for(var M=0;M<p.length;){if(g&&p[M][g]==_||!g&&p[M]===_)return M;M++}return-1}function D(p){return Array.prototype.slice.call(p,0)}function P(p,_,g){for(var M=[],O=[],B=0;B<p.length;){var X=_?p[B][_]:p[B];I(O,X)<0&&M.push(p[B]),O[B]=X,B++}return g&&(_?M=M.sort(function(Ee,Qe){return Ee[_]>Qe[_]}):M=M.sort()),M}function H(p,_){for(var g,M,O=_[0].toUpperCase()+_.slice(1),B=0;B<s.length;){if(g=s[B],M=g?g+O:_,M in p)return M;B++}return i}var F=1;function R(){return F++}function w(p){var _=p.ownerDocument;return _.defaultView||_.parentWindow}var Y=/mobile|tablet|ip(ad|hone|od)|android/i,U="ontouchstart"in t,se=H(t,"PointerEvent")!==i,oe=U&&Y.test(navigator.userAgent),ae="touch",xe="pen",_e="mouse",Ke="kinect",Le=25,J=1,Oe=2,te=4,ne=8,At=1,qt=2,ct=4,Yt=8,St=16,De=qt|ct,ht=Yt|St,Xr=De|ht,Gr=["x","y"],vr=["clientX","clientY"];function Me(p,_){var g=this;this.manager=p,this.callback=_,this.element=p.element,this.target=p.options.inputTarget,this.domHandler=function(M){T(p.options.enable,[p])&&g.handler(M)},this.init()}Me.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(w(this.element),this.evWin,this.domHandler)}};function ft(p){var _,g=p.options.inputClass;return g?_=g:se?_=Yi:oe?_=Fn:U?_=Xi:_=Hn,new _(p,mr)}function mr(p,_,g){var M=g.pointers.length,O=g.changedPointers.length,B=_&J&&M-O===0,X=_&(te|ne)&&M-O===0;g.isFirst=!!B,g.isFinal=!!X,B&&(p.session={}),g.eventType=_,In(p,g),p.emit("hammer.input",g),p.recognize(g),p.session.prevInput=g}function In(p,_){var g=p.session,M=_.pointers,O=M.length;g.firstInput||(g.firstInput=Zr(_)),O>1&&!g.firstMultiple?g.firstMultiple=Zr(_):O===1&&(g.firstMultiple=!1);var B=g.firstInput,X=g.firstMultiple,ye=X?X.center:B.center,Ee=_.center=Qr(M);_.timeStamp=h(),_.deltaTime=_.timeStamp-B.timeStamp,_.angle=qi(ye,Ee),_.distance=kn(ye,Ee),Dn(g,_),_.offsetDirection=Jr(_.deltaX,_.deltaY),_.scale=X?_u(X.pointers,M):1,_.rotation=X?mu(X.pointers,M):0,Kr(g,_);var Qe=p.element;S(_.srcEvent.target,Qe)&&(Qe=_.srcEvent.target),_.target=Qe}function Dn(p,_){var g=_.center,M=p.offsetDelta||{},O=p.prevDelta||{},B=p.prevInput||{};(_.eventType===J||B.eventType===te)&&(O=p.prevDelta={x:B.deltaX||0,y:B.deltaY||0},M=p.offsetDelta={x:g.x,y:g.y}),_.deltaX=O.x+(g.x-M.x),_.deltaY=O.y+(g.y-M.y)}function Kr(p,_){var g=p.lastInterval||_,M=_.timeStamp-g.timeStamp,O,B,X,ye;if(_.eventType!=ne&&(M>Le||g.velocity===i)){var Ee=g.deltaX-_.deltaX,Qe=g.deltaY-_.deltaY,yr=zn(M,Ee,Qe);B=yr.x,X=yr.y,O=c(yr.x)>c(yr.y)?yr.x:yr.y,ye=Jr(Ee,Qe),p.lastInterval=_}else O=g.velocity,B=g.velocityX,X=g.velocityY,ye=g.direction;_.velocity=O,_.velocityX=B,_.velocityY=X,_.direction=ye}function Zr(p){for(var _=[],g=0;g<p.pointers.length;)_[g]={clientX:l(p.pointers[g].clientX),clientY:l(p.pointers[g].clientY)},g++;return{timeStamp:h(),pointers:_,center:Qr(_),deltaX:p.deltaX,deltaY:p.deltaY}}function Qr(p){var _=p.length;if(_===1)return{x:l(p[0].clientX),y:l(p[0].clientY)};for(var g=0,M=0,O=0;O<_;)g+=p[O].clientX,M+=p[O].clientY,O++;return{x:l(g/_),y:l(M/_)}}function zn(p,_,g){return{x:_/p||0,y:g/p||0}}function Jr(p,_){return p===_?At:c(p)>=c(_)?p>0?qt:ct:_>0?Yt:St}function kn(p,_,g){g||(g=Gr);var M=_[g[0]]-p[g[0]],O=_[g[1]]-p[g[1]];return Math.sqrt(M*M+O*O)}function qi(p,_,g){g||(g=Gr);var M=_[g[0]]-p[g[0]],O=_[g[1]]-p[g[1]];return Math.atan2(O,M)*180/Math.PI}function mu(p,_){return qi(_[1],_[0],vr)-qi(p[1],p[0],vr)}function _u(p,_){return kn(_[0],_[1],vr)/kn(p[0],p[1],vr)}var yu={mousedown:J,mousemove:Oe,mouseup:te},gu="mousedown",Eu="mousemove mouseup";function Hn(){this.evEl=gu,this.evWin=Eu,this.allow=!0,this.pressed=!1,Me.apply(this,arguments)}m(Hn,Me,{handler:function(_){var g=yu[_.type];g&J&&_.button===0&&(this.pressed=!0),g&Oe&&_.which!==1&&(g=te),!(!this.pressed||!this.allow)&&(g&te&&(this.pressed=!1),this.callback(this.manager,g,{pointers:[_],changedPointers:[_],pointerType:_e,srcEvent:_}))}});var wu={pointerdown:J,pointermove:Oe,pointerup:te,pointercancel:ne,pointerout:ne},bu={2:ae,3:xe,4:_e,5:Ke},Yo="pointerdown",Xo="pointermove pointerup pointercancel";t.MSPointerEvent&&(Yo="MSPointerDown",Xo="MSPointerMove MSPointerUp MSPointerCancel");function Yi(){this.evEl=Yo,this.evWin=Xo,Me.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}m(Yi,Me,{handler:function(_){var g=this.store,M=!1,O=_.type.toLowerCase().replace("ms",""),B=wu[O],X=bu[_.pointerType]||_.pointerType,ye=X==ae,Ee=I(g,_.pointerId,"pointerId");B&J&&(_.button===0||ye)?Ee<0&&(g.push(_),Ee=g.length-1):B&(te|ne)&&(M=!0),!(Ee<0)&&(g[Ee]=_,this.callback(this.manager,B,{pointers:g,changedPointers:[_],pointerType:X,srcEvent:_}),M&&g.splice(Ee,1))}});var Tu={touchstart:J,touchmove:Oe,touchend:te,touchcancel:ne},xu="touchstart",Mu="touchstart touchmove touchend touchcancel";function Go(){this.evTarget=xu,this.evWin=Mu,this.started=!1,Me.apply(this,arguments)}m(Go,Me,{handler:function(_){var g=Tu[_.type];if(g===J&&(this.started=!0),!!this.started){var M=Au.call(this,_,g);g&(te|ne)&&M[0].length-M[1].length===0&&(this.started=!1),this.callback(this.manager,g,{pointers:M[0],changedPointers:M[1],pointerType:ae,srcEvent:_})}}});function Au(p,_){var g=D(p.touches),M=D(p.changedTouches);return _&(te|ne)&&(g=P(g.concat(M),"identifier",!0)),[g,M]}var Su={touchstart:J,touchmove:Oe,touchend:te,touchcancel:ne},Cu="touchstart touchmove touchend touchcancel";function Fn(){this.evTarget=Cu,this.targetIds={},Me.apply(this,arguments)}m(Fn,Me,{handler:function(_){var g=Su[_.type],M=Lu.call(this,_,g);M&&this.callback(this.manager,g,{pointers:M[0],changedPointers:M[1],pointerType:ae,srcEvent:_})}});function Lu(p,_){var g=D(p.touches),M=this.targetIds;if(_&(J|Oe)&&g.length===1)return M[g[0].identifier]=!0,[g,g];var O,B,X=D(p.changedTouches),ye=[],Ee=this.target;if(B=g.filter(function(Qe){return S(Qe.target,Ee)}),_===J)for(O=0;O<B.length;)M[B[O].identifier]=!0,O++;for(O=0;O<X.length;)M[X[O].identifier]&&ye.push(X[O]),_&(te|ne)&&delete M[X[O].identifier],O++;if(ye.length)return[P(B.concat(ye),"identifier",!0),ye]}function Xi(){Me.apply(this,arguments);var p=E(this.handler,this);this.touch=new Fn(this.manager,p),this.mouse=new Hn(this.manager,p)}m(Xi,Me,{handler:function(_,g,M){var O=M.pointerType==ae,B=M.pointerType==_e;if(O)this.mouse.allow=!1;else if(B&&!this.mouse.allow)return;g&(te|ne)&&(this.mouse.allow=!0),this.callback(_,g,M)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ko=H(o.style,"touchAction"),Zo=Ko!==i,Qo="compute",Jo="auto",Gi="manipulation",en="none",tn="pan-x",rn="pan-y";function Ki(p,_){this.manager=p,this.set(_)}Ki.prototype={set:function(p){p==Qo&&(p=this.compute()),Zo&&(this.manager.element.style[Ko]=p),this.actions=p.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var p=[];return v(this.manager.recognizers,function(_){T(_.options.enable,[_])&&(p=p.concat(_.getTouchAction()))}),Ou(p.join(" "))},preventDefaults:function(p){if(!Zo){var _=p.srcEvent,g=p.offsetDirection;if(this.manager.session.prevented){_.preventDefault();return}var M=this.actions,O=$(M,en),B=$(M,rn),X=$(M,tn);if(O||B&&g&De||X&&g&ht)return this.preventSrc(_)}},preventSrc:function(p){this.manager.session.prevented=!0,p.preventDefault()}};function Ou(p){if($(p,en))return en;var _=$(p,tn),g=$(p,rn);return _&&g?tn+" "+rn:_||g?_?tn:rn:$(p,Gi)?Gi:Jo}var Vn=1,ze=2,_r=4,Ct=8,ut=Ct,nn=16,Ze=32;function dt(p){this.id=R(),this.manager=null,this.options=y(p||{},this.defaults),this.options.enable=x(this.options.enable,!0),this.state=Vn,this.simultaneous={},this.requireFail=[]}dt.prototype={defaults:{},set:function(p){return d(this.options,p),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(p){if(u(p,"recognizeWith",this))return this;var _=this.simultaneous;return p=Bn(p,this),_[p.id]||(_[p.id]=p,p.recognizeWith(this)),this},dropRecognizeWith:function(p){return u(p,"dropRecognizeWith",this)?this:(p=Bn(p,this),delete this.simultaneous[p.id],this)},requireFailure:function(p){if(u(p,"requireFailure",this))return this;var _=this.requireFail;return p=Bn(p,this),I(_,p)===-1&&(_.push(p),p.requireFailure(this)),this},dropRequireFailure:function(p){if(u(p,"dropRequireFailure",this))return this;p=Bn(p,this);var _=I(this.requireFail,p);return _>-1&&this.requireFail.splice(_,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(p){return!!this.simultaneous[p.id]},emit:function(p){var _=this,g=this.state;function M(O){_.manager.emit(_.options.event+(O?$u(g):""),p)}g<Ct&&M(!0),M(),g>=Ct&&M(!0)},tryEmit:function(p){if(this.canEmit())return this.emit(p);this.state=Ze},canEmit:function(){for(var p=0;p<this.requireFail.length;){if(!(this.requireFail[p].state&(Ze|Vn)))return!1;p++}return!0},recognize:function(p){var _=d({},p);if(!T(this.options.enable,[this,_])){this.reset(),this.state=Ze;return}this.state&(ut|nn|Ze)&&(this.state=Vn),this.state=this.process(_),this.state&(ze|_r|Ct|nn)&&this.tryEmit(_)},process:function(p){},getTouchAction:function(){},reset:function(){}};function $u(p){return p&nn?"cancel":p&Ct?"end":p&_r?"move":p&ze?"start":""}function ea(p){return p==St?"down":p==Yt?"up":p==qt?"left":p==ct?"right":""}function Bn(p,_){var g=_.manager;return g?g.get(p):p}function Ue(){dt.apply(this,arguments)}m(Ue,dt,{defaults:{pointers:1},attrTest:function(p){var _=this.options.pointers;return _===0||p.pointers.length===_},process:function(p){var _=this.state,g=p.eventType,M=_&(ze|_r),O=this.attrTest(p);return M&&(g&ne||!O)?_|nn:M||O?g&te?_|Ct:_&ze?_|_r:ze:Ze}});function Wn(){Ue.apply(this,arguments),this.pX=null,this.pY=null}m(Wn,Ue,{defaults:{event:"pan",threshold:10,pointers:1,direction:Xr},getTouchAction:function(){var p=this.options.direction,_=[];return p&De&&_.push(rn),p&ht&&_.push(tn),_},directionTest:function(p){var _=this.options,g=!0,M=p.distance,O=p.direction,B=p.deltaX,X=p.deltaY;return O&_.direction||(_.direction&De?(O=B===0?At:B<0?qt:ct,g=B!=this.pX,M=Math.abs(p.deltaX)):(O=X===0?At:X<0?Yt:St,g=X!=this.pY,M=Math.abs(p.deltaY))),p.direction=O,g&&M>_.threshold&&O&_.direction},attrTest:function(p){return Ue.prototype.attrTest.call(this,p)&&(this.state&ze||!(this.state&ze)&&this.directionTest(p))},emit:function(p){this.pX=p.deltaX,this.pY=p.deltaY;var _=ea(p.direction);_&&this.manager.emit(this.options.event+_,p),this._super.emit.call(this,p)}});function Zi(){Ue.apply(this,arguments)}m(Zi,Ue,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[en]},attrTest:function(p){return this._super.attrTest.call(this,p)&&(Math.abs(p.scale-1)>this.options.threshold||this.state&ze)},emit:function(p){if(this._super.emit.call(this,p),p.scale!==1){var _=p.scale<1?"in":"out";this.manager.emit(this.options.event+_,p)}}});function Qi(){dt.apply(this,arguments),this._timer=null,this._input=null}m(Qi,dt,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Jo]},process:function(p){var _=this.options,g=p.pointers.length===_.pointers,M=p.distance<_.threshold,O=p.deltaTime>_.time;if(this._input=p,!M||!g||p.eventType&(te|ne)&&!O)this.reset();else if(p.eventType&J)this.reset(),this._timer=f(function(){this.state=ut,this.tryEmit()},_.time,this);else if(p.eventType&te)return ut;return Ze},reset:function(){clearTimeout(this._timer)},emit:function(p){this.state===ut&&(p&&p.eventType&te?this.manager.emit(this.options.event+"up",p):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}});function Ji(){Ue.apply(this,arguments)}m(Ji,Ue,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[en]},attrTest:function(p){return this._super.attrTest.call(this,p)&&(Math.abs(p.rotation)>this.options.threshold||this.state&ze)}});function es(){Ue.apply(this,arguments)}m(es,Ue,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:De|ht,pointers:1},getTouchAction:function(){return Wn.prototype.getTouchAction.call(this)},attrTest:function(p){var _=this.options.direction,g;return _&(De|ht)?g=p.velocity:_&De?g=p.velocityX:_&ht&&(g=p.velocityY),this._super.attrTest.call(this,p)&&_&p.direction&&p.distance>this.options.threshold&&c(g)>this.options.velocity&&p.eventType&te},emit:function(p){var _=ea(p.direction);_&&this.manager.emit(this.options.event+_,p),this.manager.emit(this.options.event,p)}});function Un(){dt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}m(Un,dt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[Gi]},process:function(p){var _=this.options,g=p.pointers.length===_.pointers,M=p.distance<_.threshold,O=p.deltaTime<_.time;if(this.reset(),p.eventType&J&&this.count===0)return this.failTimeout();if(M&&O&&g){if(p.eventType!=te)return this.failTimeout();var B=this.pTime?p.timeStamp-this.pTime<_.interval:!0,X=!this.pCenter||kn(this.pCenter,p.center)<_.posThreshold;this.pTime=p.timeStamp,this.pCenter=p.center,!X||!B?this.count=1:this.count+=1,this._input=p;var ye=this.count%_.taps;if(ye===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=ut,this.tryEmit()},_.interval,this),ze):ut}return Ze},failTimeout:function(){return this._timer=f(function(){this.state=Ze},this.options.interval,this),Ze},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ut&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Lt(p,_){return _=_||{},_.recognizers=x(_.recognizers,Lt.defaults.preset),new ts(p,_)}Lt.VERSION="2.0.4",Lt.defaults={domEvents:!1,touchAction:Qo,enable:!0,inputTarget:null,inputClass:null,preset:[[Ji,{enable:!1}],[Zi,{enable:!1},["rotate"]],[es,{direction:De}],[Wn,{direction:De},["swipe"]],[Un],[Un,{event:"doubletap",taps:2},["tap"]],[Qi]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Pu=1,ta=2;function ts(p,_){_=_||{},this.options=y(_,Lt.defaults),this.options.inputTarget=this.options.inputTarget||p,this.handlers={},this.session={},this.recognizers=[],this.element=p,this.input=ft(this),this.touchAction=new Ki(this,this.options.touchAction),ra(this,!0),v(_.recognizers,function(g){var M=this.add(new g[0](g[1]));g[2]&&M.recognizeWith(g[2]),g[3]&&M.requireFailure(g[3])},this)}ts.prototype={set:function(p){return d(this.options,p),p.touchAction&&this.touchAction.update(),p.inputTarget&&(this.input.destroy(),this.input.target=p.inputTarget,this.input.init()),this},stop:function(p){this.session.stopped=p?ta:Pu},recognize:function(p){var _=this.session;if(!_.stopped){this.touchAction.preventDefaults(p);var g,M=this.recognizers,O=_.curRecognizer;(!O||O&&O.state&ut)&&(O=_.curRecognizer=null);for(var B=0;B<M.length;)g=M[B],_.stopped!==ta&&(!O||g==O||g.canRecognizeWith(O))?g.recognize(p):g.reset(),!O&&g.state&(ze|_r|Ct)&&(O=_.curRecognizer=g),B++}},get:function(p){if(p instanceof dt)return p;for(var _=this.recognizers,g=0;g<_.length;g++)if(_[g].options.event==p)return _[g];return null},add:function(p){if(u(p,"add",this))return this;var _=this.get(p.options.event);return _&&this.remove(_),this.recognizers.push(p),p.manager=this,this.touchAction.update(),p},remove:function(p){if(u(p,"remove",this))return this;var _=this.recognizers;return p=this.get(p),_.splice(I(_,p),1),this.touchAction.update(),this},on:function(p,_){var g=this.handlers;return v(z(p),function(M){g[M]=g[M]||[],g[M].push(_)}),this},off:function(p,_){var g=this.handlers;return v(z(p),function(M){_?g[M].splice(I(g[M],_),1):delete g[M]}),this},emit:function(p,_){this.options.domEvents&&Ru(p,_);var g=this.handlers[p]&&this.handlers[p].slice();if(!(!g||!g.length)){_.type=p,_.preventDefault=function(){_.srcEvent.preventDefault()};for(var M=0;M<g.length;)g[M](_),M++}},destroy:function(){this.element&&ra(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function ra(p,_){var g=p.element;v(p.options.cssProps,function(M,O){g.style[H(g.style,O)]=_?M:""})}function Ru(p,_){var g=r.createEvent("Event");g.initEvent(p,!0,!0),g.gesture=_,_.target.dispatchEvent(g)}d(Lt,{INPUT_START:J,INPUT_MOVE:Oe,INPUT_END:te,INPUT_CANCEL:ne,STATE_POSSIBLE:Vn,STATE_BEGAN:ze,STATE_CHANGED:_r,STATE_ENDED:Ct,STATE_RECOGNIZED:ut,STATE_CANCELLED:nn,STATE_FAILED:Ze,DIRECTION_NONE:At,DIRECTION_LEFT:qt,DIRECTION_RIGHT:ct,DIRECTION_UP:Yt,DIRECTION_DOWN:St,DIRECTION_HORIZONTAL:De,DIRECTION_VERTICAL:ht,DIRECTION_ALL:Xr,Manager:ts,Input:Me,TouchAction:Ki,TouchInput:Fn,MouseInput:Hn,PointerEventInput:Yi,TouchMouseInput:Xi,SingleTouchInput:Go,Recognizer:dt,AttrRecognizer:Ue,Tap:Un,Pan:Wn,Swipe:es,Pinch:Zi,Rotate:Ji,Press:Qi,on:A,off:C,each:v,merge:y,extend:d,inherit:m,bindFn:E,prefixed:H}),typeof i==a&&i.amd?i(function(){return Lt}):e.exports?e.exports=Lt:t[n]=Lt})(window,document,"Hammer")})(Gf);var Kf=Gf.exports,br=Kf,HM=1,Ls="MarzipanoHammerElementId";function Zf(e,t){return e[Ls]||(e[Ls]=HM++),t+e[Ls]}function Bi(){this._managers={},this._refCount={}}Bi.prototype.get=function(e,t){var r=Zf(e,t);return this._managers[r]||(this._managers[r]=this._createManager(e,t),this._refCount[r]=0),this._refCount[r]++,new Wi(this,this._managers[r],e,t)};Bi.prototype._createManager=function(e,t){var r=new br.Manager(e);return t==="mouse"?r.add(new br.Pan({direction:br.DIRECTION_ALL,threshold:0})):(t==="touch"||t==="pen"||t==="kinect")&&(r.add(new br.Pan({direction:br.DIRECTION_ALL,threshold:20,pointers:1})),r.add(new br.Pinch)),r};Bi.prototype._releaseHandle=function(e,t){var r=Zf(e,t);this._refCount[r]&&(this._refCount[r]--,this._refCount[r]||(this._managers[r].destroy(),delete this._managers[r],delete this._refCount[r]))};function Wi(e,t,r,n){this._manager=t,this._element=r,this._type=n,this._hammerGestures=e,this._eventHandlers=[]}Wi.prototype.on=function(e,t){var r=this._type,n=function(i){r===i.pointerType&&t(i)};this._eventHandlers.push({events:e,handler:n}),this._manager.on(e,n)};Wi.prototype.release=function(){for(var e=0;e<this._eventHandlers.length;e++){var t=this._eventHandlers[e];this._manager.off(t.events,t.handler)}this._hammerGestures._releaseHandle(this._element,this._type),this._manager=null,this._element=null,this._type=null,this._hammerGestures=null};Wi.prototype.manager=function(){return this._manager};var Ui=new Bi;function FM(e,t,r,n,i){var s=Math.sqrt(Math.pow(t,2)+Math.pow(r,2));e=Math.max(e,s/n),Qf(t,r,e,i),i[0]=Math.abs(i[0]),i[1]=Math.abs(i[1])}function Qf(e,t,r,n){var i=Math.atan(t/e);n[0]=r*Math.cos(i),n[1]=r*Math.sin(i)}var Jf={maxFriction:FM,changeVectorNorm:Qf},VM=re,yl=xt,BM=Ui,WM=at,UM=Jf.maxFriction,jM=ee,qM={friction:6,maxFrictionTime:.3,hammerEvent:"pan"},gl=typeof MARZIPANODEBUG<"u"&&MARZIPANODEBUG.controls;function Mt(e,t,r){if(this._element=e,this._opts=WM(r||{},qM),this._startEvent=null,this._lastEvent=null,this._active=!1,this._dynamics={x:new yl,y:new yl},this._hammer=BM.get(e,t),this._hammer.on("hammer.input",this._handleHammerEvent.bind(this)),this._opts.hammerEvent!="pan"&&this._opts.hammerEvent!="pinch")throw new Error(this._opts.hammerEvent+" is not a hammerEvent managed in DragControlMethod");this._hammer.on(this._opts.hammerEvent+"start",this._handleStart.bind(this)),this._hammer.on(this._opts.hammerEvent+"move",this._handleMove.bind(this)),this._hammer.on(this._opts.hammerEvent+"end",this._handleEnd.bind(this)),this._hammer.on(this._opts.hammerEvent+"cancel",this._handleEnd.bind(this))}VM(Mt);Mt.prototype.destroy=function(){this._hammer.release(),jM(this)};Mt.prototype._handleHammerEvent=function(e){if(e.isFirst){if(gl&&this._active)throw new Error("DragControlMethod active detected when already active");this._active=!0,this.emit("active")}if(e.isFinal){if(gl&&!this._active)throw new Error("DragControlMethod inactive detected when already inactive");this._active=!1,this.emit("inactive")}};Mt.prototype._handleStart=function(e){e.preventDefault(),this._startEvent=e};Mt.prototype._handleMove=function(e){e.preventDefault(),this._startEvent&&(this._updateDynamicsMove(e),this.emit("parameterDynamics","axisScaledX",this._dynamics.x),this.emit("parameterDynamics","axisScaledY",this._dynamics.y))};Mt.prototype._handleEnd=function(e){e.preventDefault(),this._startEvent&&(this._updateDynamicsRelease(e),this.emit("parameterDynamics","axisScaledX",this._dynamics.x),this.emit("parameterDynamics","axisScaledY",this._dynamics.y)),this._startEvent=!1,this._lastEvent=!1};Mt.prototype._updateDynamicsMove=function(e){var t=e.deltaX,r=e.deltaY,n=this._lastEvent||this._startEvent;n&&(t-=n.deltaX,r-=n.deltaY);var i=this._element.getBoundingClientRect(),s=i.right-i.left,o=i.bottom-i.top;t/=s,r/=o,this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.offset=-t,this._dynamics.y.offset=-r,this._lastEvent=e};var Os=[null,null];Mt.prototype._updateDynamicsRelease=function(e){var t=this._element.getBoundingClientRect(),r=t.right-t.left,n=t.bottom-t.top,i=1e3*e.velocityX/r,s=1e3*e.velocityY/n;this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.velocity=i,this._dynamics.y.velocity=s,UM(this._opts.friction,this._dynamics.x.velocity,this._dynamics.y.velocity,this._opts.maxFrictionTime,Os),this._dynamics.x.friction=Os[0],this._dynamics.y.friction=Os[1]};var eu=Mt,YM=re,El=xt,XM=Ui,GM=at,KM=Jf.maxFriction,ZM=ee,QM={speed:8,friction:6,maxFrictionTime:.3};function pr(e,t,r){this._element=e,this._opts=GM(r||{},QM),this._active=!1,this._hammer=XM.get(e,t),this._dynamics={x:new El,y:new El},this._hammer.on("panstart",this._handleStart.bind(this)),this._hammer.on("panmove",this._handleMove.bind(this)),this._hammer.on("panend",this._handleRelease.bind(this)),this._hammer.on("pancancel",this._handleRelease.bind(this))}YM(pr);pr.prototype.destroy=function(){this._hammer.release(),ZM(this)};pr.prototype._handleStart=function(e){e.preventDefault(),this._active||(this._active=!0,this.emit("active"))};pr.prototype._handleMove=function(e){e.preventDefault(),this._updateDynamics(e,!1)};pr.prototype._handleRelease=function(e){e.preventDefault(),this._updateDynamics(e,!0),this._active&&(this._active=!1,this.emit("inactive"))};var $s=[null,null];pr.prototype._updateDynamics=function(e,t){var r=this._element.getBoundingClientRect(),n=r.right-r.left,i=r.bottom-r.top,s=Math.max(n,i),o=e.deltaX/s*this._opts.speed,a=e.deltaY/s*this._opts.speed;this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.velocity=o,this._dynamics.y.velocity=a,t&&(KM(this._opts.friction,this._dynamics.x.velocity,this._dynamics.y.velocity,this._opts.maxFrictionTime,$s),this._dynamics.x.friction=$s[0],this._dynamics.y.friction=$s[1]),this.emit("parameterDynamics","x",this._dynamics.x),this.emit("parameterDynamics","y",this._dynamics.y)};var tu=pr,JM=re,eA=xt,tA=at,rA=ee,nA={frictionTime:.2,zoomDelta:.001};function Pn(e,t){this._element=e,this._opts=tA(t||{},nA),this._dynamics=new eA,this._eventList=[];var r=this._opts.frictionTime?this.withSmoothing:this.withoutSmoothing;this._wheelListener=r.bind(this),e.addEventListener("wheel",this._wheelListener)}JM(Pn);Pn.prototype.destroy=function(){this._element.removeEventListener("wheel",this._wheelListener),rA(this)};Pn.prototype.withoutSmoothing=function(e){this._dynamics.offset=ru(e)*this._opts.zoomDelta,this.emit("parameterDynamics","zoom",this._dynamics),e.preventDefault(),this.emit("active"),this.emit("inactive")};Pn.prototype.withSmoothing=function(e){var t=e.timeStamp;for(this._eventList.push(e);this._eventList[0].timeStamp<t-this._opts.frictionTime*1e3;)this._eventList.shift(0);for(var r=0,n=0;n<this._eventList.length;n++){var i=ru(this._eventList[n])*this._opts.zoomDelta;r+=i/this._opts.frictionTime}this._dynamics.velocity=r,this._dynamics.friction=Math.abs(r)/this._opts.frictionTime,this.emit("parameterDynamics","zoom",this._dynamics),e.preventDefault(),this.emit("active"),this.emit("inactive")};function ru(e){var t=e.deltaMode==1?20:1;return e.deltaY*t}var nu=Pn,iA=re,sA=xt,oA=Ui,aA=ee;function qr(e,t,r){this._hammer=oA.get(e,t),this._lastEvent=null,this._active=!1,this._dynamics=new sA,this._hammer.on("pinchstart",this._handleStart.bind(this)),this._hammer.on("pinch",this._handleEvent.bind(this)),this._hammer.on("pinchend",this._handleEnd.bind(this)),this._hammer.on("pinchcancel",this._handleEnd.bind(this))}iA(qr);qr.prototype.destroy=function(){this._hammer.release(),aA(this)};qr.prototype._handleStart=function(){this._active||(this._active=!0,this.emit("active"))};qr.prototype._handleEnd=function(){this._lastEvent=null,this._active&&(this._active=!1,this.emit("inactive"))};qr.prototype._handleEvent=function(e){var t=e.scale;this._lastEvent&&(t/=this._lastEvent.scale),this._dynamics.offset=(t-1)*-1,this.emit("parameterDynamics","zoom",this._dynamics),this._lastEvent=e};var iu=qr,lA=re,cA=xt,hA=ee;function Rn(e){if(!e)throw new Error("VelocityControlMethod: parameter must be defined");this._parameter=e,this._dynamics=new cA}lA(Rn);Rn.prototype.destroy=function(){hA(this)};Rn.prototype.setVelocity=function(e){this._dynamics.velocity=e,this.emit("parameterDynamics",this._parameter,this._dynamics)};Rn.prototype.setFriction=function(e){this._dynamics.friction=e,this.emit("parameterDynamics",this._parameter,this._dynamics)};var fA=Rn,uA=re,dA=xt,pA=ee;function Nn(e,t,r,n){if(!e)throw new Error("ElementPressControlMethod: element must be defined");if(!t)throw new Error("ElementPressControlMethod: parameter must be defined");if(!r)throw new Error("ElementPressControlMethod: velocity must be defined");if(!n)throw new Error("ElementPressControlMethod: friction must be defined");this._element=e,this._pressHandler=this._handlePress.bind(this),this._releaseHandler=this._handleRelease.bind(this),e.addEventListener("mousedown",this._pressHandler),e.addEventListener("mouseup",this._releaseHandler),e.addEventListener("mouseleave",this._releaseHandler),e.addEventListener("touchstart",this._pressHandler),e.addEventListener("touchmove",this._releaseHandler),e.addEventListener("touchend",this._releaseHandler),this._parameter=t,this._velocity=r,this._friction=n,this._dynamics=new dA,this._pressing=!1}uA(Nn);Nn.prototype.destroy=function(){this._element.removeEventListener("mousedown",this._pressHandler),this._element.removeEventListener("mouseup",this._releaseHandler),this._element.removeEventListener("mouseleave",this._releaseHandler),this._element.removeEventListener("touchstart",this._pressHandler),this._element.removeEventListener("touchmove",this._releaseHandler),this._element.removeEventListener("touchend",this._releaseHandler),pA(this)};Nn.prototype._handlePress=function(){this._pressing=!0,this._dynamics.velocity=this._velocity,this._dynamics.friction=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("active")};Nn.prototype._handleRelease=function(){this._pressing&&(this._dynamics.friction=this._friction,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive")),this._pressing=!1};var vA=Nn,mA=re,_A=xt,yA=lr,gA=ee;function Ge(e){e=e||{},this._methods=[],this._parameters=["x","y","axisScaledX","axisScaledY","zoom","yaw","pitch","roll"],this._now=e.nowForTesting||yA,this._composedOffsets={},this._composeReturn={offsets:this._composedOffsets,changing:null}}mA(Ge);Ge.prototype.add=function(e){if(!this.has(e)){var t={};this._parameters.forEach(function(i){t[i]={dynamics:new _A,time:null}});var r=this._updateDynamics.bind(this,t),n={instance:e,dynamics:t,parameterDynamicsHandler:r};e.addEventListener("parameterDynamics",r),this._methods.push(n)}};Ge.prototype.remove=function(e){var t=this._indexOfInstance(e);if(t>=0){var r=this._methods.splice(t,1)[0];r.instance.removeEventListener("parameterDynamics",r.parameterDynamicsHandler)}};Ge.prototype.has=function(e){return this._indexOfInstance(e)>=0};Ge.prototype._indexOfInstance=function(e){for(var t=0;t<this._methods.length;t++)if(this._methods[t].instance===e)return t;return-1};Ge.prototype.list=function(){for(var e=[],t=0;t<this._methods.length;t++)e.push(this._methods[t].instance);return e};Ge.prototype._updateDynamics=function(e,t,r){var n=e[t];if(!n)throw new Error("Unknown control parameter "+t);var i=this._now();n.dynamics.update(r,(i-n.time)/1e3),n.time=i,this.emit("change")};Ge.prototype._resetComposedOffsets=function(){for(var e=0;e<this._parameters.length;e++)this._composedOffsets[this._parameters[e]]=0};Ge.prototype.offsets=function(){var e,t=!1,r=this._now();this._resetComposedOffsets();for(var n=0;n<this._methods.length;n++)for(var i=this._methods[n].dynamics,s=0;s<this._parameters.length;s++){e=this._parameters[s];var o=i[e],a=o.dynamics;a.offset!=null&&(this._composedOffsets[e]+=a.offset,a.offset=null);var l=(r-o.time)/1e3,c=a.offsetFromVelocity(l);c&&(this._composedOffsets[e]+=c);var h=a.velocityAfter(l);a.velocity=h,h&&(t=!0),o.time=r}return this._composeReturn.changing=t,this._composeReturn};Ge.prototype.destroy=function(){for(var e=this.list(),t=0;t<e.length;t++)this.remove(e[t]);gA(this)};var EA=Ge,wA=re,bA=EA,TA=ee,su=typeof MARZIPANODEBUG<"u"&&MARZIPANODEBUG.controls;function Q(e){e=e||{},this._methods={},this._methodGroups={},this._composer=new bA,this._enabled=e&&e.enabled?!!e.enabled:!0,this._activeCount=0,this.updatedViews_=[],this._attachedRenderLoop=null}wA(Q);Q.prototype.destroy=function(){this.detach(),this._composer.destroy(),TA(this)};Q.prototype.methods=function(){var e={};for(var t in this._methods)e[t]=this._methods[t];return e};Q.prototype.method=function(e){return this._methods[e]};Q.prototype.registerMethod=function(e,t,r){if(this._methods[e])throw new Error("Control method already registered with id "+e);this._methods[e]={instance:t,enabled:!1,active:!1,activeHandler:this._handleActive.bind(this,e),inactiveHandler:this._handleInactive.bind(this,e)},r&&this.enableMethod(e,t)};Q.prototype.unregisterMethod=function(e){var t=this._methods[e];if(!t)throw new Error("No control method registered with id "+e);t.enabled&&this.disableMethod(e),delete this._methods[e]};Q.prototype.enableMethod=function(e){var t=this._methods[e];if(!t)throw new Error("No control method registered with id "+e);t.enabled||(t.enabled=!0,t.active&&this._incrementActiveCount(),this._listen(e),this._updateComposer(),this.emit("methodEnabled",e))};Q.prototype.disableMethod=function(e){var t=this._methods[e];if(!t)throw new Error("No control method registered with id "+e);t.enabled&&(t.enabled=!1,t.active&&this._decrementActiveCount(),this._unlisten(e),this._updateComposer(),this.emit("methodDisabled",e))};Q.prototype.addMethodGroup=function(e,t){this._methodGroups[e]=t};Q.prototype.removeMethodGroup=function(e){delete this._methodGroups[e]};Q.prototype.methodGroups=function(){var e={};for(var t in this._methodGroups)e[t]=this._methodGroups[t];return e};Q.prototype.enableMethodGroup=function(e){var t=this;t._methodGroups[e].forEach(function(r){t.enableMethod(r)})};Q.prototype.disableMethodGroup=function(e){var t=this;t._methodGroups[e].forEach(function(r){t.disableMethod(r)})};Q.prototype.enabled=function(){return this._enabled};Q.prototype.enable=function(){this._enabled||(this._enabled=!0,this._activeCount>0&&this.emit("active"),this.emit("enabled"),this._updateComposer())};Q.prototype.disable=function(){this._enabled&&(this._enabled=!1,this._activeCount>0&&this.emit("inactive"),this.emit("disabled"),this._updateComposer())};Q.prototype.attach=function(e){this._attachedRenderLoop&&this.detach(),this._attachedRenderLoop=e,this._beforeRenderHandler=this._updateViewsWithControls.bind(this),this._changeHandler=e.renderOnNextFrame.bind(e),this._attachedRenderLoop.addEventListener("beforeRender",this._beforeRenderHandler),this._composer.addEventListener("change",this._changeHandler)};Q.prototype.detach=function(){this._attachedRenderLoop&&(this._attachedRenderLoop.removeEventListener("beforeRender",this._beforeRenderHandler),this._composer.removeEventListener("change",this._changeHandler),this._beforeRenderHandler=null,this._changeHandler=null,this._attachedRenderLoop=null)};Q.prototype.attached=function(){return this._attachedRenderLoop!=null};Q.prototype._listen=function(e){var t=this._methods[e];if(!t)throw new Error("Bad method id");t.instance.addEventListener("active",t.activeHandler),t.instance.addEventListener("inactive",t.inactiveHandler)};Q.prototype._unlisten=function(e){var t=this._methods[e];if(!t)throw new Error("Bad method id");t.instance.removeEventListener("active",t.activeHandler),t.instance.removeEventListener("inactive",t.inactiveHandler)};Q.prototype._handleActive=function(e){var t=this._methods[e];if(!t)throw new Error("Bad method id");if(!t.enabled)throw new Error("Should not receive event from disabled control method");t.active||(t.active=!0,this._incrementActiveCount())};Q.prototype._handleInactive=function(e){var t=this._methods[e];if(!t)throw new Error("Bad method id");if(!t.enabled)throw new Error("Should not receive event from disabled control method");t.active&&(t.active=!1,this._decrementActiveCount())};Q.prototype._incrementActiveCount=function(){this._activeCount++,su&&this._checkActiveCount(),this._enabled&&this._activeCount===1&&this.emit("active")};Q.prototype._decrementActiveCount=function(){this._activeCount--,su&&this._checkActiveCount(),this._enabled&&this._activeCount===0&&this.emit("inactive")};Q.prototype._checkActiveCount=function(){var e=0;for(var t in this._methods){var r=this._methods[t];r.enabled&&r.active&&e++}if(e!=this._activeCount)throw new Error("Bad control state")};Q.prototype._updateComposer=function(){var e=this._composer;for(var t in this._methods){var r=this._methods[t],n=this._enabled&&r.enabled;n&&!e.has(r.instance)&&e.add(r.instance),!n&&e.has(r.instance)&&e.remove(r.instance)}};Q.prototype._updateViewsWithControls=function(){var e=this._composer.offsets();e.changing&&this._attachedRenderLoop.renderOnNextFrame(),this.updatedViews_.length=0;for(var t=this._attachedRenderLoop.stage().listLayers(),r=0;r<t.length;r++){var n=t[r].view();this.updatedViews_.indexOf(n)<0&&(t[r].view().updateWithControlParameters(e.offsets),this.updatedViews_.push(n))}};var ou=Q,xA=Ce.setTransform,wl=Wo;function MA(e,t,r,n){n=n||"";var i="translateX("+wl(t)+"px) translateY("+wl(r)+"px) translateZ(0) "+n;xA(e,i)}var au=MA,AA=re,SA=au,CA=Ce.setTransform,LA=ee;function Ne(e,t,r,n,i){i=i||{},i.perspective=i.perspective||{},i.perspective.extraTransforms=i.perspective.extraTransforms!=null?i.perspective.extraTransforms:"",this._domElement=e,this._parentDomElement=t,this._view=r,this._coords={},this._perspective={},this.setPosition(n),this._parentDomElement.appendChild(this._domElement),this.setPerspective(i.perspective),this._visible=!0,this._position={x:0,y:0}}AA(Ne);Ne.prototype.destroy=function(){this._parentDomElement.removeChild(this._domElement),LA(this)};Ne.prototype.domElement=function(){return this._domElement};Ne.prototype.position=function(){return this._coords};Ne.prototype.setPosition=function(e){for(var t in e)this._coords[t]=e[t];this._update()};Ne.prototype.perspective=function(){return this._perspective};Ne.prototype.setPerspective=function(e){for(var t in e)this._perspective[t]=e[t];this._update()};Ne.prototype.show=function(){this._visible||(this._visible=!0,this._update())};Ne.prototype.hide=function(){this._visible&&(this._visible=!1,this._update())};Ne.prototype._update=function(){var e=this._domElement,t=this._coords,r=this._position,n,i,s=!1;if(this._visible){var o=this._view;this._perspective.radius?(s=!0,this._setEmbeddedPosition(o,t)):(o.coordinatesToScreen(t,r),n=r.x,i=r.y,n!=null&&i!=null&&(s=!0,this._setPosition(n,i)))}s?(e.style.display="block",e.style.position="absolute"):(e.style.display="none",e.style.position="")};Ne.prototype._setEmbeddedPosition=function(e,t){var r=e.coordinatesToPerspectiveTransform(t,this._perspective.radius,this._perspective.extraTransforms);CA(this._domElement,r)};Ne.prototype._setPosition=function(e,t){SA(this._domElement,e,t,this._perspective.extraTransforms)};var lu=Ne,OA=re,$A=lu,PA=Jc,bl=au,Tl=Ce.setAbsolute,RA=Ce.setOverflowHidden,NA=Ce.setOverflowVisible,IA=Ce.setNullSize,DA=Ce.setPixelSize,xl=Ce.setWithVendorPrefix("pointer-events"),zA=ee;function Ie(e,t,r,n,i){i=i||{},this._parentDomElement=e,this._stage=t,this._view=r,this._renderLoop=n,this._hotspots=[],this._visible=!0,this._rect=i.rect,this._visibilityOrRectChanged=!0,this._stageWidth=null,this._stageHeight=null,this._tmpRect={},this._hotspotContainerWrapper=document.createElement("div"),Tl(this._hotspotContainerWrapper),xl(this._hotspotContainerWrapper,"none"),this._parentDomElement.appendChild(this._hotspotContainerWrapper),this._hotspotContainer=document.createElement("div"),Tl(this._hotspotContainer),xl(this._hotspotContainer,"all"),this._hotspotContainerWrapper.appendChild(this._hotspotContainer),this._updateHandler=this._update.bind(this),this._renderLoop.addEventListener("afterRender",this._updateHandler)}OA(Ie);Ie.prototype.destroy=function(){for(;this._hotspots.length;)this.destroyHotspot(this._hotspots[0]);this._parentDomElement.removeChild(this._hotspotContainerWrapper),this._renderLoop.removeEventListener("afterRender",this._updateHandler),zA(this)};Ie.prototype.domElement=function(){return this._hotspotContainer};Ie.prototype.setRect=function(e){this._rect=e,this._visibilityOrRectChanged=!0};Ie.prototype.rect=function(){return this._rect};Ie.prototype.createHotspot=function(e,t,r){t=t||{};var n=new $A(e,this._hotspotContainer,this._view,t,r);return this._hotspots.push(n),n._update(),this.emit("hotspotsChange"),n};Ie.prototype.hasHotspot=function(e){return this._hotspots.indexOf(e)>=0};Ie.prototype.listHotspots=function(){return[].concat(this._hotspots)};Ie.prototype.destroyHotspot=function(e){var t=this._hotspots.indexOf(e);if(t<0)throw new Error("No such hotspot");this._hotspots.splice(t,1),e.destroy(),this.emit("hotspotsChange")};Ie.prototype.hide=function(){this._visible&&(this._visible=!1,this._visibilityOrRectChanged=!0,this._update())};Ie.prototype.show=function(){this._visible||(this._visible=!0,this._visibilityOrRectChanged=!0,this._update())};Ie.prototype._update=function(){var e=this._hotspotContainerWrapper,t=this._stage.width(),r=this._stage.height(),n=this._tmpRect;if(this._visibilityOrRectChanged||this._rect&&(t!==this._stageWidth||r!==this._stageHeight)){var i=this._visible;e.style.display=i?"block":"none",i&&(this._rect?(PA(t,r,this._rect,n),bl(e,t*n.x,r*n.y),DA(e,t*n.width,r*n.height),RA(e)):(bl(e,0,0),IA(e),NA(e))),this._stageWidth=t,this._stageHeight=r,this._visibilityOrRectChanged=!1}for(var s=0;s<this._hotspots.length;s++)this._hotspots[s]._update()};var cu=Ie,kA=qf,HA=Uf,FA=cu,VA=re,hu=lr,BA=On,WA=Cn,Ml=at,UA=ee;function fe(e,t){this._viewer=e,this._view=t,this._layers=[],this._hotspotContainer=new FA(e._controlContainer,e.stage(),this._view,e.renderLoop()),this._movement=null,this._movementStartTime=null,this._movementStep=null,this._movementParams=null,this._movementCallback=null,this._updateMovementHandler=this._updateMovement.bind(this),this._updateHotspotContainerHandler=this._updateHotspotContainer.bind(this),this._viewer.addEventListener("sceneChange",this._updateHotspotContainerHandler),this._viewChangeHandler=this.emit.bind(this,"viewChange"),this._view.addEventListener("change",this._viewChangeHandler),this._updateHotspotContainer()}VA(fe);fe.prototype.destroy=function(){this._view.removeEventListener("change",this._viewChangeHandler),this._viewer.removeEventListener("sceneChange",this._updateHotspotContainerHandler),this._movement&&this.stopMovement(),this._hotspotContainer.destroy(),this.destroyAllLayers(),UA(this)};fe.prototype.hotspotContainer=function(){return this._hotspotContainer};fe.prototype.layer=function(){return this._layers[0]};fe.prototype.listLayers=function(){return[].concat(this._layers)};fe.prototype.view=function(){return this._view};fe.prototype.viewer=function(){return this._viewer};fe.prototype.visible=function(){return this._viewer.scene()===this};fe.prototype.createLayer=function(e){e=e||{};var t=e.textureStoreOpts||{},r=e.layerOpts||{},n=e.source,i=e.geometry,s=this._view,o=this._viewer.stage(),a=new HA(n,o,t),l=new kA(n,i,s,a,r);return this._layers.push(l),e.pinFirstLevel&&l.pinFirstLevel(),this.emit("layerChange"),l};fe.prototype.destroyLayer=function(e){var t=this._layers.indexOf(e);if(t<0)throw new Error("No such layer in scene");this._layers.splice(t,1),this.emit("layerChange"),e.textureStore().destroy(),e.destroy()};fe.prototype.destroyAllLayers=function(){for(;this._layers.length>0;)this.destroyLayer(this._layers[0])};fe.prototype.switchTo=function(e,t){return this._viewer.switchScene(this,e,t)};fe.prototype.lookTo=function(e,t,r){var n=this;if(t=t||{},r=r||BA,WA(e)!=="object")throw new Error("Target view parameters must be an object");var i=function(d){return(d*=2)<1?.5*d*d:-.5*(--d*(d-2)-1)},s=t.ease!=null?t.ease:i,o=t.controlsInterrupt!=null?t.controlsInterrupt:!1,a=t.transitionDuration!=null?t.transitionDuration:1e3,l=t.shortest!=null?t.shortest:!0,c=this._view,h=c.parameters(),f={};Ml(f,e),Ml(f,h),l&&c.normalizeToClosest&&c.normalizeToClosest(f,f);var u=function(){var d=!1;return function(y,m){if(m>=a&&d)return null;var E=Math.min(m/a,1);for(var T in y){var x=h[T],A=f[T];y[T]=x+s(E)*(A-x)}return d=m>=a,y}},v=this._viewer.controls().enabled();o||this._viewer.controls().disable(),this.startMovement(u,function(){v&&n._viewer.controls().enable(),r()})};fe.prototype.startMovement=function(e,t){var r=this._viewer.renderLoop();this._movement&&this.stopMovement();var n=e();if(typeof n!="function")throw new Error("Bad movement");this._movement=e,this._movementStep=n,this._movementStartTime=hu(),this._movementParams={},this._movementCallback=t,r.addEventListener("beforeRender",this._updateMovementHandler),r.renderOnNextFrame()};fe.prototype.stopMovement=function(){var e=this._movementCallback,t=this._viewer.renderLoop();this._movement&&(this._movement=null,this._movementStep=null,this._movementStartTime=null,this._movementParams=null,this._movementCallback=null,t.removeEventListener("beforeRender",this._updateMovementHandler),e&&e())};fe.prototype.movement=function(){return this._movement};fe.prototype._updateMovement=function(){if(!this._movement)throw new Error("Should not call update");var e=this._viewer.renderLoop(),t=this._view,r=hu()-this._movementStartTime,n=this._movementStep,i=this._movementParams;i=t.parameters(i),i=n(i,r),i==null?this.stopMovement():(t.setParameters(i),e.renderOnNextFrame())};fe.prototype._updateHotspotContainer=function(){this.visible()?this._hotspotContainer.show():this._hotspotContainer.hide()};var fu=fe,jA=re,qA=at,uu=lr,YA={duration:1/0};function lt(e){e=qA(e||{},YA),this._duration=e.duration,this._startTime=null,this._handle=null,this._check=this._check.bind(this)}jA(lt);lt.prototype.start=function(){this._startTime=uu(),this._handle==null&&this._duration<1/0&&this._setup(this._duration)};lt.prototype.started=function(){return this._startTime!=null};lt.prototype.stop=function(){this._startTime=null,this._handle!=null&&(clearTimeout(this._handle),this._handle=null)};lt.prototype._setup=function(e){this._handle=setTimeout(this._check,e)};lt.prototype._teardown=function(){clearTimeout(this._handle),this._handle=null};lt.prototype._check=function(){var e=uu(),t=e-this._startTime,r=this._duration-t;this._teardown(),r<=0?(this.emit("timeout"),this._startTime=null):r<1/0&&this._setup(r)};lt.prototype.duration=function(){return this._duration};lt.prototype.setDuration=function(e){this._duration=e,this._startTime!=null&&this._check()};var XA=lt,GA=at,KA=ee,ZA={active:"move",inactive:"default",disabled:"default"};function Yr(e,t,r,n){n=GA(n||{},ZA),this._element=r,this._controls=e,this._id=t,this._attached=!1,this._setActiveCursor=this._setCursor.bind(this,n.active),this._setInactiveCursor=this._setCursor.bind(this,n.inactive),this._setDisabledCursor=this._setCursor.bind(this,n.disabled),this._setOriginalCursor=this._setCursor.bind(this,this._element.style.cursor),this._updateAttachmentHandler=this._updateAttachment.bind(this),e.addEventListener("methodEnabled",this._updateAttachmentHandler),e.addEventListener("methodDisabled",this._updateAttachmentHandler),e.addEventListener("enabled",this._updateAttachmentHandler),e.addEventListener("disabled",this._updateAttachmentHandler),this._updateAttachment()}Yr.prototype.destroy=function(){this._detachFromControlMethod(this._controls.method(this._id)),this._setOriginalCursor(),this._controls.removeEventListener("methodEnabled",this._updateAttachmentHandler),this._controls.removeEventListener("methodDisabled",this._updateAttachmentHandler),this._controls.removeEventListener("enabled",this._updateAttachmentHandler),this._controls.removeEventListener("disabled",this._updateAttachmentHandler),KA(this)};Yr.prototype._updateAttachment=function(){var e=this._controls,t=this._id;e.enabled()&&e.method(t).enabled?this._attachToControlMethod(e.method(t)):this._detachFromControlMethod(e.method(t))};Yr.prototype._attachToControlMethod=function(e){this._attached||(e.instance.addEventListener("active",this._setActiveCursor),e.instance.addEventListener("inactive",this._setInactiveCursor),e.active?this._setActiveCursor():this._setInactiveCursor(),this._attached=!0)};Yr.prototype._detachFromControlMethod=function(e){this._attached&&(e.instance.removeEventListener("active",this._setActiveCursor),e.instance.removeEventListener("inactive",this._setInactiveCursor),this._setDisabledCursor(),this._attached=!1)};Yr.prototype._setCursor=function(e){this._element.style.cursor=e};var QA=Yr,JA=at,Ps=eu,eS=tu,tS=nu,rS=iu,ke=Xf,nS={mouseViewMode:"drag",dragMode:"pan"};function iS(e,t,r){r=JA(r||{},nS);var n={mouseViewDrag:new Ps(t,"mouse"),mouseViewQtvr:new eS(t,"mouse"),leftArrowKey:new ke(37,"x",-.7,3),rightArrowKey:new ke(39,"x",.7,3),upArrowKey:new ke(38,"y",-.7,3),downArrowKey:new ke(40,"y",.7,3),plusKey:new ke(107,"zoom",-.7,3),minusKey:new ke(109,"zoom",.7,3),wKey:new ke(87,"y",-.7,3),aKey:new ke(65,"x",-.7,3),sKey:new ke(83,"y",.7,3),dKey:new ke(68,"x",.7,3),qKey:new ke(81,"roll",.7,3),eKey:new ke(69,"roll",-.7,3)},i=["scrollZoom","touchView","pinch"];r.scrollZoom!==!1&&(n.scrollZoom=new tS(t));var s={arrowKeys:["leftArrowKey","rightArrowKey","upArrowKey","downArrowKey"],plusMinusKeys:["plusKey","minusKey"],wasdKeys:["wKey","aKey","sKey","dKey"],qeKeys:["qKey","eKey"]};switch(r.dragMode){case"pinch":n.pinch=new Ps(t,"touch",{hammerEvent:"pinch"});break;case"pan":n.touchView=new Ps(t,"touch"),n.pinch=new rS(t,"touch");break;default:throw new Error("Unknown drag mode: "+r.dragMode)}switch(r.mouseViewMode){case"drag":i.push("mouseViewDrag");break;case"qtvr":i.push("mouseViewQtvr");break;default:throw new Error("Unknown mouse view mode: "+r.mouseViewMode)}for(var o in n){var a=n[o];e.registerMethod(o,a),i.indexOf(o)>=0&&e.enableMethod(o)}for(var l in s){var c=s[l];e.addMethodGroup(l,c)}return n}var du=iS,Al=lr;function sS(e,t,r){var n=!1,i=Al();function s(){if(!n){var o=(Al()-i)/e;o<1?(t(o),requestAnimationFrame(s)):(t(1),r())}}return t(0),requestAnimationFrame(s),function(){n=!0,r.apply(null,arguments)}}var pu=sS,oS=re,aS=Yf,lS=ou,cS=fu,hS=XA,fS=ch,uS=QA,Sl=Ui,dS=du,pS=Lf,vS=Ce.setOverflowHidden,mS=Ce.setAbsolute,_S=Ce.setFullSize,yS=pu,gS=On,ES=ee;function G(e,t){t=t||{},this._domElement=e,vS(e),this._stage=new fS(t.stage),pS(this._stage),this._domElement.appendChild(this._stage.domElement()),this._controlContainer=document.createElement("div"),mS(this._controlContainer),_S(this._controlContainer),e.appendChild(this._controlContainer),this._size={},this.updateSize(),this._updateSizeListener=this.updateSize.bind(this),window.addEventListener("resize",this._updateSizeListener),this._renderLoop=new aS(this._stage),this._controls=new lS,this._controlMethods=dS(this._controls,this._controlContainer,t.controls),this._controls.attach(this._renderLoop),this._hammerManagerTouch=Sl.get(this._controlContainer,"touch"),this._hammerManagerMouse=Sl.get(this._controlContainer,"mouse"),this._dragCursor=new uS(this._controls,"mouseViewDrag",e,t.cursors&&t.cursors.drag||{}),this._renderLoop.start(),this._scenes=[],this._currentScene=null,this._replacedScene=null,this._cancelCurrentTween=null,this._layerChangeHandler=this._updateSceneLayers.bind(this),this._viewChangeHandler=this.emit.bind(this,"viewChange"),this._idleTimer=new hS,this._idleTimer.start(),this._resetIdleTimerHandler=this._resetIdleTimer.bind(this),this.addEventListener("viewChange",this._resetIdleTimerHandler),this._triggerIdleTimerHandler=this._triggerIdleTimer.bind(this),this._idleTimer.addEventListener("timeout",this._triggerIdleTimerHandler),this._stopMovementHandler=this.stopMovement.bind(this),this._controls.addEventListener("active",this._stopMovementHandler),this.addEventListener("sceneChange",this._stopMovementHandler),this._idleMovement=null}oS(G);G.prototype.destroy=function(){window.removeEventListener("resize",this._updateSizeListener),this._currentScene&&this._removeSceneEventListeners(this._currentScene),this._replacedScene&&this._removeSceneEventListeners(this._replacedScene),this._dragCursor.destroy();for(var e in this._controlMethods)this._controlMethods[e].destroy();for(;this._scenes.length;)this.destroyScene(this._scenes[0]);this._domElement.removeChild(this._stage.domElement()),this._stage.destroy(),this._renderLoop.destroy(),this._controls.destroy(),this._controls=null,this._cancelCurrentTween&&this._cancelCurrentTween(),ES(this)};G.prototype.updateSize=function(){var e=this._size;e.width=this._domElement.clientWidth,e.height=this._domElement.clientHeight,this._stage.setSize(e)};G.prototype.stage=function(){return this._stage};G.prototype.renderLoop=function(){return this._renderLoop};G.prototype.controls=function(){return this._controls};G.prototype.domElement=function(){return this._domElement};G.prototype.createScene=function(e){e=e||{};var t=this.createEmptyScene({view:e.view});return t.createLayer({source:e.source,geometry:e.geometry,pinFirstLevel:e.pinFirstLevel,textureStoreOpts:e.textureStoreOpts,layerOpts:e.layerOpts}),t};G.prototype.createEmptyScene=function(e){e=e||{};var t=new cS(this,e.view);return this._scenes.push(t),t};G.prototype._updateSceneLayers=function(){var e,t,r=this._stage,n=this._currentScene,i=this._replacedScene,s=r.listLayers(),o=[];if(i&&(o=o.concat(i.listLayers())),n&&(o=o.concat(n.listLayers())),Math.abs(s.length-o.length)!==1)throw new Error("Stage and scene out of sync");if(o.length<s.length){for(e=0;e<s.length;e++)if(t=s[e],o.indexOf(t)<0){this._removeLayerFromStage(t);break}}if(o.length>s.length)for(e=0;e<o.length;e++)t=o[e],s.indexOf(t)<0&&this._addLayerToStage(t,e)};G.prototype._addLayerToStage=function(e,t){e.pinFirstLevel(),this._stage.addLayer(e,t)};G.prototype._removeLayerFromStage=function(e){this._stage.removeLayer(e),e.unpinFirstLevel(),e.textureStore().clearNotPinned()};G.prototype._addSceneEventListeners=function(e){e.addEventListener("layerChange",this._layerChangeHandler),e.addEventListener("viewChange",this._viewChangeHandler)};G.prototype._removeSceneEventListeners=function(e){e.removeEventListener("layerChange",this._layerChangeHandler),e.removeEventListener("viewChange",this._viewChangeHandler)};G.prototype.destroyScene=function(e){var t=this._scenes.indexOf(e);if(t<0)throw new Error("No such scene in viewer");var r,n;if(this._currentScene===e){for(this._removeSceneEventListeners(e),n=e.listLayers(),r=0;r<n.length;r++)this._removeLayerFromStage(n[r]);this._cancelCurrentTween&&(this._cancelCurrentTween(),this._cancelCurrentTween=null),this._currentScene=null,this.emit("sceneChange")}if(this._replacedScene===e){for(this._removeSceneEventListeners(e),n=e.listLayers(),r=0;r<n.length;r++)this._removeLayerFromStage(n[r]);this._replacedScene=null}this._scenes.splice(t,1),e.destroy()};G.prototype.destroyAllScenes=function(){for(;this._scenes.length>0;)this.destroyScene(this._scenes[0])};G.prototype.hasScene=function(e){return this._scenes.indexOf(e)>=0};G.prototype.listScenes=function(){return[].concat(this._scenes)};G.prototype.scene=function(){return this._currentScene};G.prototype.view=function(){var e=this._currentScene;return e?e.view():null};G.prototype.lookTo=function(e,t,r){var n=this._currentScene;n&&n.lookTo(e,t,r)};G.prototype.startMovement=function(e,t){var r=this._currentScene;r&&r.startMovement(e,t)};G.prototype.stopMovement=function(){var e=this._currentScene;e&&e.stopMovement()};G.prototype.movement=function(){var e=this._currentScene;if(e)return e.movement()};G.prototype.setIdleMovement=function(e,t){this._idleTimer.setDuration(e),this._idleMovement=t};G.prototype.breakIdleMovement=function(){this.stopMovement(),this._resetIdleTimer()};G.prototype._resetIdleTimer=function(){this._idleTimer.start()};G.prototype._triggerIdleTimer=function(){var e=this._idleMovement;e&&this.startMovement(e)};var wS=1e3;function bS(e,t,r){var n=t.listLayers();n.forEach(function(i){i.mergeEffects({opacity:e})}),t._hotspotContainer.domElement().style.opacity=e}G.prototype.switchScene=function(e,t,r){var n=this;t=t||{},r=r||gS;var i=this._stage,s=this._currentScene;if(s===e){r();return}if(this._scenes.indexOf(e)<0)throw new Error("No such scene in viewer");this._cancelCurrentTween&&(this._cancelCurrentTween(),this._cancelCurrentTween=null);var o=s?s.listLayers():[],a=e.listLayers(),l=i.listLayers();if(s&&(l.length!==o.length||l.length>1&&l[0]!=o[0]))throw new Error("Stage not in sync with viewer");for(var c=t.transitionDuration!=null?t.transitionDuration:wS,h=t.transitionUpdate!=null?t.transitionUpdate:bS,f=0;f<a.length;f++)this._addLayerToStage(a[f]);function u(d){h(d,e,s)}function v(){if(n._replacedScene){n._removeSceneEventListeners(n._replacedScene),o=n._replacedScene.listLayers();for(var d=0;d<o.length;d++)n._removeLayerFromStage(o[d]);n._replacedScene=null}n._cancelCurrentTween=null,r()}this._cancelCurrentTween=yS(c,u,v),this._currentScene=e,this._replacedScene=s,this.emit("sceneChange"),this.emit("viewChange"),this._addSceneEventListeners(e)};var TS=G,ji=me.vec4,xS=me.mat4;function MS(e){var t=e||{};return t.colorOffset=t.colorOffset||ji.create(),t.colorMatrix=t.colorMatrix||xS.create(),t}function vu(e,t,r){AS(r,e,t.colorMatrix),ji.add(r,r,t.colorOffset)}function AS(e,t,r){var n=t[0],i=t[1],s=t[2],o=t[3];return e[0]=r[0]*n+r[1]*i+r[2]*s+r[3]*o,e[1]=r[4]*n+r[5]*i+r[6]*s+r[7]*o,e[2]=r[8]*n+r[9]*i+r[10]*s+r[11]*o,e[3]=r[12]*n+r[13]*i+r[14]*s+r[15]*o,e}var Xt=ji.create();function SS(e,t){for(var r=e.width,n=e.height,i=e.data,s=0;s<r*n;s++)ji.set(Xt,i[s*4+0]/255,i[s*4+1]/255,i[s*4+2]/255,i[s*4+3]/255),vu(Xt,t,Xt),i[s*4+0]=Xt[0]*255,i[s*4+1]=Xt[1]*255,i[s*4+2]=Xt[2]*255,i[s*4+3]=Xt[3]*255}var CS={identity:MS,applyToPixel:vu,applyToImageData:SS},LS=at,Rs=.1,Ns=.01,OS={yawSpeed:Rs,pitchSpeed:Rs,fovSpeed:Rs,yawAccel:Ns,pitchAccel:Ns,fovAccel:Ns,targetPitch:0,targetFov:null};function $S(e){e=LS(e||{},OS);var t=e.yawSpeed,r=e.pitchSpeed,n=e.fovSpeed,i=e.yawAccel,s=e.pitchAccel,o=e.fovAccel,a=e.targetPitch,l=e.targetFov;return function(){var h=0,f=0,u=0,v=0,d=0,y=0,m=0,E,T,x,A;return function(S,$){if(E=($-h)/1e3,d=Math.min(f+E*i,t),T=d*E,S.yaw=S.yaw+T,a!=null&&S.pitch!==a){var z=.5*u*u/s;Math.abs(a-S.pitch)>z?y=Math.min(u+E*s,r):y=Math.max(u-E*s,0),x=y*E,a<S.pitch&&(S.pitch=Math.max(a,S.pitch-x)),a>S.pitch&&(S.pitch=Math.min(a,S.pitch+x))}if(l!=null&&S.fov!==a){var I=.5*v*v/o;Math.abs(l-S.fov)>I?m=Math.min(v+E*o,n):m=Math.max(v-E*o,0),A=m*E,l<S.fov&&(S.fov=Math.max(l,S.fov-A)),l>S.fov&&(S.fov=Math.min(l,S.fov+A))}return h=$,f=d,u=y,v=m,S}}}var PS=$S;function RS(e,t){function r(){t&&t.length>0?e.apply(null,t):e()}setTimeout(r,0)}var NS=RS;function IS(e){return e*Math.PI/180}var DS=IS;function zS(e){return e*180/Math.PI}var kS=zS,HS={WebGlStage:ch,WebGlCubeRenderer:xf,WebGlFlatRenderer:Af,WebGlEquirectRenderer:Cf,registerDefaultRenderers:Lf,CubeGeometry:Jx,FlatGeometry:c2,EquirectGeometry:v2,RectilinearView:D2,FlatView:j2,ImageUrlSource:lM,SingleAssetSource:cM,StaticAsset:Mo,DynamicAsset:pM,TextureStore:Uf,Layer:qf,RenderLoop:Yf,KeyControlMethod:Xf,DragControlMethod:eu,QtvrControlMethod:tu,ScrollZoomControlMethod:nu,PinchZoomControlMethod:iu,VelocityControlMethod:fA,ElementPressControlMethod:vA,Controls:ou,Dynamics:xt,Viewer:TS,Scene:fu,Hotspot:lu,HotspotContainer:cu,colorEffects:CS,registerDefaultControls:du,autorotate:PS,util:{async:eh,cancelize:th,chain:Uo,clamp:Wr,clearOwnProperties:ee,cmp:An,compose:If,convertFov:Nf,decimal:Wo,defaults:at,defer:NS,degToRad:DS,delay:Ff,dom:Ce,extend:jf,hash:Hi,inherits:it,mod:Bt,noop:On,now:lr,once:To,pixelRatio:zi,radToDeg:kS,real:Bo,retry:Vf,tween:pu,type:Cn},dependencies:{bowser:Ao,glMatrix:me,eventEmitter:re,hammerjs:Kf}};const he=ug(HS);document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("pano"),t=document.getElementById("caption");if(!e)return;const r=[{id:1,name:"Ruang Makan",caption:"Ini adalah ruang makan.",imagePath:"/images/example.jpg",hotspots:[{yaw:5,pitch:0,targetScene:2}]},{id:2,name:"Outdoor",caption:"Ini adalah area outdoor.",imagePath:"/images/example2.jpg",hotspots:[{yaw:Math.PI,pitch:0,targetScene:1}]}],n=new he.Viewer(e),i={};r.forEach(o=>{const a=he.ImageUrlSource.fromString(o.imagePath),l=new he.EquirectGeometry([{width:3e3}]),c=he.RectilinearView.limit.traditional(1024,100*Math.PI/180),h=new he.RectilinearView(null,c),f=n.createScene({source:a,geometry:l,view:h,pinFirstLevel:!0});o.hotspots.forEach(u=>{const v=document.createElement("div");v.classList.add("hotspot-arrow"),v.innerHTML="",v.style.cursor="pointer",v.onclick=()=>s(u.targetScene),f.hotspotContainer().createHotspot(v,{yaw:u.yaw,pitch:u.pitch})}),i[o.id]={scene:f,caption:o.caption}});function s(o){i[o]&&(i[o].scene.switchTo(),t&&(t.textContent=i[o].caption||""))}document.querySelectorAll("#panel button").forEach(o=>{o.addEventListener("click",()=>{const a=parseInt(o.getAttribute("data-scene"),10);s(a)})}),window.switchScene=s});document.addEventListener("DOMContentLoaded",()=>{(async function(){const t=document.getElementById("pano"),r=document.getElementById("caption");if(!t)return;const n=JSON.parse(document.getElementById("scene-data").textContent),i=n.activeSceneId,s=n.scenes||[],o=new he.Viewer(t),a={};function l(){t.innerHTML=`
        <div style="
          display:flex;align-items:center;justify-content:center;
          height:100%;width:100%;
          background:#333;color:#fff;font-size:24px;font-weight:600;text-align:center;">
          Virtual Tour is under maintenance
        </div>`}async function c(u){try{return(await fetch(u,{method:"HEAD",cache:"no-store"})).ok}catch{return!1}}if(s.length===0){l();return}const h=await Promise.all(s.map(async u=>{const v=(u.imagePath||"").trim();if(!v)return{...u,_validImage:!1};const d=await c(v);return{...u,_validImage:d}}));h.forEach(u=>{if(!u._validImage)return;const v=he.ImageUrlSource.fromString(u.imagePath),d=new he.EquirectGeometry([{width:3e3}]),y=he.RectilinearView.limit.traditional(5e4,100*Math.PI/180),m=new he.RectilinearView(null,y),E=o.createScene({source:v,geometry:d,view:m,pinFirstLevel:!0});(u.hotspots||[]).forEach(T=>{const x=document.createElement("div");x.classList.add("hotspot-arrow"),x.innerHTML="",x.style.cursor="pointer",x.onclick=()=>f(T.targetScene),E.hotspotContainer().createHotspot(x,{yaw:T.yaw,pitch:T.pitch})}),a[u.id]={scene:E,caption:u.caption}});function f(u){a[u]?(a[u].scene.switchTo(),r&&(r.textContent=a[u].caption||"")):Object.keys(a).length>0?window.location.href=`/virtual-tour/show-scene/${u}`:l()}if(a[i])f(i);else{const u=h.find(v=>v._validImage);u&&a[u.id]?f(u.id):l()}document.querySelectorAll("#panel button").forEach(u=>{u.addEventListener("click",()=>{const v=parseInt(u.getAttribute("data-scene"),10);f(v)})})})()});document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("pano"),t=document.getElementById("fileInput"),r=document.getElementById("addConnectionBtn"),n=document.getElementById("connectionList"),i=document.getElementById("connectionsInput");if(!e||!t||!i)return;let s=new he.Viewer(e),o=null,a=!1,l=[];if(window.currentScene&&window.currentScene.image_path){const f=he.ImageUrlSource.fromString("/"+window.currentScene.image_path),u=new he.EquirectGeometry([{width:4e3}]),v=new he.RectilinearView;o=s.createScene({source:f,geometry:u,view:v,pinFirstLevel:!0}),o.switchTo(),l=(window.existingConnections||[]).map(d=>{const y=document.createElement("div");return y.classList.add("hotspot-point"),y.innerHTML="",o.hotspotContainer().createHotspot(y,{yaw:d.yaw,pitch:d.pitch}),{yaw:d.yaw,pitch:d.pitch,target:d.target,el:y}}),h()}t.addEventListener("change",f=>{const u=f.target.files[0];if(!u)return;const v=URL.createObjectURL(u);e.innerHTML="",s=new he.Viewer(e);const d=he.ImageUrlSource.fromString(v),y=new he.EquirectGeometry([{width:4e3}]),m=he.RectilinearView.limit.traditional(1024,100*Math.PI/180),E=new he.RectilinearView(null,m);o=s.createScene({source:d,geometry:y,view:E,pinFirstLevel:!0}),u.name.replace(/\.[^/.]+$/,""),o.switchTo(),l=[],h()}),r==null||r.addEventListener("click",()=>{o&&(a=!0,r.textContent="Click a point on panorama...",r.disabled=!0)}),e.addEventListener("click",f=>{if(!a||!o)return;const u=o.view(),v=e.getBoundingClientRect(),d=f.clientX-v.left,y=f.clientY-v.top,m=u.screenToCoordinates({x:d,y});if(!m)return;const E=parseFloat(m.yaw.toFixed(3)),T=parseFloat(m.pitch.toFixed(3)),x=document.createElement("div");x.classList.add("hotspot-point"),x.innerHTML="",o.hotspotContainer().createHotspot(x,{yaw:E,pitch:T});let A=window.allScenes.length>0?window.allScenes[0].id:null;l.push({yaw:E,pitch:T,el:x,target:A}),h(),console.log("Captured:",{yaw:E,pitch:T,target:A}),a=!1,r.textContent="+ Add Connection",r.disabled=!1});function c(){i.value=JSON.stringify(l.map(f=>({yaw:f.yaw,pitch:f.pitch,target:f.target})))}function h(){n&&(n.innerHTML="",l.forEach((f,u)=>{const v=document.createElement("li");v.style.marginBottom="6px";const d=document.createElement("span");d.textContent=`#${u+1}  yaw: ${f.yaw}, pitch: ${f.pitch}`;const y=document.createElement("select");y.style.marginLeft="10px",window.allScenes.forEach(T=>{const x=document.createElement("option");x.value=T.id,x.textContent=T.name,y.appendChild(x)}),f.target==null&&window.allScenes.length>0?f.target=String(window.allScenes[0].id):f.target=String(f.target),!window.allScenes.some(T=>String(T.id)===f.target)&&window.allScenes.length>0&&(f.target=String(window.allScenes[0].id)),y.value=String(f.target),console.log("Target:",f.target,"Options:",[...y.options].map(T=>T.value)),y.addEventListener("change",()=>{f.target=String(y.value),c()});const E=document.createElement("button");E.textContent="",E.style.marginLeft="10px",E.style.padding="2px 6px",E.style.fontSize="12px",E.style.cursor="pointer",E.addEventListener("click",()=>{var T;(T=f.el)==null||T.remove(),l.splice(u,1),h()}),v.appendChild(d),v.appendChild(y),v.appendChild(E),n.appendChild(v)}),c())}});
